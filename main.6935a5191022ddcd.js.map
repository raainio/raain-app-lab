{"version":3,"file":"main.6935a5191022ddcd.js","mappings":"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CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,qC;;;;;;;;;;AC9OA,e","sources":["./src/bpInfo.ts","./src/core/app-routing.module.ts","./src/core/app.component.ts","./src/core/app.component.html","./src/core/app.module.ts","./src/core/auth/auth.guard.ts","./src/core/page-not-found/page-not-found.component.ts","./src/core/page-not-found/page-not-found.component.html","./src/core/shared/cache.service.ts","./src/core/shared/cumulative-selector/cumulative-selector.component.ts","./src/core/shared/cumulative-selector/cumulative-selector.component.html","./src/core/shared/fidj-storage.model.ts","./src/core/shared/index.ts","./src/core/shared/pipes.module.ts","./src/core/shared/profile-icon.directive.ts","./src/core/shared/profile.service.ts","./src/core/shared/raain-compare-stack/raain-compare-stack.component.ts","./src/core/shared/raain-compare-stack/raain-compare-stack.component.html","./src/core/shared/raain-compare/raain-compare.component.ts","./src/core/shared/raain-compare/raain-compare.component.html","./src/core/shared/raain-configuration/raain-configuration.component.ts","./src/core/shared/raain-configuration/raain-configuration.component.html","./src/core/shared/raain-date-dynamic/raain-date-dynamic.component.ts","./src/core/shared/raain-date-dynamic/raain-date-dynamic.component.html","./src/core/shared/raain-date-focus/raain-date-focus.component.ts","./src/core/shared/raain-date-focus/raain-date-focus.component.html","./src/core/shared/raain-details/raain-details.component.ts","./src/core/shared/raain-details/raain-details.component.html","./src/core/shared/raain-globe/raain-globe.component.ts","./src/core/shared/raain-globe/raain-globe.component.html","./src/core/shared/raain-map/raain-map.component.ts","./src/core/shared/raain-map/raain-map.component.html","./src/core/shared/raain-speed/raain-speed.component.ts","./src/core/shared/raain-speed/raain-speed.component.html","./src/core/shared/radar.service.ts","./src/core/shared/shared.const.ts","./src/core/shared/shared.module.ts","./src/core/shared/shared.pipe.ts","./src/core/shared/storage.service.ts","./src/core/shared/tools/CompareManager.ts","./src/core/shared/tools/DateRangeTools.ts","./src/core/shared/tools/FrameSet.ts","./src/core/shared/tools/GaugeNodeFilter.ts","./src/core/shared/tools/RefreshManager.ts","./src/core/shared/tools/index.ts","./src/core/shared/xytype.ts","./src/environments/environment.lab.ts","./src/main.ts","./node_modules/@ionic/core/dist/esm/ lazy ^\\.\\/.*\\.entry\\.js$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$ namespace object","ignored|/opt/atlassian/pipelines/agent/build/node_modules/object-inspect|./util.inspect"],"sourcesContent":["export const bpInfo = {version: 'v1.6.36'};\n","import {NgModule} from '@angular/core';\nimport {NoPreloading, RouterModule, Routes} from '@angular/router';\nimport {PageNotFoundComponent} from './page-not-found/page-not-found.component';\nimport {AuthGuard} from './auth/auth.guard';\n\nconst routes: Routes = [\n    {\n        path: '',\n        redirectTo: 'home',\n        pathMatch: 'full',\n    },\n    {\n        path: 'home',\n        loadChildren: () => import('./home/home.module').then((x) => x.HomePageModule),\n        canActivate: [AuthGuard],\n    },\n    {\n        path: 'radars',\n        loadChildren: () => import('./radars/radars.module').then((x) => x.RadarsPageModule),\n        canActivate: [AuthGuard],\n    },\n    {\n        path: 'rains',\n        loadChildren: () => import('./rains/rains.module').then((x) => x.RainsPageModule),\n        canActivate: [AuthGuard],\n    },\n    {\n        path: 'events',\n        loadChildren: () => import('./events/events.module').then((x) => x.EventsPageModule),\n        canActivate: [AuthGuard],\n    },\n    {\n        path: 'profile',\n        loadChildren: () => import('./profile/profile.module').then((x) => x.ProfilePageModule),\n        canActivate: [AuthGuard],\n    },\n    {\n        path: 'login',\n        loadChildren: () => import('./login/login.module').then((x) => x.LoginPageModule),\n    },\n    {\n        path: 'logout',\n        loadChildren: () => import('./logout/logout.module').then((x) => x.LogoutPageModule),\n    },\n    {path: '**', component: PageNotFoundComponent},\n];\n\n@NgModule({\n    imports: [\n        RouterModule.forRoot(routes, {useHash: true, preloadingStrategy: NoPreloading}),\n        // {preloadingStrategy: PreloadAllModules, useHash: true})\n    ],\n    exports: [RouterModule],\n})\nexport class AppRoutingModule {}\n","import {Component} from '@angular/core';\nimport {Platform} from '@ionic/angular';\nimport {SplashScreen} from '@capacitor/splash-screen';\nimport {ProfileService} from './shared';\nimport {environment} from '../environments/environment';\nimport {EventNode} from 'raain-model';\n\n@Component({\n    selector: 'app-root',\n    templateUrl: 'app.component.html',\n    styleUrls: ['app.component.scss'],\n})\nexport class AppComponent {\n    public version = environment.version;\n    public appPages = [\n        {\n            title: 'Dashboard',\n            url: '/home',\n            icon: 'home',\n        },\n        {\n            title: 'Radars',\n            url: '/radars',\n            icon: 'wifi',\n        },\n        {\n            title: 'Rains',\n            url: '/rains',\n            icon: 'rainy',\n        },\n        // {\n        //   title: 'Events',\n        //   url: '/events',\n        //   icon: 'notifications-outline'\n        // },\n        {\n            title: 'Settings',\n            url: '/profile',\n            icon: 'settings',\n        },\n        {\n            title: 'Sign out',\n            url: '/logout',\n            icon: 'log-out',\n        },\n    ];\n\n    private notifications: EventNode[];\n\n    constructor(\n        private platform: Platform,\n        private profile: ProfileService\n    ) {\n        this.notifications = [];\n        this.initializeApp();\n    }\n\n    async initializeApp() {\n        this.profile.defaultUrlForAPI = environment.serverUrl;\n        await this.platform.ready();\n        await this.initFidj();\n        await SplashScreen.hide();\n    }\n\n    async initFidj() {\n        if (this.profile.isLoggedIn()) {\n            return;\n        }\n\n        await this.profile.logout(environment.fidjKey, environment.production);\n    }\n\n    async getNotifications() {\n        this.notifications = await this.profile.getAllNotifications();\n    }\n\n    getBadges(page: {icon: string; title: string; url: string}) {\n        if (page.title !== 'Events') {\n            return 0;\n        }\n\n        return this.notifications?.length;\n    }\n}\n","<ion-app>\n  <ion-split-pane contentId=\"main-content\" when=\"(min-width: 5000px)\">\n    <ion-menu contentId=\"main-content\" type=\"overlay\">\n      <ion-header>\n        <ion-toolbar>\n          <ion-title>Menu</ion-title>\n        </ion-toolbar>\n      </ion-header>\n      <ion-content id=\"my-content\">\n        <ion-list>\n          <ion-menu-toggle *ngFor=\"let p of appPages\" auto-hide=\"false\">\n            <ion-item [routerDirection]=\"'root'\" [routerLink]=\"[p.url]\">\n              <ion-icon [name]=\"p.icon\" slot=\"start\"></ion-icon>\n              <ion-label>\n                {{ p.title }}\n              </ion-label>\n              <ion-badge *ngIf=\"getBadges(p)\" slot=\"end\">{{ getBadges(p) }}</ion-badge>\n            </ion-item>\n          </ion-menu-toggle>\n        </ion-list>\n      </ion-content>\n    </ion-menu>\n    <ion-router-outlet id=\"main-content\"></ion-router-outlet>\n  </ion-split-pane>\n  <div class=\"app-version\">{{ version }}</div>\n</ion-app>\n","import {NgModule} from '@angular/core';\nimport {BrowserModule} from '@angular/platform-browser';\nimport {RouteReuseStrategy} from '@angular/router';\n\nimport {IonicModule, IonicRouteStrategy} from '@ionic/angular';\n\nimport {AppComponent} from './app.component';\nimport {AppRoutingModule} from './app-routing.module';\nimport {SharedModule} from './shared';\nimport {PageNotFoundComponent} from './page-not-found/page-not-found.component';\nimport {BrowserAnimationsModule} from '@angular/platform-browser/animations';\nimport {HttpClientModule} from '@angular/common/http';\nimport {FidjModule} from 'fidj-angular';\n\n@NgModule({\n    declarations: [AppComponent, PageNotFoundComponent],\n    imports: [\n        BrowserModule,\n        BrowserAnimationsModule,\n        HttpClientModule,\n        IonicModule.forRoot(),\n        AppRoutingModule,\n        FidjModule,\n        SharedModule,\n    ],\n    providers: [{provide: RouteReuseStrategy, useClass: IonicRouteStrategy}],\n    bootstrap: [AppComponent],\n})\nexport class AppModule {}\n","import {Injectable} from '@angular/core';\nimport {ActivatedRouteSnapshot, CanActivate, RouterStateSnapshot} from '@angular/router';\nimport {FidjService} from 'fidj-angular';\nimport {ProfileService} from '../shared';\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class AuthGuard implements CanActivate {\n    constructor(\n        private fidjService: FidjService,\n        private profile: ProfileService\n    ) {}\n\n    async canActivate(next: ActivatedRouteSnapshot, state: RouterStateSnapshot): Promise<boolean> {\n        if (this.profile.isDemoMode) {\n            return true;\n        }\n\n        await this.profile.refreshProfile();\n        const loggedIn = this.fidjService.isLoggedIn();\n        if (!loggedIn) {\n            return false;\n        }\n\n        return (await this.fidjService.getRoles()).indexOf('admin') >= 0;\n    }\n}\n","import {Component, OnInit} from '@angular/core';\n\n@Component({\n    selector: 'app-page-not-found',\n    templateUrl: './page-not-found.component.html',\n    styleUrls: ['./page-not-found.component.scss'],\n})\nexport class PageNotFoundComponent implements OnInit {\n    constructor() {}\n\n    ngOnInit() {}\n}\n","<ion-content>\n\n  <ion-card class=\"welcome-card\">\n    <ion-img src=\"/assets/login.png\"></ion-img>\n\n    <ion-card-header>\n      <ion-card-title>Wrong url :(</ion-card-title>\n      <ion-card-subtitle><a href=\"/\">...back</a></ion-card-subtitle>\n    </ion-card-header>\n\n  </ion-card>\n</ion-content>\n","import {Injectable} from '@angular/core';\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class Cache {\n    private readonly _cache: Record<string, unknown>;\n\n    constructor() {\n        this._cache = {};\n    }\n\n    public async getValue<T>(key: string, asyncGetter: () => Promise<T>): Promise<T> {\n        if (!Object.prototype.hasOwnProperty.call(this._cache, key)) {\n            console.log('cache not done: ', key);\n            this.putValue(key, await asyncGetter());\n        } else {\n            console.log('cache done: ', key);\n        }\n        return this._cache[key] as T;\n    }\n\n    public putValue<T>(key: string, value: T): void {\n        this._cache[key] = value;\n\n        const length = Object.getOwnPropertyNames(this._cache).length;\n        if (length > 30) {\n            console.warn('Pb on cache size exceed ? do a restart ?', length);\n        }\n    }\n}\n","import {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    EventEmitter,\n    Input,\n    OnInit,\n    Output,\n} from '@angular/core';\nimport {ProfileService} from '../profile.service';\nimport {\n    CumulativePeriod,\n    IndividualCumulative,\n    RaainApiRainsCumulativesDetailedResponse,\n    RaainApiRainsCumulativesListResponse,\n} from 'raain-model';\n\nexport interface CumulativeSelection {\n    periodBegin: Date;\n    periodEnd: Date;\n    windowInMinutes: number;\n    cumulativeId?: string;\n    cumulativeDate?: Date;\n}\n\n@Component({\n    selector: 'cumulative-selector',\n    templateUrl: './cumulative-selector.component.html',\n    styleUrls: ['./cumulative-selector.component.scss'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CumulativeSelectorComponent implements OnInit {\n    @Input() rainId: string;\n    @Input() currentPeriodBegin: Date;\n    @Input() currentPeriodEnd: Date;\n    @Input() provider: string;\n    @Input() timeStepInMinutes: number = 5;\n    @Input() isAdmin: boolean = false;\n\n    @Output() periodSelected = new EventEmitter<CumulativeSelection>();\n    @Output() cancelled = new EventEmitter<void>();\n\n    availablePeriods: CumulativePeriod[] = [];\n    baseCumulatives: CumulativePeriod = null;\n    loading = true;\n    creating = false;\n    creationProgress = '';\n    errorMessage = '';\n\n    coveragePercent = 0;\n    canCreateNew = false;\n    currentWindowMinutes = 0;\n\n    expandedPeriods: Map<string, IndividualCumulative[]> = new Map();\n    loadingExpanded: Set<string> = new Set();\n\n    private readonly POLL_TIMEOUT_MS = 900000; // 900 seconds\n    private readonly POLL_INTERVAL_MS = 3000;\n\n    constructor(\n        private profileService: ProfileService,\n        private cdr: ChangeDetectorRef\n    ) {}\n\n    async ngOnInit() {\n        this.currentWindowMinutes = Math.round(\n            (this.currentPeriodEnd.getTime() - this.currentPeriodBegin.getTime()) / 60000\n        );\n        await this.loadAvailablePeriods();\n    }\n\n    async loadAvailablePeriods() {\n        this.loading = true;\n        this.errorMessage = '';\n        this.cdr.markForCheck();\n\n        try {\n            // Fetch all cumulative periods (admin sees all, non-admin sees only customer-launched)\n            const response = (await this.profileService.getCumulativePeriods(this.rainId, {\n                provider: this.provider,\n                forced: this.isAdmin,\n                periodBegin: this.currentPeriodBegin.toISOString(),\n                periodEnd: this.currentPeriodEnd.toISOString(),\n            })) as RaainApiRainsCumulativesListResponse;\n\n            // Filter for existing custom cumulatives (window > 0)\n            this.availablePeriods = response.periods.filter((p) => p.windowInMinutes > 0);\n\n            // Get base cumulatives (window = 0) to check coverage\n            this.baseCumulatives = response.periods.find((p) => p.windowInMinutes === 0);\n\n            this.calculateCoverage();\n        } catch (e) {\n            this.errorMessage = 'Failed to load cumulative periods';\n            console.error('Error loading cumulative periods:', e);\n        }\n\n        this.loading = false;\n        this.cdr.markForCheck();\n    }\n\n    calculateCoverage() {\n        if (!this.baseCumulatives || !this.baseCumulatives.count) {\n            this.coveragePercent = 0;\n            this.canCreateNew = false;\n            return;\n        }\n\n        // Calculate expected number of base cumulatives (always 5-min granularity)\n        const baseTimeStep = 5;\n        const expectedCount = Math.ceil(this.currentWindowMinutes / baseTimeStep);\n\n        if (this.baseCumulatives.count >= expectedCount) {\n            this.coveragePercent = 100;\n        } else {\n            this.coveragePercent = Math.round((this.baseCumulatives.count / expectedCount) * 100);\n        }\n\n        // Allow creation as long as some base data exists\n        this.canCreateNew = this.coveragePercent > 0;\n    }\n\n    selectPeriod(period: CumulativePeriod) {\n        this.periodSelected.emit({\n            periodBegin: new Date(period.periodBegin),\n            periodEnd: new Date(period.periodEnd),\n            windowInMinutes: period.windowInMinutes,\n        });\n    }\n\n    async toggleExpand(period: CumulativePeriod) {\n        const key = `${period.windowInMinutes}`;\n        if (this.expandedPeriods.has(key)) {\n            this.expandedPeriods.delete(key);\n            this.cdr.markForCheck();\n            return;\n        }\n\n        this.loadingExpanded.add(key);\n        this.cdr.markForCheck();\n\n        try {\n            const response = (await this.profileService.getCumulativePeriods(this.rainId, {\n                provider: this.provider,\n                windowInMinutes: period.windowInMinutes,\n                forced: this.isAdmin,\n                detailed: true,\n            })) as RaainApiRainsCumulativesDetailedResponse;\n\n            this.expandedPeriods.set(key, response.cumulatives || []);\n        } catch (e) {\n            console.error('Error loading individual cumulatives:', e);\n            this.expandedPeriods.set(key, []);\n        }\n\n        this.loadingExpanded.delete(key);\n        this.cdr.markForCheck();\n    }\n\n    selectIndividualCumulative(item: IndividualCumulative) {\n        const endDate = new Date(item.date);\n        const beginDate = new Date(endDate.getTime() - item.windowInMinutes * 60000);\n\n        this.periodSelected.emit({\n            periodBegin: beginDate,\n            periodEnd: endDate,\n            windowInMinutes: item.windowInMinutes,\n            cumulativeId: item.id,\n            cumulativeDate: endDate,\n        });\n    }\n\n    isExpanded(period: CumulativePeriod): boolean {\n        return this.expandedPeriods.has(`${period.windowInMinutes}`);\n    }\n\n    isLoadingExpanded(period: CumulativePeriod): boolean {\n        return this.loadingExpanded.has(`${period.windowInMinutes}`);\n    }\n\n    getExpandedItems(period: CumulativePeriod): IndividualCumulative[] {\n        return this.expandedPeriods.get(`${period.windowInMinutes}`) || [];\n    }\n\n    getItemPeriodBegin(item: IndividualCumulative): Date {\n        const endDate = new Date(item.date);\n        return new Date(endDate.getTime() - item.windowInMinutes * 60000);\n    }\n\n    async createNewPeriod() {\n        if (!this.canCreateNew || this.creating) {\n            return;\n        }\n\n        this.creating = true;\n        this.creationProgress = 'Starting cumulative computation...';\n        this.errorMessage = '';\n        this.cdr.markForCheck();\n\n        try {\n            // Trigger cumulative creation\n            const result = await this.profileService.createCumulativePeriod(this.rainId, {\n                periodBegin: this.currentPeriodBegin,\n                periodEnd: this.currentPeriodEnd,\n                provider: this.provider,\n                timeStepInMinutes: this.timeStepInMinutes,\n            });\n\n            if (!result) {\n                throw new Error('Failed to trigger cumulative computation');\n            }\n\n            this.creationProgress = `Jobs queued. Polling for completion...`;\n            this.cdr.markForCheck();\n\n            // Poll for completion\n            const success = await this.pollForCompletion();\n\n            if (success) {\n                this.periodSelected.emit({\n                    periodBegin: this.currentPeriodBegin,\n                    periodEnd: this.currentPeriodEnd,\n                    windowInMinutes: this.currentWindowMinutes,\n                });\n            } else {\n                this.errorMessage = 'Timeout waiting for cumulative computation';\n            }\n        } catch (e) {\n            this.errorMessage = `Error: ${e.message || 'Unknown error'}`;\n            console.error('Error creating cumulative:', e);\n        }\n\n        this.creating = false;\n        this.cdr.markForCheck();\n    }\n\n    private async pollForCompletion(): Promise<boolean> {\n        const startTime = Date.now();\n\n        while (Date.now() - startTime < this.POLL_TIMEOUT_MS) {\n            try {\n                const progress = await this.profileService.getRainProgress(this.rainId);\n\n                if (progress === 0) {\n                    // Trigger background fetch from raain-ground via timeframeCumulative\n                    await this.profileService.getRainTimeframe(\n                        this.rainId,\n                        this.currentPeriodBegin,\n                        this.currentPeriodEnd,\n                        this.isAdmin,\n                        this.provider,\n                        this.timeStepInMinutes,\n                        this.currentWindowMinutes\n                    );\n\n                    // Check if cumulative now exists (admin sees all cumulatives)\n                    const response = (await this.profileService.getCumulativePeriods(this.rainId, {\n                        provider: this.provider,\n                        windowInMinutes: this.currentWindowMinutes,\n                        forced: this.isAdmin,\n                    })) as RaainApiRainsCumulativesListResponse;\n\n                    const found = response.periods.find(\n                        (p) => p.windowInMinutes === this.currentWindowMinutes\n                    );\n\n                    if (found) {\n                        return true;\n                    }\n                }\n\n                const elapsed = Math.round((Date.now() - startTime) / 1000);\n                this.creationProgress = `Computing... (${elapsed}s, queue: ${progress})`;\n                this.cdr.markForCheck();\n\n                await this.sleep(this.POLL_INTERVAL_MS);\n            } catch (e) {\n                console.warn('Poll error:', e);\n                await this.sleep(this.POLL_INTERVAL_MS);\n            }\n        }\n\n        return false;\n    }\n\n    private sleep(ms: number): Promise<void> {\n        return new Promise((resolve) => setTimeout(resolve, ms));\n    }\n\n    cancel() {\n        this.cancelled.emit();\n    }\n\n    formatPeriod(period: CumulativePeriod): string {\n        const begin = new Date(period.periodBegin);\n        const end = new Date(period.periodEnd);\n        return `${begin.toLocaleString()}  ${end.toLocaleString()}`;\n    }\n\n    formatWindow(minutes: number): string {\n        if (minutes < 60) {\n            return `${minutes} min`;\n        }\n        const hours = minutes / 60;\n        return hours === 1 ? '1 hour' : `${hours} hours`;\n    }\n}\n","<div class=\"cumulative-selector-overlay\">\n    <div class=\"cumulative-selector-modal\">\n        <div class=\"modal-header\">\n            <h2>Select Cumulative Period</h2>\n            <ion-button (click)=\"cancel()\" fill=\"clear\">\n                <ion-icon name=\"close\"></ion-icon>\n            </ion-button>\n        </div>\n\n        <div class=\"modal-content\">\n            <!-- Loading state -->\n            <div *ngIf=\"loading\" class=\"loading-state\">\n                <ion-spinner name=\"crescent\"></ion-spinner>\n                <p>Loading available periods...</p>\n            </div>\n\n            <!-- Error message -->\n            <div *ngIf=\"errorMessage\" class=\"error-message\">\n                <ion-icon name=\"warning-outline\"></ion-icon>\n                <span>{{ errorMessage }}</span>\n            </div>\n\n            <!-- Available periods list -->\n            <div *ngIf=\"!loading && availablePeriods.length > 0\" class=\"periods-section\">\n                <h3>Available Cumulative Periods</h3>\n                <ion-list>\n                    <ng-container *ngFor=\"let period of availablePeriods\">\n                        <!-- Period header (click to expand) -->\n                        <ion-item (click)=\"toggleExpand(period)\" [disabled]=\"creating\" button>\n                            <ion-icon [name]=\"isExpanded(period) ? 'chevron-down' : 'chevron-forward'\"\n                                      slot=\"start\"></ion-icon>\n                            <ion-label>\n                                <h2>{{ formatWindow(period.windowInMinutes) }}</h2>\n                                <p>{{ formatPeriod(period) }}</p>\n                                <p class=\"count-info\">{{ period.count }} cumulative(s) - click to expand</p>\n                            </ion-label>\n                        </ion-item>\n\n                        <!-- Expanded: individual cumulatives -->\n                        <div *ngIf=\"isExpanded(period)\" class=\"expanded-items\">\n                            <ion-spinner *ngIf=\"isLoadingExpanded(period)\" name=\"crescent\"></ion-spinner>\n                            <ion-list *ngIf=\"!isLoadingExpanded(period)\" class=\"nested-list\">\n                                <ion-item (click)=\"selectIndividualCumulative(item)\"\n                                          *ngFor=\"let item of getExpandedItems(period)\"\n                                          [disabled]=\"creating\"\n                                          button\n                                          class=\"nested-item\">\n                                    <ion-icon name=\"time-outline\" slot=\"start\"></ion-icon>\n                                    <ion-label>\n                                        <h3>{{ getItemPeriodBegin(item) | date:'HH:mm' }}\n                                            - {{ item.date | date:'HH:mm' }}</h3>\n                                    </ion-label>\n                                    <ion-icon name=\"chevron-forward\" slot=\"end\"></ion-icon>\n                                </ion-item>\n                                <ion-item *ngIf=\"getExpandedItems(period).length === 0\" class=\"nested-item\">\n                                    <ion-label>\n                                        <p>No individual cumulatives found</p>\n                                    </ion-label>\n                                </ion-item>\n                            </ion-list>\n                        </div>\n                    </ng-container>\n                </ion-list>\n            </div>\n\n            <!-- No periods available -->\n            <div *ngIf=\"!loading && availablePeriods.length === 0\" class=\"no-periods\">\n                <ion-icon name=\"information-circle-outline\"></ion-icon>\n                <p>No cumulative periods available yet.</p>\n            </div>\n\n            <!-- Create new section (admin only) -->\n            <div *ngIf=\"!loading && isAdmin\" class=\"create-section\">\n                <h3>Create New Cumulative</h3>\n                <div class=\"create-info\">\n                    <p>\n                        <strong>Period:</strong>\n                        {{ currentPeriodBegin?.toLocaleString() }}  {{ currentPeriodEnd?.toLocaleString() }}\n                    </p>\n                    <p>\n                        <strong>Window:</strong> {{ formatWindow(currentWindowMinutes) }}\n                    </p>\n                    <p *ngIf=\"baseCumulatives\" [class.coverage-error]=\"coveragePercent === 0\"\n                       [class.coverage-ok]=\"coveragePercent >= 100\"\n                       [class.coverage-warn]=\"coveragePercent > 0 && coveragePercent < 100\"\n                       class=\"coverage-info\">\n                        <ion-icon [name]=\"coveragePercent >= 100 ? 'checkmark-circle' : 'alert-circle'\"></ion-icon>\n                        Base data coverage: {{ coveragePercent }}%\n                    </p>\n                    <p *ngIf=\"!baseCumulatives\" class=\"coverage-error\">\n                        <ion-icon name=\"alert-circle\"></ion-icon>\n                        No base cumulatives available\n                    </p>\n                </div>\n\n                <!-- Creation progress -->\n                <div *ngIf=\"creating\" class=\"creation-progress\">\n                    <ion-spinner name=\"crescent\"></ion-spinner>\n                    <span>{{ creationProgress }}</span>\n                </div>\n\n                <ion-button (click)=\"createNewPeriod()\" [disabled]=\"!canCreateNew || creating\"\n                            expand=\"block\"\n                            id=\"createNewCumulative\">\n                    <ion-icon name=\"add-circle-outline\" slot=\"start\"></ion-icon>\n                    Create {{ formatWindow(currentWindowMinutes) }} Cumulative\n                </ion-button>\n\n                <p *ngIf=\"!canCreateNew && !creating\" class=\"create-hint\">\n                    Create is disabled because no base 5-min cumulatives exist for the selected period.\n                </p>\n            </div>\n        </div>\n\n        <div class=\"modal-footer\">\n            <ion-button (click)=\"cancel()\" [disabled]=\"creating\" fill=\"outline\">\n                Cancel\n            </ion-button>\n        </div>\n    </div>\n</div>\n","import {FidjService} from 'fidj-angular';\nimport {EventNode, GaugeNode, Link, PeopleNode, RadarNode, RainNode} from 'raain-model';\nimport {Storage} from './storage.service';\n\nexport class FidjStorageNode {\n    public radars: RadarNode[] = [];\n    public rains: RainNode[] = [];\n    public gauges: GaugeNode[] = [];\n    public team: PeopleNode;\n    public events: EventNode[] = [];\n\n    public infos: any = {};\n\n    static getEmptyNode() {\n        return new FidjStorageNode();\n    }\n\n    static getDemoNode() {\n        const demoNode = new FidjStorageNode();\n        const link = new Link('rain', 'https://demo/api/rains/2');\n        /*\n    demoNode.radars = [\n      new RadarNode({\n        id: '5efd04569cb1f4161bd69dc7',\n        name: 'demo radar A',\n        links: [link],\n        latitude: 48.774569,\n        longitude: 2.008407\n      }),\n      new RadarNode({\n        id: 'dr2',\n        name: 'demo radar B',\n        links: [link],\n        latitude: 0.11,\n        longitude: -0.753\n      }),\n      new RadarNode({\n        id: 'dr3',\n        name: 'demo radar C',\n        latitude: 0.13,\n        longitude: -0.753,\n        links: []\n      }),\n      new RadarNode({\n        id: 'dr4',\n        name: 'demo radar D',\n        latitude: 0.14,\n        longitude: -0.74,\n        links: []\n      })];\n    demoNode.rains = [\n      new RainNode({\n        id: '5efd04569cb1f4161bd69dc8',\n        name: 'Demo rain zone A',\n        links: [new Link('radar', 'https://demo/api/radars/5efcfe619cb1f4161bd69dc3')],\n        status: 0,\n        quality: 75,\n        latitude: 48.774569,\n        longitude: 2.008407\n      }),\n      new RainNode({\n        id: 'dz2',\n        name: 'Demo rain zone B',\n        radars: [demoNode.radars[0], demoNode.radars[1]],\n        status: 1,\n        quality: 50,\n        latitude: 48.774569,\n        longitude: 2.008407\n      }),\n      new RainNode({\n        id: 'dz3',\n        name: 'Demo rain zone C',\n        radars: [demoNode.radars[0], demoNode.radars[1]],\n        status: 2,\n        quality: 75,\n        latitude: 48.774569,\n        longitude: 2.008407\n      }),\n      new RainNode({\n        id: 'dz4',\n        name: 'Demo rain zone D',\n        radars: [demoNode.radars[0], demoNode.radars[1]],\n        status: 3,\n        quality: 95,\n        latitude: 48.774569,\n        longitude: 2.008407\n      })];\n\n    demoNode.gauges = [\n      new GaugeNode({\n        id: 'g1',\n        name: 'Gauge A',\n        latitude: 48.7748,\n        longitude: 2.28407,\n      }),\n      new GaugeNode({\n        id: 'g2',\n        name: 'Gauge B',\n        latitude: 48.874569,\n        longitude: 2.108407,\n      })];\n    demoNode.events = [{\n      id: 'e2',\n      title: 'Need support ?',\n      status: 0,\n      red: false,\n      description: 'This area is dedicated to support you and your team. Support is made on Radar or Rain quality, ' +\n        'or any feedback we can have about your production system. Our goal : improving your data.',\n      created: new Date(),\n      modified: new Date()\n    }];\n    demoNode.team = {\n      id: 'p1',\n      email: 'demo@demo.com',\n      name: 'demo guy',\n      description: 'the demo guy'\n    };\n\n     */\n        return demoNode;\n    }\n}\n\nclass FidjStorageResult {\n    data: FidjStorageNode;\n}\n\nexport class FidjStorage {\n    private isDemoMode: boolean;\n    private node: FidjStorageNode = FidjStorageNode.getEmptyNode();\n    private fidjMetaResult: FidjStorageResult = {data: new FidjStorageNode()};\n\n    constructor(private storage: Storage) {}\n\n    public async storeData(fidjService: FidjService, data) {\n        this.node = JSON.parse(JSON.stringify(data));\n        this.fidjMetaResult.data = this.node;\n\n        if (this.isDemoMode) {\n            this.storage.set('fidjMetaResult', JSON.stringify(this.fidjMetaResult));\n            return;\n        }\n\n        await fidjService.put(this.fidjMetaResult);\n    }\n\n    public async getRefreshedNodeCopy(fidjService: FidjService): Promise<FidjStorageNode> {\n        if (this.isDemoMode) {\n            const fidjMetaResult = this.storage.get('fidjMetaResult');\n            if (fidjMetaResult) {\n                this.fidjMetaResult = JSON.parse(fidjMetaResult);\n                this.node = this.fidjMetaResult.data;\n            }\n            return JSON.parse(JSON.stringify(this.node));\n        }\n\n        const firstDemoData = async () => {\n            this.node = FidjStorageNode.getDemoNode();\n            await this.storeData(fidjService, this.node);\n        };\n\n        await fidjService.sync(firstDemoData);\n        const fidjFindAllResults: any = await fidjService.findAll();\n\n        if (fidjFindAllResults && fidjFindAllResults.length > 0) {\n            if (fidjFindAllResults[0].data) {\n                this.fidjMetaResult = fidjFindAllResults[0];\n                this.node = this.fidjMetaResult.data;\n            }\n        }\n\n        return JSON.parse(JSON.stringify(this.node));\n    }\n\n    setDemoMode(isDemo: boolean) {\n        this.isDemoMode = isDemo;\n    }\n}\n","export * from './raain-map/raain-map.component';\nexport * from './raain-compare/raain-compare.component';\nexport * from './raain-configuration/raain-configuration.component';\nexport * from './raain-date-focus/raain-date-focus.component';\nexport * from './raain-date-dynamic/raain-date-dynamic.component';\nexport * from './raain-speed/raain-speed.component';\nexport * from './raain-compare-stack/raain-compare-stack.component';\nexport * from './raain-globe/raain-globe.component';\nexport * from './raain-details/raain-details.component';\nexport * from './cumulative-selector/cumulative-selector.component';\n\nexport * from './tools';\n\nexport * from './cache.service';\nexport * from './fidj-storage.model';\nexport * from './profile.service';\nexport * from './radar.service';\nexport * from './shared.const';\nexport * from './shared.pipe';\nexport * from './shared.module';\nexport * from './storage.service';\nexport * from './xytype';\nexport * from './profile-icon.directive';\nexport * from './pipes.module';\n","import {NgModule} from '@angular/core';\nimport {\n    AreInProgressPipe,\n    AreReady,\n    AreStopped,\n    HasGoodQuality,\n    HasNotGoodQuality,\n    HaveNotBeenRed,\n    IsNotReady,\n    IsReady,\n    ProgressBuffer,\n    ProgressValue,\n    WaitForValidation,\n} from './shared.pipe';\n\n@NgModule({\n    declarations: [\n        AreStopped,\n        AreInProgressPipe,\n        AreReady,\n        IsReady,\n        IsNotReady,\n        WaitForValidation,\n        HasGoodQuality,\n        HasNotGoodQuality,\n        ProgressValue,\n        ProgressBuffer,\n        HaveNotBeenRed,\n    ],\n    exports: [\n        AreStopped,\n        AreInProgressPipe,\n        AreReady,\n        IsReady,\n        IsNotReady,\n        WaitForValidation,\n        HasGoodQuality,\n        HasNotGoodQuality,\n        ProgressValue,\n        ProgressBuffer,\n        HaveNotBeenRed,\n    ],\n})\nexport class PipesModule {}\n","import {Directive, ElementRef, OnDestroy, OnInit} from '@angular/core';\nimport {ProfileService} from './profile.service';\nimport {Router} from '@angular/router';\n\n// Helper function to pause execution for a specified time in milliseconds\nfunction sleep(ms: number): Promise<void> {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\n@Directive({\n    selector: 'ion-toolbar',\n})\nexport class ProfileIconDirective implements OnInit, OnDestroy {\n    private refreshTimer: any;\n    private profileButton: HTMLElement;\n    private isConnected: boolean = true;\n\n    constructor(\n        private el: ElementRef,\n        private profileService: ProfileService,\n        private router: Router\n    ) {}\n\n    ngOnInit() {\n        // Check if the user is logged in and if the toolbar is not inside a modal\n        if (this.profileService.isLoggedIn() && !this.isInsideModal()) {\n            // Get the email from the profile service\n            const email = this.profileService.getEmail();\n\n            // Create the profile button element\n            const profileButtons = document.createElement('ion-buttons');\n            profileButtons.setAttribute('slot', 'primary');\n\n            // Create the button\n            const button = document.createElement('ion-button');\n\n            // Store references for later use\n            this.profileButton = button;\n\n            // Create the icon\n            const icon = document.createElement('ion-icon');\n            icon.setAttribute('name', 'person-circle-outline');\n            icon.setAttribute('slot', 'start');\n\n            // Create the label\n            const label = document.createElement('ion-label');\n            label.textContent = email;\n\n            // Assemble the button\n            button.appendChild(icon);\n            button.appendChild(label);\n\n            // Add click event listener to the button\n            button.addEventListener('click', () => {\n                this.navigateToProfile();\n            });\n\n            // Assemble the buttons container\n            profileButtons.appendChild(button);\n\n            // Append the buttons to the toolbar\n            this.el.nativeElement.appendChild(profileButtons);\n\n            // Start the background refresh timer (check every minute)\n            this.startBackgroundRefresh();\n        }\n    }\n\n    ngOnDestroy() {\n        // Clear the timer when the directive is destroyed\n        if (this.refreshTimer) {\n            clearInterval(this.refreshTimer);\n            this.refreshTimer = null;\n        }\n    }\n\n    navigateToProfile() {\n        this.router.navigateByUrl('/profile');\n    }\n\n    private startBackgroundRefresh() {\n        this.refreshTimer = setInterval(() => {\n            this.checkAndRefreshConnection();\n        }, 20000);\n    }\n\n    private checkAndRefreshConnection() {\n        this.performConnectionRefresh();\n    }\n\n    private showSkeletonText() {\n        if (this.profileButton) {\n            this.profileButton.style.opacity = '0.7';\n            this.profileButton.style.transition = 'opacity 0.3s ease';\n        }\n    }\n\n    private hideSkeletonText() {\n        if (this.profileButton) {\n            this.profileButton.style.opacity = '1';\n        }\n    }\n\n    private async performConnectionRefresh() {\n        // Show skeleton text and hide button during loading\n        this.showSkeletonText();\n\n        // Connection successful\n        this.isConnected = await this.profileService.isConnected();\n\n        if (this.isConnected) {\n            // Call the refresh function\n            const needsConnectionRefresh = this.profileService.needsConnectionRefresh();\n            const isLoggedIn = this.profileService.isLoggedIn();\n            if (needsConnectionRefresh || !isLoggedIn) {\n                await this.profileService.connectionRefresh();\n            }\n            await sleep(1000);\n        }\n        this.updateButtonState();\n\n        // Hide skeleton text and show button when loading is complete\n        this.hideSkeletonText();\n    }\n\n    private updateButtonState() {\n        if (this.profileButton) {\n            if (this.isConnected) {\n                // Enable button\n                this.profileButton.removeAttribute('disabled');\n                this.profileButton.removeAttribute('title');\n            } else {\n                // Disable button and add tooltip\n                this.profileButton.setAttribute('disabled', 'true');\n                this.profileButton.setAttribute('title', 'Profile unavailable - No connection');\n            }\n        }\n    }\n\n    // Helper method to check if the toolbar is inside a modal\n    private isInsideModal(): boolean {\n        let parent = this.el.nativeElement.parentElement;\n\n        // Traverse up the DOM tree to find if any parent is an ion-modal\n        while (parent) {\n            if (parent.tagName && parent.tagName.toLowerCase() === 'ion-modal') {\n                return true;\n            }\n            parent = parent.parentElement;\n        }\n\n        return false;\n    }\n}\n","import {Injectable} from '@angular/core';\nimport {HttpClient} from '@angular/common/http';\nimport {BehaviorSubject} from 'rxjs';\nimport {\n    BuildQueryString,\n    EventNode,\n    GaugeMeasure,\n    GaugeNode,\n    LatLng,\n    RaainApiGaugesFindAllMineRequest,\n    RaainApiGaugesFindAllMineResponse,\n    RaainApiGaugesFindMeasuresRequest,\n    RaainApiGaugesFindMeasuresResponse,\n    RaainApiGaugesFindOneResponse,\n    RaainApiNotificationsAddRequestBody,\n    RaainApiNotificationsAddResponse,\n    RaainApiNotificationsFindAllMineRequest,\n    RaainApiNotificationsFindAllMineResponse,\n    RaainApiRadarsFindAllMineRequest,\n    RaainApiRadarsFindAllMineResponse,\n    RaainApiRadarsFindOneResponse,\n    RaainApiRadarsUpdateRequestBody,\n    RaainApiRainsCumulativeCartesianMapRequest,\n    RaainApiRainsCumulativeCartesianMapResponse,\n    RaainApiRainsCumulativeComparesResponse,\n    RaainApiRainsCumulativeCumulativeResponse,\n    RaainApiRainsCumulativeCumulativesComparesRequest,\n    RaainApiRainsCumulativeCumulativesComparesResponse,\n    RaainApiRainsCumulativesCreateRequest,\n    RaainApiRainsCumulativesCreateResponse,\n    RaainApiRainsCumulativesDetailedResponse,\n    RaainApiRainsCumulativesListRequest,\n    RaainApiRainsCumulativesListResponse,\n    RaainApiRainsFindAllMineRequest,\n    RaainApiRainsFindAllMineResponse,\n    RaainApiRainsFindOneResponse,\n    RaainApiRainsFindOneTimeframeCumulativeRequest,\n    RaainApiRainsFindOneTimeframeCumulativeResponse,\n    RaainApiRainsGetCountsRequest,\n    RaainApiRainsGetCountsResponse,\n    RaainApiRainsIndicatorsRequest,\n    RaainApiRainsIndicatorsResponse,\n    RaainApiRainsProgressResponse,\n    RaainApiRainsProvidersResponse,\n    RaainApiTeamsFindAllMineRequest,\n    RaainApiTeamsFindOneResponse,\n    RadarNode,\n    RainComputationMap,\n    RainComputationQuality,\n    RainNode,\n    SpeedMatrixContainer,\n    TeamNode,\n} from 'raain-model';\n\nimport {Storage} from './storage.service';\n\nimport {FidjStorage, FidjStorageNode} from './fidj-storage.model';\nimport {ErrorInterface, FidjService, LoggerLevelEnum} from 'fidj-angular';\nimport {XYType} from './xytype';\nimport {GaugeNodeFilter} from './tools';\nimport {Router} from '@angular/router';\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class ProfileService {\n    public readyForSync: BehaviorSubject<boolean>;\n    public asTeamId: string;\n\n    protected email: string;\n    protected isDemo: boolean;\n    protected roles: Array<string>;\n    protected nodeData: FidjStorageNode;\n    protected fidjStorage: FidjStorage;\n    protected haveTryToReconnect: boolean;\n\n    constructor(\n        protected storage: Storage,\n        protected fidjService: FidjService,\n        protected httpClient: HttpClient,\n        private router: Router\n    ) {\n        this.email = this.storage.get('raain-email');\n        this.asTeamId = this.storage.get('raain-asTeamId');\n        this.readyForSync = new BehaviorSubject<boolean>(false);\n        this.roles = [];\n        this.fidjStorage = new FidjStorage(storage);\n        this.isDemoMode = false;\n    }\n\n    get isDemoMode() {\n        return this.isDemo;\n    }\n\n    set isDemoMode(mode) {\n        this.isDemo = mode ? mode : true;\n        this.fidjStorage.setDemoMode(this.isDemo);\n    }\n\n    get defaultUrlForAPI() {\n        return this.storage.get('raain-urlForAPI');\n    }\n\n    set defaultUrlForAPI(url: string) {\n        this.storage.set('raain-urlForAPI', url);\n    }\n\n    async refreshProfile(): Promise<FidjStorageNode> {\n        try {\n            this.nodeData = await this.fidjStorage.getRefreshedNodeCopy(this.fidjService);\n            this.setRoles(await this.fidjService.getRoles());\n            return this.nodeData;\n        } catch (e) {\n            await this.checkError(e);\n        }\n    }\n\n    async isConnected() {\n        return this.fidjService.isConnected();\n    }\n\n    getEmail() {\n        return this.email ?? this.storage.get('raain-email', this.email);\n    }\n\n    setEmail(email: string) {\n        this.email = email;\n        this.storage.set('raain-email', this.email);\n    }\n\n    async logout(fidjKey: string, fidjProd: boolean) {\n        // this.storage.remove('raain-email');\n\n        if (!fidjKey) {\n            try {\n                await this.fidjService.loginInDemoMode();\n                this.readyForSync.next(true);\n            } catch (err) {\n                console.error('initFidj catch pb: ', err);\n            }\n\n            return;\n        }\n\n        await this.fidjService.logout(true);\n\n        try {\n            await this.fidjService.init(fidjKey, {\n                logLevel: LoggerLevelEnum.WARN, // fidjProd ? LoggerLevelEnum.WARN : LoggerLevelEnum.INFO,\n                crypto: false,\n                prod: fidjProd,\n                useDB: false,\n            });\n            this.readyForSync.next(true);\n        } catch (err) {\n            console.error('initFidj catch pb: ', err);\n        }\n    }\n\n    async checkError(error: ErrorInterface) {\n        if (error.code === 401) {\n            console.warn('Pb on auth');\n            if (this.router.url.indexOf('login') < 0) {\n                try {\n                    await this.fidjService.logout();\n                } catch (ignored) {\n                    // Ignore logout errors as we're redirecting to logout page anyway\n                }\n                return this.gotoLout();\n            }\n        }\n    }\n\n    async gotoLout() {\n        try {\n            if (this.router.url.indexOf('login') > -1) {\n                return;\n            }\n            await this.router.navigateByUrl('/logout', {\n                skipLocationChange: true,\n                replaceUrl: true,\n            });\n        } catch (e) {\n            console.error('gotoLout error: ', e);\n        }\n    }\n\n    async gotoLogin() {\n        if (this.router.url.indexOf('login') > -1) {\n            return;\n        }\n        // await this.router.navigateByUrl('/', {skipLocationChange: true});\n        await this.router.navigate(['/login']);\n    }\n\n    isLoggedIn() {\n        const loggedIn = this.fidjService.isLoggedIn();\n        console.log('isLoggedIn: ', loggedIn);\n        return loggedIn;\n    }\n\n    needsConnectionRefresh() {\n        return this.fidjService.needsRefresh();\n    }\n\n    async connectionRefresh() {\n        await this.fidjService.refresh();\n    }\n\n    async storeAll() {\n        return this.fidjStorage.storeData(this.fidjService, this.nodeData);\n    }\n\n    isAdmin(): boolean {\n        return this.roles.indexOf('admin') > -1;\n    }\n\n    // === Notifications ===\n\n    async createNotification(rainId: string, message: string) {\n        const data: RaainApiNotificationsAddRequestBody = {\n            rain: rainId,\n            message,\n        };\n\n        try {\n            const resp = await this.fidjService.sendOnEndpoint<\n                RaainApiNotificationsAddRequestBody,\n                RaainApiNotificationsAddResponse\n            >({\n                key: 'notifications',\n                verb: 'POST',\n                defaultKeyUrl: this.defaultUrlForAPI + '/notifications',\n                data,\n            });\n            return new EventNode(resp.data);\n        } catch (e) {\n            await this.checkError(e);\n        }\n\n        return null;\n    }\n\n    async getNotifications(rainId: string) {\n        try {\n            type NotificationsFindParams = Partial<RaainApiNotificationsFindAllMineRequest>;\n            const params: NotificationsFindParams = {rain: rainId};\n            const queryString = BuildQueryString<NotificationsFindParams>(params);\n            const resp = await this.fidjService.sendOnEndpoint<\n                void,\n                RaainApiNotificationsFindAllMineResponse\n            >({\n                key: 'notifications',\n                verb: 'GET',\n                relativePath: queryString ? '?' + queryString : '',\n                defaultKeyUrl: this.defaultUrlForAPI + '/notifications',\n            });\n\n            return resp.data.notifications.map((n) => new EventNode(n));\n        } catch (e) {\n            await this.checkError(e);\n        }\n\n        return null;\n    }\n\n    async getAllNotifications(): Promise<EventNode[]> {\n        try {\n            const resp = await this.fidjService.sendOnEndpoint<\n                void,\n                RaainApiNotificationsFindAllMineResponse\n            >({\n                key: 'notifications',\n                verb: 'GET',\n                defaultKeyUrl: this.defaultUrlForAPI + '/notifications',\n            });\n\n            return resp.data.notifications.map((n) => new EventNode(n));\n        } catch (e) {\n            await this.checkError(e);\n        }\n\n        return [];\n    }\n\n    // === Teams ===\n\n    async getTeams(): Promise<Array<TeamNode>> {\n        const teams = [];\n        const params = {};\n        const queryString = BuildQueryString<RaainApiTeamsFindAllMineRequest>(params);\n        try {\n            const resp = await this.fidjService.sendOnEndpoint<\n                void,\n                {teams: ReturnType<TeamNode['toJSON']>[]}\n            >({\n                key: 'teams',\n                verb: 'GET',\n                relativePath: queryString ? '?' + queryString : '',\n                defaultKeyUrl: this.defaultUrlForAPI + '/teams',\n            });\n            for (const team of resp.data.teams) {\n                teams.push(new TeamNode(team));\n            }\n        } catch (e) {\n            await this.checkError(e);\n        }\n        return teams;\n    }\n\n    async getTeam(teamId: string): Promise<TeamNode> {\n        try {\n            const resp = await this.fidjService.sendOnEndpoint<void, RaainApiTeamsFindOneResponse>({\n                key: 'teams',\n                verb: 'GET',\n                relativePath: teamId,\n                defaultKeyUrl: this.defaultUrlForAPI + '/teams',\n            });\n            return new TeamNode(resp.data);\n        } catch (e) {\n            await this.checkError(e);\n        }\n\n        return null;\n    }\n\n    // === Radars ===\n\n    async getRadars(name?: string): Promise<Array<RadarNode>> {\n        const radars = [];\n        const params: RaainApiRadarsFindAllMineRequest = {};\n        if (name) {\n            params.name = name;\n        }\n        const queryString = BuildQueryString<RaainApiRadarsFindAllMineRequest>(params);\n        try {\n            const resp = await this.fidjService.sendOnEndpoint<\n                void,\n                RaainApiRadarsFindAllMineResponse\n            >({\n                key: 'radars',\n                verb: 'GET',\n                relativePath: queryString ? '?' + queryString : '',\n                defaultKeyUrl: this.defaultUrlForAPI + '/radars',\n            });\n            for (const r of resp.data.radars) {\n                const radar = new RadarNode(r);\n                radars.push(radar);\n            }\n        } catch (e) {\n            await this.checkError(e);\n        }\n        return radars;\n    }\n\n    async getRadar(id: string): Promise<RadarNode> {\n        try {\n            const resp = await this.fidjService.sendOnEndpoint<void, RaainApiRadarsFindOneResponse>(\n                {\n                    key: 'radars',\n                    verb: 'GET',\n                    relativePath: id,\n                    defaultKeyUrl: this.defaultUrlForAPI + '/radars',\n                }\n            );\n            return new RadarNode(resp.data);\n        } catch (e) {\n            await this.checkError(e);\n        }\n\n        return null;\n    }\n\n    async putRadar(radarNode: RadarNode): Promise<RadarNode> {\n        const data: RaainApiRadarsUpdateRequestBody = {\n            name: radarNode.name,\n        };\n\n        try {\n            const resp = await this.fidjService.sendOnEndpoint<\n                RaainApiRadarsUpdateRequestBody,\n                ReturnType<RadarNode['toJSON']>\n            >({\n                key: 'radars',\n                relativePath: radarNode.id,\n                verb: 'PUT',\n                data,\n                defaultKeyUrl: this.defaultUrlForAPI + '/radars/',\n            });\n\n            return new RadarNode(resp.data);\n        } catch (e) {\n            await this.checkError(e);\n        }\n    }\n\n    async getLonelyRadars(rains: RainNode[]): Promise<RadarNode[]> {\n        try {\n            const resp = await this.fidjService.sendOnEndpoint<\n                void,\n                RaainApiRadarsFindAllMineResponse\n            >({\n                key: 'radars',\n                verb: 'GET',\n                defaultKeyUrl: this.defaultUrlForAPI + '/radars',\n            });\n            const lonelyRadars: RadarNode[] = [];\n            const radars = resp.data.radars;\n            radars.forEach((radar) => {\n                let found = false;\n                rains.forEach((rain) => {\n                    const rdId = rain.getLink(RadarNode.TYPE).getId();\n                    if (rdId === radar.id) {\n                        found = true;\n                    }\n                });\n                if (!found) {\n                    lonelyRadars.push(new RadarNode(radar));\n                }\n            });\n            return lonelyRadars;\n        } catch (e) {\n            await this.checkError(e);\n        }\n        return [];\n    }\n\n    async getRainTimeframe(\n        rainId: string,\n        begin: Date,\n        end: Date,\n        forced = false,\n        provider = 'Raain',\n        timeStepInMinutes = 10,\n        windowInMinutes = 0\n    ): Promise<RainNode> {\n        try {\n            const params: RaainApiRainsFindOneTimeframeCumulativeRequest = {\n                format: 'timeframeCumulative',\n                provider,\n                timeStepInMinutes: String(timeStepInMinutes),\n                begin: begin?.toISOString(),\n                end: end?.toISOString(),\n            };\n            if (forced) {\n                params.forced = 'true';\n            }\n            params.windowInMinutes = String(windowInMinutes);\n            const queryString =\n                BuildQueryString<RaainApiRainsFindOneTimeframeCumulativeRequest>(params);\n            const resp = await this.fidjService.sendOnEndpoint<\n                void,\n                RaainApiRainsFindOneTimeframeCumulativeResponse\n            >({\n                key: 'rains',\n                verb: 'GET',\n                relativePath: rainId + (queryString ? '?' + queryString : ''),\n                defaultKeyUrl: this.defaultUrlForAPI + '/rains',\n            });\n            const rainNode = new RainNode(resp.data.timeframeCumulative);\n            rainNode.name += '.radar.timeframeCumulative';\n            return rainNode;\n        } catch (e) {\n            await this.checkError(e);\n        }\n        return null;\n    }\n\n    // === Rains ===\n\n    async getRains(name?: string): Promise<Array<RainNode>> {\n        const rains = [];\n        const params: RaainApiRainsFindAllMineRequest = {};\n        if (name) {\n            params.name = name;\n        }\n        const queryString = BuildQueryString<RaainApiRainsFindAllMineRequest>(params);\n        try {\n            const resp = await this.fidjService.sendOnEndpoint<\n                void,\n                RaainApiRainsFindAllMineResponse\n            >({\n                key: 'rains',\n                verb: 'GET',\n                relativePath: queryString ? '?' + queryString : '',\n                defaultKeyUrl: this.defaultUrlForAPI + '/rains',\n            });\n            for (const rain of resp.data.rains) {\n                rains.push(new RainNode(rain));\n            }\n        } catch (e) {\n            await this.checkError(e);\n        }\n        return rains;\n    }\n\n    async getRain(id: string): Promise<RainNode> {\n        try {\n            const resp = await this.fidjService.sendOnEndpoint<void, RaainApiRainsFindOneResponse>({\n                key: 'rains',\n                relativePath: id,\n                verb: 'GET',\n                defaultKeyUrl: this.defaultUrlForAPI + '/rains/',\n            });\n            return new RainNode(resp.data);\n        } catch (e) {\n            await this.checkError(e);\n        }\n        return null;\n    }\n\n    // === Count\n\n    async getCounts(\n        rainId: string,\n        options: {\n            range: 'hour' | 'day' | 'month' | 'year';\n            periodBegin: Date;\n        }\n    ): Promise<{\n        percentImages: XYType[];\n        percentRainy: XYType[];\n        percentQ: XYType[];\n        percentComputations: XYType[];\n        queueRunning: number;\n    }> {\n        try {\n            const params: RaainApiRainsGetCountsRequest = {\n                range: options.range,\n                begin: options.periodBegin.toISOString(),\n            };\n            const queryString = BuildQueryString<RaainApiRainsGetCountsRequest>(params);\n\n            const resp = await this.fidjService.sendOnEndpoint<\n                void,\n                RaainApiRainsGetCountsResponse\n            >({\n                key: 'rains',\n                relativePath: rainId + '/counts' + (queryString ? '?' + queryString : ''),\n                verb: 'GET',\n                defaultKeyUrl: this.defaultUrlForAPI + '/rains/',\n            });\n\n            const counts = resp.data.counts.result;\n            const percentImages: XYType[] = [],\n                percentRainy: XYType[] = [],\n                percentQ: XYType[] = [],\n                percentComputations: XYType[] = [];\n\n            counts.forEach((c) => {\n                const label = this.setDateComponents(options.periodBegin, c);\n                percentImages.push(new XYType(c.percentImages ?? 0, NaN, NaN, label));\n                percentRainy.push(new XYType(c.percentRainy ?? 0, NaN, NaN, label));\n                percentQ.push(new XYType(c.percentQ ?? 0, NaN, NaN, label));\n                percentComputations.push(new XYType(c.percentComputations ?? 0, NaN, NaN, label));\n            });\n\n            return {\n                percentImages,\n                percentRainy,\n                percentQ,\n                percentComputations,\n                queueRunning: resp.data.queueRunning,\n            };\n        } catch (e) {\n            await this.checkError(e);\n        }\n        return null;\n    }\n\n    async getCountsHour(\n        rainId: string,\n        options: {periodBegin: Date}\n    ): Promise<{\n        percentImages: XYType[];\n        percentComputations: XYType[];\n        rainyCount: XYType[];\n        rainySum: XYType[];\n        queueRunning: number;\n    }> {\n        try {\n            const params: RaainApiRainsGetCountsRequest = {\n                range: 'hour',\n                begin: options.periodBegin.toISOString(),\n            };\n            const queryString = BuildQueryString<RaainApiRainsGetCountsRequest>(params);\n\n            const resp = await this.fidjService.sendOnEndpoint<\n                void,\n                RaainApiRainsGetCountsResponse\n            >({\n                key: 'rains',\n                relativePath: rainId + '/counts' + (queryString ? '?' + queryString : ''),\n                verb: 'GET',\n                defaultKeyUrl: this.defaultUrlForAPI + '/rains/',\n            });\n\n            const counts = resp.data.counts.result;\n            const percentImages: XYType[] = [],\n                percentComputations: XYType[] = [],\n                rainySum: XYType[] = [],\n                rainyCount: XYType[] = [];\n\n            counts.forEach((c) => {\n                const label = this.setDateComponents(options.periodBegin, c);\n                percentImages.push(new XYType(c.percentImages ?? 0, NaN, NaN, label));\n                percentComputations.push(new XYType(c.percentComputations ?? 0, NaN, NaN, label));\n                rainyCount.push(new XYType(c.rainyCount ?? 0, NaN, NaN, label));\n                rainySum.push(new XYType(c.rainySum ?? 0, NaN, NaN, label));\n            });\n\n            return {\n                percentImages,\n                percentComputations,\n                rainyCount,\n                rainySum,\n                queueRunning: resp.data.queueRunning,\n            };\n        } catch (e) {\n            await this.checkError(e);\n        }\n        return null;\n    }\n\n    // === Computing ===\n\n    async getRainComputationCumulativeCartesianMapById(\n        rainId: string,\n        rainComputationCumulativeId: string\n    ): Promise<RainComputationMap> {\n        const params: RaainApiRainsCumulativeCartesianMapRequest = {format: 'cartesian-map'};\n        const queryString = BuildQueryString<RaainApiRainsCumulativeCartesianMapRequest>(params);\n\n        try {\n            const response = await this.fidjService.sendOnEndpoint<\n                void,\n                RaainApiRainsCumulativeCartesianMapResponse\n            >({\n                key: 'rains',\n                verb: 'GET',\n                relativePath: `${rainId}/cumulatives/${rainComputationCumulativeId}?${queryString}`,\n                defaultKeyUrl: this.defaultUrlForAPI + '/rains',\n            });\n            if (!response.data['cartesian-map']) {\n                return null;\n            }\n\n            const rainComputationMap = new RainComputationMap(response.data['cartesian-map']);\n            rainComputationMap.name = rainId + '.rain.cartesian-map';\n            return rainComputationMap;\n        } catch (e) {\n            await this.checkError(e);\n        }\n        return null;\n    }\n\n    async getRainComputationCumulativeCumulativesMapById(\n        rainId: string,\n        rainComputationCumulativeId: string,\n        cumulativeHours: number\n    ): Promise<RainComputationMap> {\n        const queryPath = `${rainId}/cumulatives/${rainComputationCumulativeId}/cumulative/${cumulativeHours}`;\n\n        try {\n            const response = await this.fidjService.sendOnEndpoint<\n                void,\n                RaainApiRainsCumulativeCumulativeResponse\n            >({\n                key: 'rains',\n                verb: 'GET',\n                relativePath: queryPath,\n                defaultKeyUrl: this.defaultUrlForAPI + '/rains',\n            });\n            if (!response.data['cumulative']) {\n                return null;\n            }\n\n            const rainComputationMap = new RainComputationMap(response.data['cumulative']);\n            rainComputationMap.name = rainId + '.rain.cumulative-cumulative';\n            return rainComputationMap;\n        } catch (e) {\n            await this.checkError(e);\n        }\n        return null;\n    }\n\n    async getRainCumulativeCompare(\n        rainNode: RainNode,\n        rainComputationCumulativeId: string\n    ): Promise<RainComputationQuality> {\n        try {\n            const response = await this.fidjService.sendOnEndpoint<\n                void,\n                RaainApiRainsCumulativeComparesResponse\n            >({\n                key: 'rains',\n                verb: 'GET',\n                relativePath: `${rainNode.id}/cumulatives/${rainComputationCumulativeId}/compares`,\n                defaultKeyUrl: this.defaultUrlForAPI + '/rains',\n            });\n\n            const qualityJson = response.data.qualities[0];\n            const rainComputationQuality = new RainComputationQuality(qualityJson);\n            rainComputationQuality.qualitySpeedMatrixContainer =\n                SpeedMatrixContainer.CreateFromJson(\n                    rainComputationQuality.qualitySpeedMatrixContainer\n                );\n            return rainComputationQuality;\n        } catch (e) {\n            await this.checkError(e);\n        }\n        return null;\n    }\n\n    // Fetch per-frequency quality for an on-demand cumulative\n    // timeStepInMinutes = gauge frequency filter (e.g. 6 for 6min gauges, 30 for 30min gauges)\n    // timeStepMode = 'eq' (exact match) or 'lte' (all frequencies <= timeStepInMinutes)\n    // provider = gauge provider filter (e.g. 'Raain')\n    async getRainCumulativeCumulativesCompare(\n        rainNode: RainNode,\n        rainComputationCumulativeId: string,\n        provider: string = 'Raain',\n        timeStepInMinutes: number = 5,\n        timeStepMode: 'eq' | 'lte' = 'eq'\n    ): Promise<RainComputationQuality> {\n        const params: RaainApiRainsCumulativeCumulativesComparesRequest = {\n            provider,\n            timeStepInMinutes,\n            timeStepMode,\n        };\n\n        const queryString =\n            BuildQueryString<RaainApiRainsCumulativeCumulativesComparesRequest>(params);\n\n        try {\n            const response = await this.fidjService.sendOnEndpoint<\n                void,\n                RaainApiRainsCumulativeCumulativesComparesResponse\n            >({\n                key: 'rains',\n                verb: 'GET',\n                relativePath: `${rainNode.id}/cumulatives/${rainComputationCumulativeId}/compares?${queryString}`,\n                defaultKeyUrl: this.defaultUrlForAPI + '/rains',\n            });\n\n            const allQualities = response.data.qualities;\n            if (!allQualities?.length) {\n                return null;\n            }\n\n            const rainComputationQuality = new RainComputationQuality(allQualities[0]);\n            rainComputationQuality.qualitySpeedMatrixContainer =\n                SpeedMatrixContainer.CreateFromJson(\n                    rainComputationQuality.qualitySpeedMatrixContainer\n                );\n\n            // Merge additional qualities (lte mode returns multiple freq groups)\n            for (let i = 1; i < allQualities.length; i++) {\n                const extra = new RainComputationQuality(allQualities[i]);\n                extra.qualitySpeedMatrixContainer =\n                    SpeedMatrixContainer.CreateFromJson(extra.qualitySpeedMatrixContainer);\n                rainComputationQuality.merge(extra);\n            }\n\n            return rainComputationQuality;\n        } catch (e) {\n            await this.checkError(e);\n        }\n        return null;\n    }\n\n    async getRainProgress(rainId: string): Promise<number> {\n        try {\n            const queryPath = '' + rainId + '/progress';\n            const response = await this.fidjService.sendOnEndpoint<\n                void,\n                RaainApiRainsProgressResponse\n            >({\n                key: 'rains',\n                verb: 'GET',\n                relativePath: queryPath,\n                defaultKeyUrl: this.defaultUrlForAPI + '/rains',\n            });\n\n            // return response.data.inProgress;\n            return response.data.inQueue;\n        } catch (e) {\n            await this.checkError(e);\n        }\n        return 0;\n    }\n\n    async getIndicators(rainId: string): Promise<RaainApiRainsIndicatorsResponse> {\n        try {\n            const params: RaainApiRainsIndicatorsRequest = {\n                cumulative: 'true',\n            };\n            const queryString = BuildQueryString<RaainApiRainsIndicatorsRequest>(params);\n            const response = await this.fidjService.sendOnEndpoint<\n                void,\n                RaainApiRainsIndicatorsResponse\n            >({\n                key: 'rains',\n                verb: 'GET',\n                relativePath: rainId + '/indicators' + (queryString ? '?' + queryString : ''),\n                defaultKeyUrl: this.defaultUrlForAPI + '/rains',\n            });\n\n            return response.data;\n        } catch (e) {\n            await this.checkError(e);\n        }\n        return {indicators: []};\n    }\n\n    // GET /rains/:rainId/cumulatives - List available cumulative periods\n    // With detailed=true, returns individual cumulatives instead of aggregated periods\n    async getCumulativePeriods(\n        rainId: string,\n        filters?: {\n            windowInMinutes?: number;\n            provider?: string;\n            isReady?: boolean;\n            forced?: boolean;\n            detailed?: boolean;\n            page?: number;\n            limit?: number;\n            periodBegin?: string;\n            periodEnd?: string;\n        }\n    ): Promise<RaainApiRainsCumulativesListResponse | RaainApiRainsCumulativesDetailedResponse> {\n        try {\n            const params: RaainApiRainsCumulativesListRequest = {};\n            if (filters?.windowInMinutes !== undefined) {\n                params.windowInMinutes = filters.windowInMinutes;\n            }\n            if (filters?.provider) {\n                params.provider = filters.provider;\n            }\n            if (filters?.isReady !== undefined) {\n                params.isReady = filters.isReady;\n            }\n            if (filters?.forced !== undefined) {\n                params.forced = filters.forced;\n            }\n            if (filters?.detailed) {\n                params.detailed = true;\n            }\n            if (filters?.page !== undefined) {\n                params.page = filters.page;\n            }\n            if (filters?.limit !== undefined) {\n                params.limit = filters.limit;\n            }\n            if (filters?.periodBegin) {\n                params.periodBegin = filters.periodBegin;\n            }\n            if (filters?.periodEnd) {\n                params.periodEnd = filters.periodEnd;\n            }\n            const queryString = BuildQueryString<RaainApiRainsCumulativesListRequest>(params);\n\n            if (filters?.detailed) {\n                const response = await this.fidjService.sendOnEndpoint<\n                    void,\n                    RaainApiRainsCumulativesDetailedResponse\n                >({\n                    key: 'rains',\n                    verb: 'GET',\n                    relativePath: rainId + '/cumulatives' + (queryString ? '?' + queryString : ''),\n                    defaultKeyUrl: this.defaultUrlForAPI + '/rains',\n                });\n                return response.data;\n            }\n\n            const response = await this.fidjService.sendOnEndpoint<\n                void,\n                RaainApiRainsCumulativesListResponse\n            >({\n                key: 'rains',\n                verb: 'GET',\n                relativePath: rainId + '/cumulatives' + (queryString ? '?' + queryString : ''),\n                defaultKeyUrl: this.defaultUrlForAPI + '/rains',\n            });\n\n            return response.data;\n        } catch (e) {\n            await this.checkError(e);\n        }\n        return {periods: [], total: 0};\n    }\n\n    // POST /rains/:rainId/cumulatives - Trigger cumulative computation\n    async createCumulativePeriod(\n        rainId: string,\n        params: {\n            periodBegin: Date;\n            periodEnd: Date;\n            provider: string;\n            confName?: string;\n            timeStepInMinutes?: number;\n        }\n    ): Promise<RaainApiRainsCumulativesCreateResponse> {\n        try {\n            const body: RaainApiRainsCumulativesCreateRequest = {\n                periodBegin: params.periodBegin.toISOString(),\n                periodEnd: params.periodEnd.toISOString(),\n                provider: params.provider,\n                confName: params.confName || 'admin',\n                timeStepInMinutes: params.timeStepInMinutes || 5,\n            };\n\n            const response = await this.fidjService.sendOnEndpoint<\n                RaainApiRainsCumulativesCreateRequest,\n                RaainApiRainsCumulativesCreateResponse\n            >({\n                key: 'rains',\n                verb: 'POST',\n                relativePath: rainId + '/cumulatives',\n                defaultKeyUrl: this.defaultUrlForAPI + '/rains',\n                data: body,\n            });\n\n            return response.data;\n        } catch (e) {\n            await this.checkError(e);\n        }\n        return null;\n    }\n\n    // === Gauges ===\n\n    async getGauge(gaugeId: string): Promise<GaugeNode> {\n        try {\n            const resp = await this.fidjService.sendOnEndpoint<void, RaainApiGaugesFindOneResponse>(\n                {\n                    key: 'gauges',\n                    verb: 'GET',\n                    relativePath: gaugeId,\n                    defaultKeyUrl: this.defaultUrlForAPI + '/gauges',\n                }\n            );\n            return new GaugeNode(resp.data);\n        } catch (e) {\n            await this.checkError(e);\n        }\n    }\n\n    async getGauges(\n        rainId: string,\n        aroundLatLng: LatLng,\n        pageCount = 1\n    ): Promise<Array<GaugeNodeFilter>> {\n        const baseParams: RaainApiGaugesFindAllMineRequest = {\n            aroundLatLng: `${aroundLatLng.lat},${aroundLatLng.lng}`,\n            rainId,\n        };\n        if (this.asTeamId) {\n            baseParams.teamId = this.asTeamId;\n        }\n\n        const gauges = [];\n        try {\n            for (let count = 1; count <= pageCount; count++) {\n                const params: RaainApiGaugesFindAllMineRequest = {...baseParams, page: count};\n                const queryString = BuildQueryString<RaainApiGaugesFindAllMineRequest>(params);\n                const resp = await this.fidjService.sendOnEndpoint<\n                    void,\n                    RaainApiGaugesFindAllMineResponse\n                >({\n                    key: 'gauges',\n                    verb: 'GET',\n                    relativePath: queryString ? '?' + queryString : '',\n                    defaultKeyUrl: this.defaultUrlForAPI + '/gauges',\n                });\n\n                for (const gauge of resp.data.gauges) {\n                    gauges.push(new GaugeNodeFilter(gauge));\n                }\n            }\n        } catch (e) {\n            await this.checkError(e);\n        }\n        return gauges;\n    }\n\n    async getGaugeMeasures(gaugeId: string, begin: Date, end: Date): Promise<GaugeMeasure[]> {\n        const params: RaainApiGaugesFindMeasuresRequest = {\n            begin: begin.toISOString(),\n            end: end.toISOString(),\n        };\n        const queryString = BuildQueryString<RaainApiGaugesFindMeasuresRequest>(params);\n        const resp = await this.fidjService.sendOnEndpoint<\n            void,\n            RaainApiGaugesFindMeasuresResponse\n        >({\n            key: 'gauges',\n            verb: 'GET',\n            relativePath: gaugeId + '/measures' + (queryString ? '?' + queryString : ''),\n            defaultKeyUrl: this.defaultUrlForAPI + '/gauges',\n        });\n\n        const gaugeMeasures: GaugeMeasure[] = [];\n        for (const gaugeMeasure of resp.data.gaugeMeasures) {\n            gaugeMeasures.push(new GaugeMeasure(gaugeMeasure));\n        }\n        return gaugeMeasures;\n    }\n\n    async getProviders(\n        rainId: string\n    ): Promise<{providers: string[]; timeStepInMinutes: number[]}> {\n        try {\n            const response = await this.fidjService.sendOnEndpoint<\n                void,\n                RaainApiRainsProvidersResponse\n            >({\n                verb: 'GET',\n                key: 'rains',\n                relativePath: rainId + '/providers',\n                defaultKeyUrl: this.defaultUrlForAPI + '/rains',\n            });\n\n            return {\n                providers: response.data.providers || [],\n                timeStepInMinutes: response.data.timeStepInMinutes || [5, 10, 15, 30, 60],\n            };\n        } catch (e) {\n            console.error('getProviders error:', e);\n            return {\n                providers: [],\n                timeStepInMinutes: [5, 10, 15, 30, 60],\n            };\n        }\n    }\n\n    protected setRoles(roles: Array<string>): void {\n        this.roles = roles;\n    }\n\n    private setDateComponents(\n        date: Date,\n        c: {\n            year?: number;\n            month?: number;\n            day?: number;\n            hour?: number;\n            minute?: number;\n        }\n    ): string {\n        const dateToShow = new Date(date);\n\n        if (c.year !== undefined) {\n            dateToShow.setUTCFullYear(c.year);\n        }\n        if (c.month !== undefined) {\n            dateToShow.setUTCMonth(c.month - 1);\n        }\n        if (c.day !== undefined) {\n            dateToShow.setUTCDate(c.day);\n        }\n        if (c.hour !== undefined) {\n            dateToShow.setUTCHours(c.hour);\n        }\n        if (c.minute !== undefined) {\n            dateToShow.setUTCMinutes(c.minute);\n        }\n\n        return dateToShow.toISOString();\n    }\n}\n","import {Component, EventEmitter, Input, NgZone, Output} from '@angular/core';\nimport {XYType} from '../xytype';\nimport {CompareManager} from '../tools';\n\n@Component({\n    selector: 'raain-compare-stack',\n    templateUrl: './raain-compare-stack.component.html',\n    styleUrls: ['./raain-compare-stack.component.scss'],\n})\nexport class RaainCompareStackComponent {\n    @Input()\n    public compareManager: CompareManager;\n\n    @Input()\n    public currentHeight: number;\n\n    @Output()\n    public selectedPoint = new EventEmitter<{point: XYType; compareIndex: number}>();\n\n    @Input()\n    public cumulative: boolean;\n\n    constructor(private ngZone: NgZone) {}\n\n    protected onClick(e: {point: XYType; compareIndex: number}): void {\n        this.selectedPoint.emit({point: e.point, compareIndex: e.compareIndex});\n    }\n\n    exportCumulativeToCsv(): void {\n        const points = this.compareManager.globalComparePoints;\n        if (!points?.length) {\n            return;\n        }\n\n        const dates = this.compareManager.compareDates;\n        const dateRange =\n            dates?.length > 0\n                ? `${this.formatDate(dates[0])} - ${this.formatDate(dates[dates.length - 1])}`\n                : '';\n\n        const csvRows = ['dateRange,gaugeName,gaugeValue,pixelValue'];\n        for (const point of points) {\n            csvRows.push(`${dateRange},${point.name},${point.x},${point.y}`);\n        }\n\n        const csvContent = csvRows.join('\\n');\n        this.downloadCsv(\n            csvContent,\n            `compare-cumulative-${this.formatDateForFilename(new Date())}.csv`\n        );\n    }\n\n    exportGranularToCsv(): void {\n        const allPoints = this.compareManager.getAllGranularComparePoints();\n        if (!allPoints?.length) {\n            return;\n        }\n\n        const csvRows = ['date,gaugeName,gaugeValue,pixelValue'];\n        for (const point of allPoints) {\n            const dateStr = this.formatDate(point.date);\n            csvRows.push(`${dateStr},${point.gaugeName},${point.gaugeValue},${point.pixelValue}`);\n        }\n\n        const csvContent = csvRows.join('\\n');\n        this.downloadCsv(\n            csvContent,\n            `compare-granular-${this.formatDateForFilename(new Date())}.csv`\n        );\n    }\n\n    private downloadCsv(content: string, filename: string): void {\n        const blob = new Blob([content], {type: 'text/csv;charset=utf-8;'});\n        const url = URL.createObjectURL(blob);\n        const link = document.createElement('a');\n        link.setAttribute('href', url);\n        link.setAttribute('download', filename);\n        link.click();\n        URL.revokeObjectURL(url);\n    }\n\n    private formatDate(date: Date): string {\n        return date ? date.toISOString().slice(0, 16).replace('T', ' ') : '';\n    }\n\n    private formatDateForFilename(date: Date): string {\n        return date.toISOString().slice(0, 10);\n    }\n}\n","<div *ngIf=\"cumulative\">\n    <ion-col size-md=\"6\" size-xs=\"12\">\n        <ion-card class=\"card-compare\">\n            <ion-card-header>Cumulative\n                [{{ compareManager.compareDates[0] | date:'yyyy-MM-dd HH:mm' }}\n                - {{ compareManager.compareDates[compareManager.compareDates.length - 1] | date:'yyyy-MM-dd HH:mm' }}[\n                <span *ngIf=\"compareManager.globalQualityIndicator !== null\"\n                      [ngClass]=\"{\n                        'quality-good': compareManager.globalQualityIndicator >= 0.5,\n                        'quality-medium': compareManager.globalQualityIndicator < 0.5 && compareManager.globalQualityIndicator >= 0,\n                        'quality-bad': compareManager.globalQualityIndicator < 0\n                      }\"\n                      class=\"quality-indicator\">\n                    Quality: {{ compareManager.globalQualityIndicator | number:'1.0-2' }}\n                </span>\n            </ion-card-header>\n            <ion-card-content *ngIf=\"compareManager.globalComparePoints?.length\">\n                <raain-compare\n                        (selectedPoint)=\"onClick($event)\"\n                        [compareIndex]=\"0\"\n                        [currentHeight]=\"500\"\n                        [pointMax]=\"compareManager.globalComparePointsMax\"\n                        [points]=\"compareManager.globalComparePoints\"></raain-compare>\n            </ion-card-content>\n        </ion-card>\n    </ion-col>\n    <div class=\"ion-text-end\">\n        <ion-button (click)=\"exportCumulativeToCsv()\" *ngIf=\"compareManager.globalComparePoints?.length\" fill=\"clear\"\n                    size=\"small\">\n            <ion-icon name=\"download-outline\" slot=\"start\"></ion-icon>\n            Export CSV\n        </ion-button>\n    </div>\n</div>\n\n<div *ngIf=\"!cumulative\">\n    <ion-col *ngFor=\"let compare of  compareManager?.uiCompares; index as compareIndex\" size-md=\"6\" size-xs=\"12\">\n        <ion-card class=\"card-compare\">\n            <ion-card-header>Gauges filled {{ compare.name }} {{ compare.remarks }}\n                <span *ngIf=\"compare.qualityIndicator !== null\"\n                      [ngClass]=\"{\n                        'quality-good': compare.qualityIndicator >= 0.5,\n                        'quality-medium': compare.qualityIndicator < 0.5 && compare.qualityIndicator >= 0,\n                        'quality-bad': compare.qualityIndicator < 0\n                      }\"\n                      class=\"quality-indicator\">\n                    Quality: {{ compare.qualityIndicator | number:'1.0-2' }}\n                </span>\n            </ion-card-header>\n            <ion-card-content *ngIf=\"compare.comparePoints?.length\">\n                <raain-compare\n                        (selectedPoint)=\"onClick($event)\"\n                        [compareIndex]=\"compareIndex\"\n                        [currentHeight]=\"500\"\n                        [pointMax]=\"compare.comparePointsMax\"\n                        [points]=\"compare.comparePoints\"></raain-compare>\n            </ion-card-content>\n        </ion-card>\n    </ion-col>\n\n    <div class=\"ion-text-end\">\n        <ion-button (click)=\"exportGranularToCsv()\" *ngIf=\"compareManager.uiCompares?.length\" fill=\"clear\" size=\"small\">\n            <ion-icon name=\"download-outline\" slot=\"start\"></ion-icon>\n            Export CSV\n        </ion-button>\n    </div>\n\n    <!-- Cumulative summary of all granular comparisons -->\n    <ion-col *ngIf=\"compareManager.granularCumulativePoints?.length\" size-md=\"6\" size-xs=\"12\">\n        <ion-card class=\"card-compare card-compare-cumulative\">\n            <ion-card-header>Cumulative Summary\n                [{{ compareManager.compareDates[0] | date:'yyyy-MM-dd HH:mm' }}\n                - {{ compareManager.compareDates[compareManager.compareDates.length - 1] | date:'yyyy-MM-dd HH:mm' }}[\n                <span *ngIf=\"compareManager.granularCumulativeQualityIndicator !== null\"\n                      [ngClass]=\"{\n                        'quality-good': compareManager.granularCumulativeQualityIndicator >= 0.5,\n                        'quality-medium': compareManager.granularCumulativeQualityIndicator < 0.5 && compareManager.granularCumulativeQualityIndicator >= 0,\n                        'quality-bad': compareManager.granularCumulativeQualityIndicator < 0\n                      }\"\n                      class=\"quality-indicator\">\n                    Quality: {{ compareManager.granularCumulativeQualityIndicator | number:'1.0-2' }}\n                </span>\n            </ion-card-header>\n            <ion-card-content>\n                <raain-compare\n                        (selectedPoint)=\"onClick($event)\"\n                        [compareIndex]=\"-1\"\n                        [currentHeight]=\"500\"\n                        [pointMax]=\"compareManager.granularCumulativePointsMax\"\n                        [points]=\"compareManager.granularCumulativePoints\"></raain-compare>\n            </ion-card-content>\n        </ion-card>\n    </ion-col>\n</div>\n","import {\n    AfterViewChecked,\n    Component,\n    ElementRef,\n    EventEmitter,\n    HostListener,\n    Input,\n    NgZone,\n    OnChanges,\n    OnDestroy,\n    Output,\n    SimpleChanges,\n    ViewChild,\n} from '@angular/core';\nimport {CompareElement, CompareElementInput, ElementsFactory} from 'raain-ui';\nimport {XYType} from '../xytype';\n\n@Component({\n    selector: 'raain-compare',\n    templateUrl: './raain-compare.component.html',\n    styleUrls: ['./raain-compare.component.scss'],\n})\nexport class RaainCompareComponent implements AfterViewChecked, OnDestroy, OnChanges {\n    @Input()\n    public points: Array<XYType>;\n\n    @Input()\n    public pointMax: XYType;\n\n    @Input()\n    public remarks: string;\n\n    @Input()\n    public compareIndex: number;\n\n    @Input()\n    public currentHeight: number;\n\n    @Input()\n    public currentWidth: number;\n\n    @Output()\n    public selectedPoint = new EventEmitter<{point: XYType; compareIndex: number}>();\n\n    @ViewChild('canvasElement')\n    protected canvasElement: ElementRef;\n\n    private compareElement: CompareElement;\n    private onSizeChanged;\n    private created;\n\n    constructor(private ngZone: NgZone) {\n        this.onSizeChanged = () => {};\n    }\n\n    public ngAfterViewChecked(): void {\n        this.create();\n    }\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        this.change(changes);\n    }\n\n    public ngOnDestroy(): void {\n        this.delete();\n    }\n\n    protected onClick(point: XYType): void {\n        this.selectedPoint.emit({point, compareIndex: this.compareIndex});\n    }\n\n    protected changeData(newData: XYType[], newMaxLine?: XYType[]) {\n        let changed = false;\n        const dataset = this.compareElement?.chart?.data?.datasets[0];\n        if (dataset) {\n            dataset.data = newData;\n            changed = true;\n        }\n\n        const line = this.compareElement?.chart?.data?.datasets[1];\n        if (line) {\n            line.data = newMaxLine;\n            changed = true;\n        }\n\n        if (changed) {\n            this.compareElement?.chart?.update();\n        }\n    }\n\n    @HostListener('window:resize', ['$event'])\n    private onResize(event: any): void {\n        this.updateMapSize();\n    }\n\n    private create() {\n        if (this.created) {\n            return;\n        }\n        this.created = true;\n\n        const factory = new ElementsFactory();\n        this.compareElement = factory.createCompare(\n            this.canvasElement.nativeElement,\n            new CompareElementInput(\n                this.points.map((p) => {\n                    return {x: p.x, y: p.y, r: p.r, name: p.name, id: p.id};\n                }),\n                this.pointMax,\n                this.onClick.bind(this)\n            )\n        );\n    }\n\n    private delete() {\n        if (this.compareElement) {\n            this.compareElement?.chart?.destroy();\n        }\n        this.created = false;\n    }\n\n    private change(changes: SimpleChanges) {\n        if (changes.points) {\n            this.changeData(this.points, [{x: 0, y: 0}, this.pointMax]);\n        }\n    }\n\n    private updateMapSize(): void {\n        const mapDivWidth = this.canvasElement.nativeElement.parentNode?.parentNode['clientWidth'];\n        const padding = 20;\n        let currentWidth =\n            mapDivWidth ||\n            window.innerWidth ||\n            document.documentElement.clientWidth ||\n            document.body.clientWidth;\n        const currentHeight =\n            this.currentHeight ||\n            window.innerHeight ||\n            document.documentElement.clientHeight ||\n            document.body.clientHeight;\n        currentWidth -= padding;\n        this.currentWidth = currentWidth;\n        this.currentHeight = currentHeight;\n\n        this.ngZone.run(() => {\n            this.onSizeChanged();\n        });\n    }\n}\n","<div id=\"canvas-container\">\n  <h1 *ngIf=\"remarks\">{{ remarks }}</h1>\n\n  <!-- [style.height.px]=\"currentHeight\" [style.width.px]=\"currentWidth\" [width]=\"currentWidth\" [height]=\"currentHeight\"-->\n  <canvas #canvasElement></canvas>\n</div>\n","import {\n    AfterViewChecked,\n    Component,\n    ElementRef,\n    EventEmitter,\n    HostListener,\n    Input,\n    NgZone,\n    OnChanges,\n    OnDestroy,\n    Output,\n    SimpleChanges,\n    ViewChild,\n} from '@angular/core';\nimport {\n    ChartScaleColors,\n    ConfigurationElement,\n    ConfigurationElementInput,\n    ElementsFactory,\n    Tools,\n} from 'raain-ui';\nimport {XYType} from '../xytype';\n\n@Component({\n    selector: 'raain-configuration',\n    templateUrl: './raain-configuration.component.html',\n    styleUrls: ['./raain-configuration.component.scss'],\n})\nexport class RaainConfigurationComponent implements AfterViewChecked, OnDestroy, OnChanges {\n    @Input()\n    public points: XYType[];\n\n    @Output()\n    public changedPoints = new EventEmitter<XYType[]>();\n\n    @Input()\n    public currentHeight: number;\n\n    @Input()\n    public currentWidth: number;\n\n    @Input()\n    public minPoint: XYType = {x: 0, y: 0};\n\n    @Input()\n    public maxPoint: XYType = {x: 300, y: 100};\n\n    @Input()\n    public logStyle = false;\n\n    @ViewChild('canvasElement')\n    protected canvasElement: ElementRef;\n\n    private configurationElement: ConfigurationElement;\n    private onDrag;\n    private onSizeChanged;\n    private created;\n\n    constructor(private ngZone: NgZone) {\n        this.onSizeChanged = () => {};\n        this.onDrag = (e: any) => {\n            this.changedPoints.emit(this.points);\n        };\n    }\n\n    public ngAfterViewChecked(): void {\n        this.create();\n    }\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        this.change(changes);\n    }\n\n    public ngOnDestroy(): void {\n        this.delete();\n    }\n\n    async reset(count = 4) {\n        const points = [];\n        for (let c = 0; c < count; c++) {\n            points.push(new XYType((c + 1) * 10, (c + 1) * 0.1));\n        }\n        this.points = points;\n        await this.delete();\n        this.create();\n    }\n\n    @HostListener('window:resize', ['$event'])\n    private onResize(event: any): void {\n        // this.updateMapSize();\n    }\n\n    private create() {\n        if (this.created) {\n            return;\n        }\n        this.created = true;\n\n        let inputs = new ConfigurationElementInput(\n            this.points,\n            this.minPoint,\n            this.maxPoint,\n            false,\n            [],\n            this.onDrag\n        );\n        if (this.logStyle) {\n            const confTransparency = 0.3;\n            inputs = new ConfigurationElementInput(\n                this.points,\n                this.minPoint,\n                this.maxPoint,\n                true,\n                [\n                    {\n                        color: Tools.getTransparency(ChartScaleColors['0'], confTransparency),\n                        yStart: Math.log10(0.1),\n                        yEnd: Math.log10(0.4),\n                    },\n                    {\n                        color: Tools.getTransparency(ChartScaleColors['0.4'], confTransparency),\n                        yStart: Math.log10(0.4),\n                        yEnd: Math.log10(1),\n                    },\n                    {\n                        color: Tools.getTransparency(ChartScaleColors['1'], confTransparency),\n                        yStart: Math.log10(1),\n                        yEnd: Math.log10(3),\n                    },\n                    {\n                        color: Tools.getTransparency(ChartScaleColors['3'], confTransparency),\n                        yStart: Math.log10(3),\n                        yEnd: Math.log10(10),\n                    },\n                    {\n                        color: Tools.getTransparency(ChartScaleColors['10'], confTransparency),\n                        yStart: Math.log10(10),\n                        yEnd: Math.log10(20),\n                    },\n                    {\n                        color: Tools.getTransparency(ChartScaleColors['20'], confTransparency),\n                        yStart: Math.log10(20),\n                        yEnd: Math.log10(30),\n                    },\n                    {\n                        color: Tools.getTransparency(ChartScaleColors['30'], confTransparency),\n                        yStart: Math.log10(30),\n                        yEnd: Math.log10(50),\n                    },\n                    {\n                        color: Tools.getTransparency(ChartScaleColors['50'], confTransparency),\n                        yStart: Math.log10(50),\n                        yEnd: Math.log10(100),\n                    },\n                    {\n                        color: Tools.getTransparency(ChartScaleColors['100'], confTransparency),\n                        yStart: Math.log10(100),\n                        yEnd: Math.log10(150),\n                    },\n                    {\n                        color: Tools.getTransparency(ChartScaleColors['150'], confTransparency),\n                        yStart: Math.log10(150),\n                        yEnd: Math.log10(200),\n                    },\n                    {\n                        color: Tools.getTransparency(ChartScaleColors['200'], confTransparency),\n                        yStart: Math.log10(200),\n                        yEnd: Math.log10(250),\n                    },\n                    {\n                        color: Tools.getTransparency(ChartScaleColors['250'], confTransparency),\n                        yStart: Math.log10(250),\n                        yEnd: Math.log10(300),\n                    },\n                    {\n                        color: Tools.getTransparency(ChartScaleColors['300'], confTransparency),\n                        yStart: Math.log10(300),\n                        yEnd: Math.log10(500),\n                    },\n                ],\n                this.onDrag\n            );\n        }\n\n        this.ngZone.runOutsideAngular(() => {\n            setTimeout(() => {\n                const factory = new ElementsFactory();\n                this.configurationElement = factory.createConfiguration(\n                    this.canvasElement.nativeElement,\n                    inputs\n                );\n            }, 10);\n        });\n    }\n\n    private async delete() {\n        this.configurationElement?.chart?.destroy();\n        this.created = false;\n    }\n\n    private async change(changes: SimpleChanges) {\n        // console.log('changed', changes);\n        await this.delete();\n        this.create();\n    }\n\n    private updateMapSize(): void {\n        const mapDivWidth = this.canvasElement.nativeElement.parentNode?.parentNode['clientWidth'];\n        const padding = 20;\n        let currentWidth =\n            mapDivWidth ||\n            window.innerWidth ||\n            document.documentElement.clientWidth ||\n            document.body.clientWidth;\n        const currentHeight =\n            this.currentHeight ||\n            window.innerHeight ||\n            document.documentElement.clientHeight ||\n            document.body.clientHeight;\n        currentWidth -= padding;\n        this.currentWidth = currentWidth;\n        this.currentHeight = currentHeight;\n\n        this.ngZone.run(() => {\n            this.onSizeChanged();\n        });\n    }\n}\n","<ion-grid>\n  <ion-row>\n    <ion-col id=\"col-container\" size-xs=\"10\">\n      <div [style.height.px]=\"currentHeight\" id=\"canvas-container\">\n        <canvas #canvasElement></canvas>\n      </div>\n    </ion-col>\n    <ion-col size-xs=\"2\">\n      <ion-button (click)=\"reset(2)\" color=\"light\" shape=\"round\" size=\"small\">2</ion-button>\n      <br>\n      <ion-button (click)=\"reset(4)\" color=\"light\" shape=\"round\" size=\"small\">4</ion-button>\n      <br>\n      <ion-button (click)=\"reset(6)\" color=\"light\" shape=\"round\" size=\"small\">6</ion-button>\n      <br>\n    </ion-col>\n  </ion-row>\n</ion-grid>\n","import {\n    AfterViewChecked,\n    Component,\n    ElementRef,\n    EventEmitter,\n    HostListener,\n    Input,\n    NgZone,\n    OnChanges,\n    OnDestroy,\n    Output,\n    SimpleChanges,\n    ViewChild,\n} from '@angular/core';\nimport {\n    DateRange,\n    DynamicDateStatusElement,\n    DynamicDateStatusElementInput,\n    ElementsFactory,\n} from 'raain-ui';\n\n@Component({\n    selector: 'raain-date-dynamic',\n    templateUrl: './raain-date-dynamic.component.html',\n    styleUrls: ['./raain-date-dynamic.component.scss'],\n})\nexport class RaainDateDynamicComponent implements AfterViewChecked, OnDestroy, OnChanges {\n    @Input()\n    public points: {\n        label: string;\n        style: string;\n        values: {date: Date; value: number}[];\n    }[];\n\n    @Input()\n    public focusDate: Date;\n    @Input()\n    public focusRange: DateRange;\n    @Input()\n    public withoutAll: boolean;\n    @Input()\n    public currentHeight: number;\n    public currentWidth: number;\n    @Input()\n    public fetchData: (\n        focusDate: Date,\n        focusRange: DateRange\n    ) => Promise<{label: string; style: string; values: {date: Date; value: number}[]}[]>;\n\n    @Output()\n    public changedDate = new EventEmitter<Date>();\n\n    @ViewChild('canvasElement')\n    protected canvasElement: ElementRef;\n    private dynamicDateStatusElement: DynamicDateStatusElement;\n    private onSizeChanged;\n    private created: boolean;\n\n    constructor(private ngZone: NgZone) {\n        this.focusDate = new Date();\n        this.focusRange = DateRange.CENTURY;\n        this.onSizeChanged = () => {};\n    }\n\n    public ngAfterViewChecked(): void {\n        this.create();\n    }\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        this.change(changes);\n    }\n\n    public ngOnDestroy(): void {\n        this.delete();\n    }\n\n    focusPrevious() {\n        this.dynamicDateStatusElement.focusPrevious();\n    }\n\n    focusReset() {\n        this.dynamicDateStatusElement.focusReset();\n    }\n\n    focusNext() {\n        this.dynamicDateStatusElement.focusNext();\n    }\n\n    @HostListener('window:resize', ['$event'])\n    private onResize(event: any): void {\n        this.updateMapSize();\n    }\n\n    // Map style to a valid Chart.js chart type\n    private mapStyleToChartType(style: string): string {\n        // List of valid Chart.js chart types\n        const validChartTypes = [\n            'line',\n            'bar',\n            'radar',\n            'doughnut',\n            'pie',\n            'polarArea',\n            'bubble',\n            'scatter',\n        ];\n\n        // If style is a valid chart type, return it, otherwise default to 'line'\n        return validChartTypes.includes(style) ? style : 'line';\n    }\n\n    private async create() {\n        if (this.created) {\n            return;\n        }\n        this.created = true;\n\n        const monthSampleData = await this.fetchData(new Date(), DateRange.MONTH);\n\n        const factory = new ElementsFactory();\n        try {\n            this.dynamicDateStatusElement = factory.createDynamicDateStatus(\n                this.canvasElement.nativeElement,\n                new DynamicDateStatusElementInput(\n                    async (focusDate, focusRange) => {\n                        const data = await this.fetchData(focusDate, focusRange);\n                        return data.map((item) => ({\n                            ...item,\n                            style: this.mapStyleToChartType(item.style),\n                        }));\n                    },\n                    {\n                        dataLength: monthSampleData.length,\n                        chartMinValue: -10,\n                        chartMaxValue: 100,\n                        onLastClick: (date: Date) => {\n                            this.changedDate.emit(date);\n                        },\n                    }\n                )\n            );\n        } catch (e) {\n            console.warn('Dynamic focus creation issue', e);\n        }\n    }\n\n    private async delete() {\n        this.dynamicDateStatusElement?.chart?.destroy();\n        this.created = false;\n    }\n\n    private async change(changes: SimpleChanges) {\n        await this.delete();\n        await this.create();\n    }\n\n    private updateMapSize(): void {\n        const mapDivWidth = this.canvasElement.nativeElement.parentNode?.parentNode['clientWidth'];\n        const padding = 20;\n        let currentWidth =\n            mapDivWidth ||\n            window.innerWidth ||\n            document.documentElement.clientWidth ||\n            document.body.clientWidth;\n        const currentHeight =\n            this.currentHeight ||\n            window.innerHeight ||\n            document.documentElement.clientHeight ||\n            document.body.clientHeight;\n        currentWidth -= padding;\n        this.currentWidth = currentWidth;\n        this.currentHeight = currentHeight;\n\n        this.ngZone.run(() => {\n            this.onSizeChanged();\n        });\n    }\n}\n","<ion-grid id=\"raain-date-dynamic\">\n    <ion-row>\n        <ion-col id=\"col-container\" size-sm=\"12\">\n            <div [style.height.px]=\"currentHeight\" id=\"canvas-container\">\n                <canvas #canvasElement></canvas>\n            </div>\n        </ion-col>\n    </ion-row>\n\n    <ion-row>\n        <ion-col class=\"ion-text-right\" offset-sm=\"4\" size-sm=\"1\">\n            <ion-button (click)=\"focusPrevious()\" color=\"medium\" fill=\"clear\">\n                <ion-icon name=\"chevron-back-outline\"></ion-icon>\n            </ion-button>\n        </ion-col>\n        <ion-col class=\"ion-text-center\" size-sm=\"2\">\n            <ion-button (click)=\"focusReset()\" *ngIf=\"!withoutAll\" color=\"medium\" fill=\"clear\">\n                all dates\n            </ion-button>\n        </ion-col>\n        <ion-col class=\"ion-text-left\" size-sm=\"1\">\n            <ion-button (click)=\"focusNext()\" color=\"medium\" fill=\"clear\">\n                <ion-icon name=\"chevron-forward-outline\"></ion-icon>\n            </ion-button>\n        </ion-col>\n    </ion-row>\n</ion-grid>\n","import {\n    AfterViewChecked,\n    Component,\n    ElementRef,\n    HostListener,\n    Input,\n    NgZone,\n    OnChanges,\n    OnDestroy,\n    SimpleChanges,\n    ViewChild,\n} from '@angular/core';\nimport {DateRange, DateStatusElement, DateStatusElementInput, ElementsFactory} from 'raain-ui';\n\n@Component({\n    selector: 'raain-date-focus',\n    templateUrl: './raain-date-focus.component.html',\n    styleUrls: ['./raain-date-focus.component.scss'],\n})\nexport class RaainDateFocusComponent implements AfterViewChecked, OnDestroy, OnChanges {\n    @Input()\n    public points: {\n        label: string;\n        style: string;\n        values: {date: Date; value: number}[];\n    }[];\n\n    @Input()\n    public focusDate: Date;\n    @Input()\n    public focusRange: DateRange;\n    @Input()\n    public withoutAll: boolean;\n\n    @Input()\n    public currentHeight: number;\n    public currentWidth: number;\n\n    @ViewChild('canvasElement')\n    protected canvasElement: ElementRef;\n\n    private dateStatusElement: DateStatusElement;\n    private onSizeChanged;\n    private created: boolean;\n\n    constructor(private ngZone: NgZone) {\n        this.focusDate = new Date();\n        this.focusRange = DateRange.CENTURY;\n        this.onSizeChanged = () => {};\n    }\n\n    public ngAfterViewChecked(): void {\n        this.create();\n    }\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        this.change(changes);\n    }\n\n    public ngOnDestroy(): void {\n        this.delete();\n    }\n\n    focusPrevious() {\n        this.dateStatusElement.focusPrevious();\n    }\n\n    focusReset() {\n        this.dateStatusElement.focusReset();\n    }\n\n    focusNext() {\n        this.dateStatusElement.focusNext();\n    }\n\n    @HostListener('window:resize', ['$event'])\n    private onResize(event: any): void {\n        this.updateMapSize();\n    }\n\n    private create() {\n        if (this.created) {\n            return;\n        }\n        this.created = true;\n\n        // this.ngZone.runOutsideAngular(() => {\n        //  setTimeout(() => {\n        const factory = new ElementsFactory();\n        try {\n            this.dateStatusElement = factory.createDateStatus(\n                this.canvasElement.nativeElement,\n                new DateStatusElementInput(this.points, this.focusDate, this.focusRange)\n            );\n        } catch (e) {\n            console.warn('Focus creation issue', e);\n        }\n        //  }, 50);\n        // });\n    }\n\n    private async delete() {\n        await this.dateStatusElement?.chart?.destroy();\n        this.created = false;\n    }\n\n    private async change(changes: SimpleChanges) {\n        await this.delete();\n        this.create();\n    }\n\n    private updateMapSize(): void {\n        const mapDivWidth = this.canvasElement.nativeElement.parentNode?.parentNode['clientWidth'];\n        const padding = 20;\n        let currentWidth =\n            mapDivWidth ||\n            window.innerWidth ||\n            document.documentElement.clientWidth ||\n            document.body.clientWidth;\n        const currentHeight =\n            this.currentHeight ||\n            window.innerHeight ||\n            document.documentElement.clientHeight ||\n            document.body.clientHeight;\n        currentWidth -= padding;\n        this.currentWidth = currentWidth;\n        this.currentHeight = currentHeight;\n\n        this.ngZone.run(() => {\n            this.onSizeChanged();\n        });\n    }\n}\n","<ion-grid>\n  <ion-row>\n    <ion-col id=\"col-container\" size-sm=\"12\">\n      <div [style.height.px]=\"currentHeight\" id=\"canvas-container\">\n        <canvas #canvasElement></canvas>\n      </div>\n    </ion-col>\n  </ion-row>\n\n  <ion-row>\n    <ion-col class=\"ion-text-right\" offset-sm=\"4\" size-sm=\"1\">\n      <ion-button (click)=\"focusPrevious()\" color=\"medium\" fill=\"clear\">\n        <ion-icon name=\"chevron-back-outline\"></ion-icon>\n      </ion-button>\n    </ion-col>\n    <ion-col class=\"ion-text-center\" size-sm=\"2\">\n      <ion-button (click)=\"focusReset()\" *ngIf=\"!withoutAll\" color=\"medium\" fill=\"clear\">\n        all dates\n      </ion-button>\n    </ion-col>\n    <ion-col class=\"ion-text-left\" size-sm=\"1\">\n      <ion-button (click)=\"focusNext()\" color=\"medium\" fill=\"clear\">\n        <ion-icon name=\"chevron-forward-outline\"></ion-icon>\n      </ion-button>\n    </ion-col>\n  </ion-row>\n</ion-grid>\n","import {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    Input,\n    OnChanges,\n    OnDestroy,\n    SimpleChanges,\n    ViewChild,\n} from '@angular/core';\nimport {IonToggle} from '@ionic/angular';\nimport {ProfileService} from '../profile.service';\nimport {\n    CartesianMeasureValue,\n    QualityIndicator,\n    RaainApiRainsCumulativesListResponse,\n    RainNode,\n    TeamNode,\n} from 'raain-model';\nimport {\n    DateRange,\n    ElementsFactory,\n    MapLatLng,\n    ModelPerformanceElement,\n    ModelPerformanceElementInput,\n    TimeframeContainers,\n} from 'raain-ui';\nimport {CompareManager, FrameSet, mapDateRangeToString, RefreshManager} from '../tools';\nimport {XYType} from '../xytype';\nimport {RadarService} from '../radar.service';\nimport {Storage} from '../storage.service';\nimport {CumulativeSelection} from '../cumulative-selector/cumulative-selector.component';\n\nlet TEST_DETECTION = 0;\n\n@Component({\n    selector: 'raain-details',\n    templateUrl: 'raain-details.component.html',\n    styleUrls: ['raain-details.component.scss'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class RaainDetailsComponent implements OnDestroy, OnChanges {\n    private static readonly HOUR_MS = 60 * 60000;\n    private static readonly DAY_MS = 24 * 60 * 60 * 1000;\n\n    @Input()\n    public toggleAdmin: boolean;\n    @Input()\n    public rainNode: RainNode;\n    @Input()\n    public compareManager: CompareManager;\n    @Input()\n    public refreshManager: RefreshManager;\n    @Input()\n    public profileService: ProfileService;\n    @Input()\n    public radarService: RadarService;\n    @Input()\n    public scaleLabel = 'mm';\n    @Input()\n    public showCreateMissingImages = true;\n    @Input()\n    public showCumulativeCompare = true;\n    @Input()\n    public showDateRange = true;\n    @Input()\n    public showCumulativeToggle = true;\n    @Input()\n    public forceTimeStep: number;\n\n    public availableProviders: string[] = [];\n    public availableTimeSteps: number[] = [];\n    public availableTimeStepOptions: {label: string; value: string}[] = [];\n    public selectedProvider: string;\n    public selectedTimeStep: number;\n    public timeStepMode: 'eq' | 'lte' = 'eq';\n\n    public periodBegin: Date;\n    public periodEnd: Date;\n\n    // public UI variables\n    public teamNode: TeamNode;\n    public periodBeginAsString: string;\n    public periodEndAsString: string;\n    public periodDurationAsString: string;\n    public dateShown: Date;\n    public coordinates: MapLatLng;\n    public borders: MapLatLng[];\n    public timeframeContainers: TimeframeContainers;\n    public currentTimeframeTarget: FrameSet;\n    public timeframeDates: Date[];\n    public countPoints: {\n        label: string;\n        style: string;\n        values: {date: Date; value: number}[];\n    }[];\n    public countsPeriod: {\n        percentImages?: XYType[];\n        queueRunning?: number;\n        progress?: number;\n    };\n\n    public gaugeSelectedPoints: {\n        label: string;\n        style: string;\n        values: {date: Date; value: number}[];\n    }[];\n    public toggleHistory: boolean;\n    public toggleMap: boolean;\n    public toggleCompare: boolean;\n    public toggleGaugeMeasures: boolean;\n    public toggleRemoveCompareDuplicate: boolean;\n    public toggleCumulative: boolean;\n    public refreshInProgress: boolean;\n    public sumDetails: string;\n    public showPixelMarkers: boolean = false;\n    public isAdmin: boolean;\n    public showFullError: boolean;\n    public showQualityModal: boolean;\n    public qualityIndicators: QualityIndicator[] = [];\n    public qualityIndicatorsLoading: boolean = false;\n    public showCumulativeSelector: boolean = false;\n    public creatingCumulative: boolean = false;\n    public showQualityDetails: boolean = false;\n    public modelPerformanceData: Array<{name: string; date: Date; KPEi: number | null; KPE1: number | null}> = [];\n    private performanceChart: ModelPerformanceElement;\n\n    @ViewChild('cumulativeToggle') cumulativeToggleRef: IonToggle;\n    @ViewChild('performanceCanvas') performanceCanvasRef: any;\n\n    // Cached computed values (to avoid method calls in templates)\n    public percentOfComputations: number = 0;\n    public presentComputationCount: number = 0;\n    public expectedComputationCount: number = 0;\n    public percentOfImages: number = 0;\n    public truncatedError: string = '';\n    public cumulativeDurationInMinutes: number = 10;\n    protected readonly DateRange = DateRange;\n\n    constructor(\n        protected storage: Storage,\n        private readonly cdr: ChangeDetectorRef\n    ) {}\n\n    private static PeriodDisplay(date: Date | string) {\n        let d = new Date();\n        if (date) {\n            d = new Date(date);\n            const userTimezoneOffset = d.getTimezoneOffset() * 60000;\n            d = new Date(d.getTime() - userTimezoneOffset);\n        }\n        const exampleFormattedDate = '2017-06-01T08:30';\n        return d.toISOString().substring(0, exampleFormattedDate.length);\n    }\n\n    private static DateUTC(date: string) {\n        const hasISOFormat = date.match(/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}Z$/);\n        let d = new Date(date);\n        if (!hasISOFormat) {\n            const userTimezoneOffset = d.getTimezoneOffset() * 60000;\n            d = new Date(d.getTime() - userTimezoneOffset);\n        }\n        return d;\n    }\n\n    private static MapCountToDateValue(c: XYType): {date: Date; value: number} {\n        return {\n            date: RaainDetailsComponent.DateUTC(c.name),\n            value: Math.min(100, c.x),\n        };\n    }\n\n    async openQualityModal() {\n        this.showQualityModal = true;\n        this.qualityIndicatorsLoading = true;\n        this.qualityIndicators = [];\n        this.modelPerformanceData = [];\n        this.cdr.markForCheck();\n\n        if (this.rainNode?.id) {\n            const result = await this.profileService.getIndicators(this.rainNode.id);\n            this.qualityIndicators = result.indicators;\n            this.modelPerformanceData = this.buildModelPerformanceData(result.indicators);\n        }\n\n        this.qualityIndicatorsLoading = false;\n        this.cdr.markForCheck();\n\n        if (this.modelPerformanceData.length > 0) {\n            setTimeout(() => this.renderPerformanceChart(), 100);\n        }\n    }\n\n    closeQualityModal() {\n        this.showQualityModal = false;\n        if (this.performanceChart?.chart) {\n            this.performanceChart.chart.destroy();\n            this.performanceChart = null;\n        }\n    }\n\n    buildModelPerformanceData(indicators: QualityIndicator[]): Array<{name: string; date: Date; KPEi: number | null; KPE1: number | null}> {\n        // Group by version combo (computingVersion + qualityVersion)\n        const grouped = new Map<string, {date: Date; KPEi: number | null; KPE1: number | null}>();\n\n        for (const ind of indicators) {\n            const key = `C${ind.computingVersion}-Q${ind.qualityVersion}`;\n            if (!grouped.has(key)) {\n                grouped.set(key, {date: new Date(ind.lastUpdatedAt), KPEi: null, KPE1: null});\n            }\n            const entry = grouped.get(key);\n\n            // Update date to latest\n            const indDate = new Date(ind.lastUpdatedAt);\n            if (indDate.getTime() > entry.date.getTime()) {\n                entry.date = indDate;\n            }\n\n            if (ind.timeStepInMinutes === 5) {\n                entry.KPEi = ind.averageQuality;\n            } else if (ind.timeStepInMinutes === 60) {\n                entry.KPE1 = ind.averageQuality;\n            }\n        }\n\n        return Array.from(grouped.entries()).map(([name, data]) => ({\n            name,\n            date: data.date,\n            KPEi: data.KPEi,\n            KPE1: data.KPE1,\n        }));\n    }\n\n    private renderPerformanceChart() {\n        const canvas = this.performanceCanvasRef?.nativeElement;\n        if (!canvas) {\n            return;\n        }\n        const factory = new ElementsFactory();\n        this.performanceChart = factory.createModelPerformance(\n            canvas,\n            new ModelPerformanceElementInput(this.modelPerformanceData)\n        );\n    }\n\n    formatDate(dateStr: string): string {\n        const date = new Date(dateStr);\n        return (\n            date.toLocaleDateString() +\n            ' ' +\n            date.toLocaleTimeString([], {hour: '2-digit', minute: '2-digit'})\n        );\n    }\n\n    public async fetchData(focusDate: Date, focusRange: DateRange) {\n        const values = [];\n        for (let i = 0; i < 10; i++) {\n            values.push({date: new Date(2020 + i, 0), value: 10});\n        }\n        const fakeData = [\n            {\n                label: '% Rainy',\n                style: 'bar',\n                values,\n            },\n            {\n                label: '% Images',\n                style: 'bar',\n                values,\n            },\n            {\n                label: '% Computations',\n                style: 'bar',\n                values,\n            },\n        ];\n\n        const range = mapDateRangeToString(focusRange);\n        let data = fakeData;\n        if (!this.rainNode) {\n            return data;\n        }\n\n        if (focusRange === DateRange.CENTURY) {\n            // fake\n        } else if (focusRange === DateRange.HOUR) {\n            const hourCounts = await this.profileService.getCountsHour(this.rainNode.id, {\n                periodBegin: focusDate,\n            });\n\n            data = [\n                {\n                    label: 'Rainy Count',\n                    style: 'line',\n                    values: hourCounts.rainyCount.map(RaainDetailsComponent.MapCountToDateValue),\n                },\n                {\n                    label: '% Images',\n                    style: 'bar',\n                    values: hourCounts.percentImages.map(RaainDetailsComponent.MapCountToDateValue),\n                },\n                {\n                    label: '% Computations',\n                    style: 'bar',\n                    values: hourCounts.percentComputations.map(\n                        RaainDetailsComponent.MapCountToDateValue\n                    ),\n                },\n                {\n                    label: 'Rainy Sum',\n                    style: 'line',\n                    values: hourCounts.rainySum.map(RaainDetailsComponent.MapCountToDateValue),\n                },\n            ];\n        } else {\n            const counts = await this.profileService.getCounts(this.rainNode.id, {\n                range,\n                periodBegin: focusDate,\n            });\n\n            data = [\n                {\n                    label: '% Rainy',\n                    style: 'bar',\n                    values: counts.percentRainy.map(RaainDetailsComponent.MapCountToDateValue),\n                },\n                {\n                    label: '% Images',\n                    style: 'bar',\n                    values: counts.percentImages.map(RaainDetailsComponent.MapCountToDateValue),\n                },\n                {\n                    label: '% Computations',\n                    style: 'bar',\n                    values: counts.percentComputations.map(\n                        RaainDetailsComponent.MapCountToDateValue\n                    ),\n                },\n            ];\n        }\n\n        // console.log(`fetchData DONE ${range}`, data);\n        return data;\n    }\n\n    // Wrapper function that preserves the async nature of fetchData\n    public fetchDataWrapper = async (focusDate: Date, focusRange: DateRange) => {\n        return await this.fetchData(focusDate, focusRange);\n    };\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        this.change(changes).then((ignored) => {});\n    }\n\n    ngOnDestroy() {\n        this.cleanAll();\n    }\n\n    async onEnableCountHistoryTab(rain: RainNode) {\n        if (!this.toggleHistory) {\n            this.countPoints = [];\n        }\n    }\n\n    async onPeriodBeginChange(event: any) {\n        const newValue = event?.target?.value ?? this.periodBeginAsString;\n        this.periodBegin = new Date(newValue);\n        this.periodBeginAsString = RaainDetailsComponent.PeriodDisplay(this.periodBegin);\n        this.storage.set('raain-periodBegin', this.periodBegin);\n\n        await this.onPeriodDurationChange(event);\n    }\n\n    async onPeriodEndChange(event: any) {\n        const newValue = event?.target?.value ?? this.periodEndAsString;\n        this.periodEnd = new Date(newValue);\n        this.periodEndAsString = RaainDetailsComponent.PeriodDisplay(this.periodEnd);\n        this.storage.set('raain-periodEnd', this.periodEnd);\n\n        this.periodBegin = new Date(\n            this.periodEnd.getTime() - this.getDurationInHours() * RaainDetailsComponent.HOUR_MS\n        );\n        this.periodBeginAsString = RaainDetailsComponent.PeriodDisplay(this.periodBegin);\n        this.storage.set('raain-periodBegin', this.periodBegin);\n        this.updateRefreshManagerPeriod();\n    }\n\n    async onPeriodDurationChange(_event: object) {\n        const durationInHours = this.getDurationInHours();\n        this.periodEnd = new Date(\n            this.periodBegin.getTime() + durationInHours * RaainDetailsComponent.HOUR_MS\n        );\n        this.periodEndAsString = RaainDetailsComponent.PeriodDisplay(this.periodEnd);\n        this.storage.set('raain-periodEnd', this.periodEnd);\n        this.storage.set('raain-periodDurationInHours', durationInHours);\n        this.updateRefreshManagerPeriod();\n        this.updateCumulativeDurationInMinutes();\n    }\n\n    async onDateChangeInCount(dateChanged: Date) {\n        const dateString =\n            dateChanged.toISOString().substring(0, 11) +\n            dateChanged.toLocaleTimeString().substring(0, 5);\n        this.periodDurationAsString = '1';\n\n        if (this.toggleCumulative) {\n            // Cumulative: select periodEnd\n            this.periodEndAsString = dateString;\n            await this.onPeriodEndChange(null);\n        } else {\n            // Granular: select periodBegin\n            this.periodBeginAsString = dateString;\n            await this.onPeriodBeginChange(null);\n        }\n        await this.refreshManager.refresh(false, this.toggleAdmin);\n    }\n\n    async onDateChangeInMap(dateShown: Date) {\n        this.dateShown = dateShown;\n        await this.fetchAndUpdateMap();\n        await this.refreshManager.setReportPeriod(this.dateShown);\n    }\n\n    async onSumChangeInMap(sum: string) {\n        this.sumDetails = sum;\n    }\n\n    async onGaugeSelectInMap(mapLatLng: MapLatLng) {\n        const gaugesFiltered = this.compareManager.gaugesInMap.filter(\n            (g) => g.lat === mapLatLng.lat && g.lng === mapLatLng.lng\n        );\n        if (gaugesFiltered.length !== 1) {\n            return;\n        }\n        const gaugeSelected = gaugesFiltered[0];\n\n        await this.refreshGaugeValues({id: gaugeSelected.id, name: gaugeSelected.name});\n\n        await this.compareManager.selectGauge(gaugeSelected.id, 0);\n    }\n\n    async refreshGaugeValues(gaugeSelected: {id: string; name: string}) {\n        const gaugeValueShowBegin = new Date(\n            this.periodBegin.getTime() - RaainDetailsComponent.DAY_MS\n        );\n        const gaugeValueShowEnd = new Date(this.periodEnd.getTime() + RaainDetailsComponent.DAY_MS);\n        gaugeValueShowBegin.setHours(0, 0);\n        gaugeValueShowEnd.setHours(23, 59);\n\n        const gaugeMeasures = await this.profileService.getGaugeMeasures(\n            gaugeSelected.id,\n            gaugeValueShowBegin,\n            gaugeValueShowEnd\n        );\n        const gaugeValues: {date: Date; value: number}[] = gaugeMeasures.map((gm) => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const cartesianMeasureValue = new CartesianMeasureValue(gm.values[0] as any);\n            return {\n                date: gm.date,\n                value: cartesianMeasureValue.getCartesianValues()[0].value,\n            };\n        });\n        this.gaugeSelectedPoints = [\n            {\n                label: gaugeSelected.name,\n                style: 'bar',\n                values: gaugeValues,\n            },\n        ];\n        this.cdr.markForCheck();\n    }\n\n    async onGaugeSelectInCompare(e: {point: XYType; compareIndex: number}) {\n        await this.refreshGaugeValues({id: e.point.id, name: e.point.name});\n\n        await this.compareManager.selectGauge(e.point.id, e.compareIndex);\n    }\n\n    async onToggleMap($event: Event) {\n        // if (this.toggleMap) {\n        //    await this.refreshMap();\n        // }\n    }\n\n    onTogglePixelMarkers() {\n        // Toggle is bound to showPixelMarkers, raain-map handles marker display\n    }\n\n    async onCumulativeToggleClick($event: Event) {\n        console.log('[CumulativeToggle] click event', {\n            currentValue: this.toggleCumulative,\n            eventType: $event.type,\n            target: ($event.target as HTMLElement)?.tagName,\n        });\n\n        $event.preventDefault();\n        $event.stopPropagation();\n\n        if (!this.toggleCumulative) {\n            console.log('[CumulativeToggle] showing popup, toggle stays OFF');\n            // Currently OFF, user wants to enable - show selector popup\n            this.showCumulativeSelector = true;\n\n            // Force reset the toggle visual state after ion-toggle's internal handler\n            setTimeout(() => {\n                if (this.cumulativeToggleRef) {\n                    this.cumulativeToggleRef.checked = false;\n                    console.log('[CumulativeToggle] force reset toggle to OFF');\n                }\n            }, 0);\n\n            this.cdr.markForCheck();\n        } else {\n            console.log('[CumulativeToggle] turning OFF');\n            // Currently ON, user wants to disable - direct toggle off\n            this.toggleCumulative = false;\n            this.storage.set('raain-toggleCumulative', false);\n            this.dateShown = this.getDateBasedOnCumulativeMode(this.timeframeDates);\n            this.updateCumulativeDurationInMinutes();\n            if (this.toggleMap) {\n                this.updateRefreshManagerPeriod();\n                await this.refreshManager.refresh(false, this.toggleAdmin);\n            }\n            this.cdr.markForCheck();\n        }\n        console.log('[CumulativeToggle] after handler, toggleCumulative =', this.toggleCumulative);\n    }\n\n    async onCumulativePeriodSelected(selection: CumulativeSelection) {\n        this.showCumulativeSelector = false;\n\n        // Update period to match selection\n        this.periodBegin = selection.periodBegin;\n        this.periodEnd = selection.periodEnd;\n        this.periodBeginAsString = RaainDetailsComponent.PeriodDisplay(this.periodBegin);\n        this.periodEndAsString = RaainDetailsComponent.PeriodDisplay(this.periodEnd);\n\n        // Calculate duration in hours\n        const durationMs = this.periodEnd.getTime() - this.periodBegin.getTime();\n        const durationHours = durationMs / RaainDetailsComponent.HOUR_MS;\n        this.periodDurationAsString = String(durationHours);\n\n        // Store cumulative period\n        this.storage.set('raain-periodBegin', this.periodBegin);\n        this.storage.set('raain-periodEnd', this.periodEnd);\n        this.storage.set('raain-periodDurationInHours', durationHours);\n\n        // Enable cumulative mode\n        this.toggleCumulative = true;\n        this.storage.set('raain-toggleCumulative', true);\n\n        this.dateShown = this.getDateBasedOnCumulativeMode(this.timeframeDates);\n        this.updateCumulativeDurationInMinutes();\n\n        // Refresh map\n        if (this.toggleMap) {\n            this.updateRefreshManagerPeriod();\n            await this.refreshManager.refresh(false, this.toggleAdmin);\n        }\n\n        this.cdr.markForCheck();\n    }\n\n    onCumulativeSelectorCancelled() {\n        console.log('[CumulativeToggle] cancelled, toggleCumulative =', this.toggleCumulative);\n        this.showCumulativeSelector = false;\n        this.cdr.markForCheck();\n    }\n\n    updateCumulativeDurationInMinutes() {\n        if (this.toggleCumulative) {\n            // Cumulative mode: use period duration\n            this.cumulativeDurationInMinutes = parseFloat(this.periodDurationAsString) * 60;\n        } else {\n            // Granular mode: use selectedTimeStep\n            this.cumulativeDurationInMinutes = this.selectedTimeStep || 10;\n        }\n    }\n\n    async onProviderChanged($event: Event) {\n        this.selectedProvider = ($event as CustomEvent)?.detail?.value;\n        this.storage.set('raain-selectedProvider', this.selectedProvider);\n        await this.applyRefreshManagerSettings();\n    }\n\n    async onTimeStepChanged($event: Event) {\n        const raw: string = ($event as CustomEvent)?.detail?.value;\n        const [mode, stepStr] = raw.split(':');\n        this.timeStepMode = mode as 'eq' | 'lte';\n        this.selectedTimeStep = parseInt(stepStr, 10);\n        this.storage.set('raain-selectedTimeStep', this.selectedTimeStep);\n        this.storage.set('raain-timeStepMode', this.timeStepMode);\n        this.updateCumulativeDurationInMinutes();\n        await this.applyRefreshManagerSettings();\n    }\n\n    async loadProviders() {\n        if (!this.rainNode?.id) {\n            return;\n        }\n\n        try {\n            const result = await this.profileService.getProviders(this.rainNode.id);\n            this.availableProviders = result.providers.sort();\n            this.availableTimeSteps = result.timeStepInMinutes.sort((a, b) => a - b);\n\n            // Load saved selections or use defaults\n            this.selectedProvider =\n                this.storage.get('raain-selectedProvider') ||\n                (this.availableProviders.length > 0 ? this.availableProviders[0] : 'Raain');\n            this.selectedTimeStep =\n                this.storage.get('raain-selectedTimeStep') ||\n                (this.availableTimeSteps.length > 0 ? this.availableTimeSteps[0] : 10);\n            this.timeStepMode = this.storage.get('raain-timeStepMode') || 'eq';\n        } catch (e) {\n            // Set fallback values\n            this.availableProviders = ['Raain'];\n            this.availableTimeSteps = [5, 10, 15, 30, 60];\n            this.selectedProvider = 'Raain';\n            this.selectedTimeStep = 10;\n            this.timeStepMode = 'eq';\n        }\n        // Override timeStep if forced\n        if (this.forceTimeStep) {\n            this.selectedTimeStep = this.forceTimeStep;\n        }\n\n        this.buildTimeStepOptions();\n\n        // Set provider and timeStep on refreshManager\n        if (this.refreshManager) {\n            this.refreshManager.provider = this.selectedProvider;\n            this.refreshManager.timeStepInMinutes = this.selectedTimeStep;\n            this.refreshManager.timeStepMode = this.timeStepMode;\n        }\n        this.cdr.markForCheck();\n    }\n\n    private buildTimeStepOptions() {\n        this.availableTimeStepOptions = [];\n        for (const step of this.availableTimeSteps) {\n            this.availableTimeStepOptions.push({label: `= ${step} min`, value: `eq:${step}`});\n            this.availableTimeStepOptions.push({label: ` ${step} min`, value: `lte:${step}`});\n        }\n    }\n\n    onChangeDetectionTest(rainNode: RainNode) {\n        console.log(TEST_DETECTION++, 'onChangeDetectionTest');\n        return '';\n    }\n\n    updateTruncatedError() {\n        const error = this.refreshManager?.lastError || '';\n        if (error.length <= 80) {\n            this.truncatedError = error;\n            return;\n        }\n        this.truncatedError = error.substring(0, 80) + '...';\n    }\n\n    updateCachedValues() {\n        this.updatePercentOfImages();\n        this.updatePercentOfComputations();\n        this.updateTruncatedError();\n        this.updateCumulativeDurationInMinutes();\n    }\n\n    async refreshMap() {\n        this.gaugeSelectedPoints = [];\n        this.dateShown = this.getDateBasedOnCumulativeMode();\n        this.borders = [];\n\n        this.compareManager.cleanAll();\n        await this.compareManager.setGaugesInMap();\n        await this.refreshManager.refresh(false, this.toggleAdmin);\n        this.cdr.markForCheck();\n    }\n\n    async triggerCumulativeCreation() {\n        if (this.creatingCumulative) {\n            return;\n        }\n        this.creatingCumulative = true;\n        this.cdr.markForCheck();\n\n        try {\n            await this.profileService.createCumulativePeriod(this.rainNode.id, {\n                periodBegin: this.periodBegin,\n                periodEnd: this.periodEnd,\n                provider: this.selectedProvider,\n                timeStepInMinutes: this.selectedTimeStep,\n            });\n\n            const success = await this.pollForCumulativeCompletion();\n\n            if (success) {\n                await this.refreshMap();\n            } else {\n                console.error('triggerCumulativeCreation: timeout waiting for computation');\n            }\n        } catch (e) {\n            console.error('triggerCumulativeCreation error:', e);\n        }\n\n        this.creatingCumulative = false;\n        this.cdr.markForCheck();\n    }\n\n    async setPeriodOfNow() {\n        const last30mn = new Date();\n        last30mn.setMinutes(last30mn.getMinutes() - 30);\n        this.periodBeginAsString =\n            last30mn.toISOString().substring(0, 11) + last30mn.toLocaleTimeString().substring(0, 5);\n        this.periodDurationAsString = '1';\n        await this.onPeriodBeginChange(null);\n        await this.refreshManager.refresh(false, this.toggleAdmin);\n    }\n\n    updatePercentOfImages() {\n        if (!this.countsPeriod?.percentImages?.length) {\n            this.percentOfImages = 0;\n            return;\n        }\n\n        const duringPeriod = this.countsPeriod.percentImages.filter(\n            (a) =>\n                this.periodBegin.getTime() <= new Date(a.name).getTime() &&\n                new Date(a.name).getTime() <= this.periodEnd.getTime()\n        );\n        const summed = duringPeriod.reduce((a, b) => a + (b.x ?? 0), 0);\n        this.percentOfImages = Math.round(summed / duringPeriod.length);\n    }\n\n    updatePercentOfComputations() {\n        const expectedCount = this.refreshManager?.getExpectedTimelineCount();\n        if (!expectedCount) {\n            this.percentOfComputations = 0;\n            this.presentComputationCount = 0;\n            this.expectedComputationCount = 0;\n            return;\n        }\n\n        const presentCount = this.refreshManager?.getPresentTimelineCount() || 0;\n        this.presentComputationCount = presentCount;\n        this.expectedComputationCount = expectedCount;\n        this.percentOfComputations = Math.round((presentCount / expectedCount) * 100);\n    }\n\n    private async pollForCumulativeCompletion(): Promise<boolean> {\n        const POLL_TIMEOUT_MS = 900000;\n        const POLL_INTERVAL_MS = 3000;\n        const startTime = Date.now();\n        const windowInMinutes = Math.round(\n            (this.periodEnd.getTime() - this.periodBegin.getTime()) / 60000\n        );\n\n        while (Date.now() - startTime < POLL_TIMEOUT_MS) {\n            try {\n                const progress = await this.profileService.getRainProgress(this.rainNode.id);\n\n                if (progress === 0) {\n                    // Trigger background fetch from raain-ground via timeframeCumulative\n                    await this.profileService.getRainTimeframe(\n                        this.rainNode.id,\n                        this.periodBegin,\n                        this.periodEnd,\n                        this.toggleAdmin,\n                        this.selectedProvider,\n                        this.selectedTimeStep,\n                        windowInMinutes\n                    );\n\n                    // Verify cumulative actually exists\n                    const response = (await this.profileService.getCumulativePeriods(\n                        this.rainNode.id,\n                        {\n                            provider: this.selectedProvider,\n                            windowInMinutes,\n                            forced: this.toggleAdmin,\n                        }\n                    )) as RaainApiRainsCumulativesListResponse;\n\n                    const found = response.periods.find(\n                        (p) => p.windowInMinutes === windowInMinutes\n                    );\n\n                    if (found) {\n                        return true;\n                    }\n                }\n\n                await new Promise((r) => setTimeout(r, POLL_INTERVAL_MS));\n            } catch (e) {\n                console.warn('Poll error:', e);\n                await new Promise((r) => setTimeout(r, POLL_INTERVAL_MS));\n            }\n        }\n\n        return false;\n    }\n\n    private getDateBasedOnCumulativeMode(fallbackDates?: Date[]): Date {\n        if (fallbackDates?.length > 0) {\n            const dateExists = fallbackDates.some((d) => d.getTime() === this.dateShown?.getTime());\n            if (!dateExists) {\n                return this.toggleCumulative\n                    ? fallbackDates[fallbackDates.length - 1]\n                    : fallbackDates[0];\n            }\n        }\n        return this.toggleCumulative ? this.periodEnd : this.periodBegin;\n    }\n\n    private getCumulativeHours(): number {\n        return this.toggleCumulative ? parseFloat(this.periodDurationAsString) : 0;\n    }\n\n    private getDurationInHours(): number {\n        return parseFloat(this.periodDurationAsString);\n    }\n\n    private updateRefreshManagerPeriod() {\n        this.refreshManager.cumulative = this.toggleCumulative;\n\n        // Align dates to 5-minute boundaries (floor) for consistency with raain-ground\n        const alignTo5minFloor = (date: Date): Date => {\n            const minutes = date.getMinutes();\n            const alignedMinutes = Math.floor(minutes / 5) * 5;\n            return new Date(\n                date.getFullYear(),\n                date.getMonth(),\n                date.getDate(),\n                date.getHours(),\n                alignedMinutes,\n                0,\n                0\n            );\n        };\n\n        this.refreshManager.period = {\n            begin: alignTo5minFloor(this.periodBegin),\n            end: alignTo5minFloor(this.periodEnd),\n        };\n    }\n\n    private async fetchAndUpdateMap() {\n        await this.refreshManager.fetch(\n            this.dateShown,\n            this.toggleGaugeMeasures,\n            this.getCumulativeHours()\n        );\n        this.currentTimeframeTarget = this.refreshManager.getTimelineSelectedFrameSet();\n        this.cdr.markForCheck();\n    }\n\n    private async applyRefreshManagerSettings() {\n        if (!this.refreshManager) {\n            return;\n        }\n        this.refreshManager.provider = this.selectedProvider;\n        this.refreshManager.timeStepInMinutes = this.selectedTimeStep;\n        this.refreshManager.timeStepMode = this.timeStepMode;\n        await this.refreshManager.refresh(false, this.toggleAdmin);\n    }\n\n    private cleanAll() {\n        this.borders = [];\n        this.isAdmin = false;\n        this.timeframeContainers = new TimeframeContainers([]);\n        this.currentTimeframeTarget = null;\n        this.timeframeDates = [];\n        this.countPoints = [];\n        this.countsPeriod = {progress: 0, queueRunning: 0, percentImages: []};\n        this.gaugeSelectedPoints = [];\n\n        this.toggleHistory = false;\n        this.toggleMap = true;\n        this.toggleCompare = false;\n        this.toggleGaugeMeasures = false;\n        this.toggleRemoveCompareDuplicate = true;\n        this.toggleCumulative = this.showCumulativeToggle\n            ? this.storage.get('raain-toggleCumulative')\n            : false;\n\n        this.periodBegin = new Date(this.storage.get('raain-periodBegin'));\n        this.periodEnd = new Date(this.storage.get('raain-periodEnd'));\n        this.periodBeginAsString = RaainDetailsComponent.PeriodDisplay(this.periodBegin);\n        this.periodEndAsString = RaainDetailsComponent.PeriodDisplay(this.periodEnd);\n        const durationMs = this.periodEnd.getTime() - this.periodBegin.getTime();\n        this.periodDurationAsString = '' + durationMs / RaainDetailsComponent.HOUR_MS;\n\n        this.dateShown = this.getDateBasedOnCumulativeMode();\n        this.refreshInProgress = false;\n        this.showFullError = false;\n        this.showQualityModal = false;\n        this.qualityIndicators = [];\n        this.qualityIndicatorsLoading = false;\n\n        this.compareManager?.cleanAll();\n        this.refreshManager?.cleanAll();\n    }\n\n    private async init() {\n        this.cleanAll();\n        this.updateCachedValues();\n        await this.initRain();\n        this.cdr.markForCheck();\n    }\n\n    private async initRain() {\n        if (!this.rainNode) {\n            return;\n        }\n\n        this.isAdmin = this.profileService.isAdmin();\n\n        this.refreshManager.rainNode = this.rainNode;\n        this.compareManager.rainNode = this.rainNode;\n\n        // Load providers and set on refreshManager\n        await this.loadProviders();\n\n        this.refreshManager.setMethods(\n            this.onRefreshInProgress.bind(this),\n            this.onRefreshDone.bind(this),\n            this.onFetchDone.bind(this)\n        );\n\n        const center = this.rainNode.getCenter();\n        this.coordinates = new MapLatLng(center.lat, center.lng);\n        this.teamNode = await this.profileService.getTeam(\n            this.rainNode.getLink(TeamNode.TYPE).getId()\n        );\n\n        // Load all gauges linked to the rainNode on map\n        await this.compareManager.setGaugesInMap();\n\n        if (this.periodBegin && this.periodEnd) {\n            this.updateRefreshManagerPeriod();\n            await this.refreshManager.refresh(false, this.toggleAdmin);\n        }\n    }\n\n    private async onRefreshInProgress(\n        countPeriods: {\n            percentImages?: XYType[];\n            queueRunning?: number;\n            progress?: number;\n        },\n        timeframeDates: Date[]\n    ) {\n        this.refreshInProgress = true;\n        this.countsPeriod = countPeriods;\n        this.timeframeDates = timeframeDates;\n        this.updateCachedValues();\n        this.cdr.markForCheck();\n    }\n\n    private async onRefreshDone(timeframeDates: Date[]) {\n        this.timeframeDates = timeframeDates;\n        this.refreshInProgress = false;\n        this.updateCachedValues();\n        this.cdr.markForCheck();\n\n        if (this.toggleMap && timeframeDates.length > 0) {\n            this.dateShown = this.getDateBasedOnCumulativeMode(timeframeDates);\n            if (this.dateShown) {\n                await this.fetchAndUpdateMap();\n            }\n        }\n    }\n\n    private async onFetchDone(timeframeContainers?: TimeframeContainers) {\n        if (timeframeContainers) {\n            this.timeframeContainers = timeframeContainers;\n        }\n        this.cdr.markForCheck();\n    }\n\n    private async change(_changes: SimpleChanges) {\n        await this.init();\n    }\n}\n","<!-- Main content container -->\n<div *ngIf=\"rainNode\" class=\"raain-details-container\">\n\n    <!-- Period selection section -->\n    <ion-card class=\"period-card\">\n        <ion-card-content>\n            <div class=\"period-controls\">\n                <div class=\"period-row\">\n\n                    <ion-button (click)=\"toggleHistory = !toggleHistory; onEnableCountHistoryTab(rainNode)\"\n                                fill=\"outline\">\n                        <ion-icon name=\"calendar-clear-outline\" slot=\"start\"></ion-icon>\n                        <ion-icon [name]=\"toggleHistory ? 'chevron-down' : 'chevron-forward'\" slot=\"end\"></ion-icon>\n                    </ion-button>\n\n                    <div class=\"period-start ion-hide-md-down\">\n                        <input (change)=\"onPeriodBeginChange($event)\"\n                               [disabled]=\"toggleCumulative\"\n                               [value]=\"periodBeginAsString\"\n                               class=\"datetime-input\"\n                               type=\"datetime-local\">\n                    </div>\n\n                    <div class=\"period-duration ion-hide-md-down\">\n                        <ion-select (ionDismiss)=\"onPeriodDurationChange($event)\"\n                                    [(ngModel)]=\"periodDurationAsString\"\n                                    [disabled]=\"toggleCumulative\"\n                                    class=\"duration-select\"\n                                    id=\"periodDuration\"\n                                    interface=\"popover\">\n                            <ion-select-option value=\"0.25\">15 minutes</ion-select-option>\n                            <ion-select-option value=\"0.5\">30 minutes</ion-select-option>\n                            <ion-select-option value=\"1\">1 hour</ion-select-option>\n                            <ion-select-option value=\"2\">2 hours</ion-select-option>\n                            <ion-select-option value=\"3\">3 hours</ion-select-option>\n                            <ion-select-option value=\"4\">4 hours</ion-select-option>\n                            <ion-select-option value=\"5\">5 hours</ion-select-option>\n                            <ion-select-option value=\"6\">6 hours</ion-select-option>\n                            <ion-select-option value=\"8\">8 hours</ion-select-option>\n                            <ion-select-option value=\"10\">10 hours</ion-select-option>\n                            <ion-select-option value=\"12\">12 hours</ion-select-option>\n                            <ion-select-option *ngIf=\"isAdmin\" value=\"24\">24 hours</ion-select-option>\n                        </ion-select>\n                    </div>\n\n                    <div class=\"period-start ion-hide-md-down\">\n                        <input (change)=\"onPeriodEndChange($event)\"\n                               [disabled]=\"toggleCumulative\"\n                               [value]=\"periodEndAsString\"\n                               class=\"datetime-input\"\n                               type=\"datetime-local\">\n                    </div>\n\n                    <div *ngIf=\"showCumulativeToggle\" (click)=\"onCumulativeToggleClick($event)\" class=\"toggle-cumulative\">\n                        <ion-label [class.text-primary]=\"toggleCumulative\">\n                            {{ toggleCumulative ? 'Cumulative' : 'Granular' }}\n                        </ion-label>\n                        <ion-toggle #cumulativeToggle [checked]=\"toggleCumulative\">\n                        </ion-toggle>\n                    </div>\n                </div>\n\n                <!-- Hidden label for change detection (uncomment to debug)\n                <div class=\"hidden-label\">{{ onChangeDetectionTest(rainNode) }}</div>\n                -->\n            </div>\n\n            <!-- Historical map section -->\n            <div *ngIf=\"toggleHistory\" class=\"period-controls\">\n                <raain-date-dynamic (changedDate)=\"onDateChangeInCount($event)\"\n                                    [currentHeight]=\"300\"\n                                    [fetchData]=\"fetchDataWrapper\"\n                                    [points]=\"countPoints\">\n                </raain-date-dynamic>\n            </div>\n        </ion-card-content>\n    </ion-card>\n\n    <!-- Map performance -->\n    <ion-grid class=\"map-performance\">\n        <ion-row id=\"progressAndRefresh\">\n            <ion-col class=\"provider-selection\" size=\"12\" size-md=\"6\">\n                <ion-button (click)=\"openQualityModal()\" class=\"quality-info-button\" fill=\"clear\">\n                    {{ refreshManager.rainComputationMapVersion }}\n                    <ion-icon name=\"help-circle-outline\" slot=\"end\"></ion-icon>\n                </ion-button>\n                <div *ngIf=\"availableProviders.length > 0 || availableTimeSteps.length > 0\" class=\"selection-row\">\n                    <ion-select (ionChange)=\"onProviderChanged($event)\"\n                                [value]=\"selectedProvider\"\n                                interface=\"popover\"\n                                label=\"Provider\"\n                                placeholder=\"Select Provider\">\n                        <ion-select-option *ngFor=\"let provider of availableProviders\" [value]=\"provider\">\n                            {{ provider }}\n                        </ion-select-option>\n                    </ion-select>\n\n                    <ion-select (ionChange)=\"onTimeStepChanged($event)\"\n                                [disabled]=\"forceTimeStep\"\n                                [value]=\"timeStepMode + ':' + selectedTimeStep\"\n                                interface=\"popover\"\n                                label=\"Time Step\"\n                                placeholder=\"Select Time Step\">\n                        <ion-select-option *ngFor=\"let opt of availableTimeStepOptions\" [value]=\"opt.value\">\n                            {{ opt.label }}\n                        </ion-select-option>\n                    </ion-select>\n\n                    <span class=\"computation-count\">\n                        {{ presentComputationCount }}/{{ expectedComputationCount }}\n                        <ion-button (click)=\"triggerCumulativeCreation()\"\n                                    *ngIf=\"showCreateMissingImages\"\n                                    [disabled]=\"creatingCumulative\" fill=\"clear\" color=\"medium\"\n                                    id=\"createMissingImages\"\n                                    size=\"small\">\n                            <ion-icon *ngIf=\"!creatingCumulative\" name=\"refresh-outline\"\n                                      slot=\"icon-only\"></ion-icon>\n                            <ion-spinner *ngIf=\"creatingCumulative\" name=\"crescent\"\n                                         slot=\"icon-only\"></ion-spinner>\n                        </ion-button>\n                        <i *ngIf=\"countsPeriod?.progress\" class=\"progress-indicator\">\n                            In Progress: {{ countsPeriod.progress }}...\n                        </i>\n                    </span>\n                </div>\n            </ion-col>\n            <ion-col class=\"ion-text-right\" size=\"12\" size-md=\"6\">\n                <ion-button (click)=\"refreshMap()\" [disabled]=\"refreshInProgress\" class=\"refresh-button\">\n                    Refresh Map\n                </ion-button>\n            </ion-col>\n        </ion-row>\n\n        <!-- status update row -->\n        <ion-row>\n            <!-- Progress col -->\n            <ion-progress-bar\n                    [buffer]=\"(countsPeriod.progress / ((timeframeDates?.length || 10) +3))+0.01\"\n                    [style.visibility]=\"refreshInProgress ? 'visible' : 'hidden'\"\n                    [value]=\"countsPeriod.progress / ((timeframeDates?.length || 10) +3)\"\n                    color=\"primary\">\n            </ion-progress-bar>\n\n            <!-- Error col -->\n            <ion-col (click)=\"showFullError = !showFullError\" *ngIf=\"refreshManager.lastError\" class=\"error-row\"\n                     size=\"12\">\n                <div class=\"error-content\">\n                    <ion-icon class=\"error-icon\" name=\"warning-outline\"></ion-icon>\n                    <span [class.expanded]=\"showFullError\" class=\"error-text\">\n                        {{ showFullError ? refreshManager.lastError : truncatedError }}\n                    </span>\n                    <ion-icon [name]=\"showFullError ? 'chevron-up' : 'chevron-down'\" class=\"error-caret\"></ion-icon>\n                </div>\n            </ion-col>\n        </ion-row>\n    </ion-grid>\n\n    <!-- Map section -->\n    <ion-card class=\"map-card\">\n        <ion-card-content class=\"map-content\">\n            <ion-grid>\n                <ion-row *ngIf=\"toggleMap && (percentOfImages || percentOfComputations)\">\n                    <!-- Map component -->\n                    <ion-col class=\"map-column\" size-lg=\"7\" size-md=\"12\">\n                        <div class=\"map-container\">\n                            <raain-map #raainMapRef\n                                       (changedDate)=\"onDateChangeInMap($event)\"\n                                       (changedSum)=\"onSumChangeInMap($event)\"\n                                       (selectedMarker)=\"onGaugeSelectInMap($event)\"\n                                       [coordinates]=\"coordinates\"\n                                       [cumulativeDurationInMinutes]=\"cumulativeDurationInMinutes\"\n                                       [currentHeight]=\"500\"\n                                       [defaultDate]=\"dateShown\"\n                                       [markers]=\"{\n                                        borders,\n                                        gauges: compareManager.gaugesInMap,\n                                        gaugesInCompare: compareManager.gaugesInCompare,\n                                        selectedGauges: compareManager.selectedGauges,\n                                        pixels: compareManager.selectedPixels,\n                                        pixelsSolution: compareManager.pixelsSolutions?.length ? compareManager.pixelsSolutions[0] : [],\n                                        speeds: compareManager.speeds\n                                    }\"\n                                       [scaleLabel]=\"toggleCumulative ? 'mm' : scaleLabel\"\n                                       [showNavigation]=\"!toggleCumulative\"\n                                       [showDateRange]=\"showDateRange\"\n                                       [showVisiblePixelMarkers]=\"showPixelMarkers\"\n                                       [sumFn]=\"refreshManager.sumFn\"\n                                       [sumValues]=\"refreshManager.sumValues\"\n                                       [timeframeContainers]=\"timeframeContainers\"\n                                       [timeframeDates]=\"timeframeDates\">\n                            </raain-map>\n                        </div>\n\n                        <div class=\"data-column\">\n                            <!-- Technical details (collapsible for cleaner UI) -->\n                            <details class=\"technical-details\">\n                                <summary>Image Details</summary>\n                                <div class=\"details-content\">\n                                    <div class=\"detail-row\">\n                                        <span class=\"detail-label\">Computed:</span>\n                                        <span class=\"detail-value\">{{ refreshManager.rainComputationMapDoneDate | date:'yyyy-MM-dd HH:mm' }}</span>\n                                    </div>\n                                    <div class=\"detail-row\">\n                                        <span class=\"detail-label\">Version:</span>\n                                        <span class=\"detail-value\">{{ refreshManager.rainComputationMapVersion }}</span>\n                                    </div>\n                                    <div class=\"detail-row\">\n                                        <span class=\"detail-label\">Launched by:</span>\n                                        <span class=\"detail-value\">{{ refreshManager.rainComputationMapLaunchedBy }}</span>\n                                    </div>\n                                    <div class=\"detail-row\">\n                                        <span class=\"detail-label\">Time spent:</span>\n                                        <span class=\"detail-value\">{{ refreshManager.rainComputationMapTimeSpentInMs }}\n                                            ms</span>\n                                    </div>\n                                    <div class=\"detail-row\">\n                                        <span class=\"detail-label\">Date:</span>\n                                        <span class=\"detail-value\">{{ refreshManager.rainComputationMapDate?.toISOString() }}\n                                            | {{ refreshManager.rainComputationMapDate | date:'yyyy-MM-dd HH:mm' }}</span>\n                                    </div>\n                                    <div class=\"detail-row\">\n                                        <span class=\"detail-label\">Water in the map:</span>\n                                        <span class=\"detail-value\">{{ sumDetails }}</span>\n                                        <ion-toggle\n                                                (ionChange)=\"onTogglePixelMarkers()\"\n                                                [(ngModel)]=\"showPixelMarkers\"\n                                                style=\"margin-left: 8px; transform: scale(0.7);\">\n                                        </ion-toggle>\n                                    </div>\n                                    <div class=\"detail-row\">\n                                        <span class=\"detail-label\">Source DBZ min:</span>\n                                        <span class=\"detail-value\">{{ refreshManager.rainComputationMapOriginalMin }}</span>\n                                    </div>\n                                    <div class=\"detail-row\">\n                                        <span class=\"detail-label\">Source DBZ max:</span>\n                                        <span class=\"detail-value\">{{ refreshManager.rainComputationMapOriginalMax }}</span>\n                                    </div>\n                                </div>\n                            </details>\n                        </div>\n                    </ion-col>\n\n                    <!-- Data panel -->\n                    <ion-col *ngIf=\"!!compareManager.compareVersion && (!toggleCumulative || showCumulativeCompare)\"\n                             class=\"data-column\" size-lg=\"5\" size-md=\"12\">\n                        <div class=\"data-panel\">\n                            <!-- Compare stack component -->\n                            <div class=\"compare-stack\">\n                                <raain-compare-stack\n                                        (selectedPoint)=\"onGaugeSelectInCompare($event)\"\n                                        [compareManager]=\"compareManager\"\n                                        [cumulative]=\"toggleCumulative\">\n                                </raain-compare-stack>\n                            </div>\n\n                            <!-- Technical details (collapsible for cleaner UI) -->\n                            <details class=\"technical-details\">\n                                <summary>Compare Details</summary>\n                                <div class=\"details-content\">\n                                    <div [ngClass]=\"{'warning': refreshManager.rainComputationMapDoneDate?.getTime() > compareManager.currentQualityDoneDate?.getTime() + 60000}\"\n                                         class=\"detail-row\">\n                                        <span class=\"detail-label\">Computed:</span>\n                                        <span class=\"detail-value\">{{ compareManager.currentQualityDoneDate | date:'yyyy-MM-dd HH:mm' }}</span>\n                                    </div>\n                                    <div class=\"detail-row\">\n                                        <span class=\"detail-label\">Version:</span>\n                                        <span class=\"detail-value\">{{ compareManager.compareVersion }}</span>\n                                    </div>\n                                    <div class=\"detail-row\">\n                                        <span class=\"detail-label\">Launched by:</span>\n                                        <span class=\"detail-value\">{{ compareManager.currentQualityLaunchedBy }}</span>\n                                    </div>\n                                    <div class=\"detail-row\">\n                                        <span class=\"detail-label\">Time spent:</span>\n                                        <span class=\"detail-value\">{{ compareManager.currentQualityTimeSpentInMs }}\n                                            ms</span>\n                                    </div>\n                                    <div class=\"detail-row\">\n                                        <span class=\"detail-label\">Gauges:</span>\n                                        <span class=\"detail-value\">{{ compareManager.gaugesInCompare.length }}</span>\n                                    </div>\n                                    <div class=\"detail-row\">\n                                        <span class=\"detail-label\">Points:</span>\n                                        <span class=\"detail-value\">{{ compareManager.globalComparePoints.length }}</span>\n                                    </div>\n                                </div>\n                            </details>\n                        </div>\n                    </ion-col>\n                </ion-row>\n                <ion-row>\n                    <!-- Bottom progress bar -->\n                    <ion-progress-bar *ngIf=\"refreshInProgress\"\n                                      [buffer]=\"(countsPeriod.progress / ((timeframeDates?.length || 10) +3))+0.01\"\n                                      [value]=\"countsPeriod.progress / ((timeframeDates?.length || 10) +3)\"\n                                      color=\"primary\">\n                    </ion-progress-bar>\n                </ion-row>\n            </ion-grid>\n        </ion-card-content>\n    </ion-card>\n\n    <!-- Gauge values section -->\n    <ion-card *ngIf=\"gaugeSelectedPoints.length && gaugeSelectedPoints[0].values.length\" class=\"gauge-card\">\n        <ion-card-header>\n            <ion-card-title>\n                <ion-icon name=\"analytics-outline\"></ion-icon>\n                Selected Gauge Data\n            </ion-card-title>\n        </ion-card-header>\n        <ion-card-content>\n            <raain-date-focus\n                    [currentHeight]=\"300\"\n                    [focusDate]=\"periodBegin\"\n                    [focusRange]=\"DateRange.DAY\"\n                    [points]=\"gaugeSelectedPoints\"\n                    [withoutAll]=\"true\">\n            </raain-date-focus>\n        </ion-card-content>\n    </ion-card>\n\n    <!-- Quality Performance Modal -->\n    <div (click)=\"closeQualityModal()\" *ngIf=\"showQualityModal\" class=\"quality-modal-overlay\">\n        <div (click)=\"$event.stopPropagation()\" class=\"quality-modal-content\">\n            <div class=\"quality-modal-header\">\n                <h2>Model Quality Performance</h2>\n                <ion-button (click)=\"closeQualityModal()\" fill=\"clear\">\n                    <ion-icon name=\"close-outline\"></ion-icon>\n                </ion-button>\n            </div>\n            <div class=\"quality-modal-body\">\n                <div *ngIf=\"qualityIndicatorsLoading\" class=\"quality-loading\">\n                    <ion-spinner name=\"crescent\"></ion-spinner>\n                    <span>Loading indicators...</span>\n                </div>\n                <div *ngIf=\"!qualityIndicatorsLoading && qualityIndicators.length === 0\" class=\"quality-empty\">\n                    No quality indicators available for this year.\n                </div>\n\n                <!-- Performance Chart -->\n                <div *ngIf=\"!qualityIndicatorsLoading && modelPerformanceData.length > 0\" class=\"performance-chart-container\">\n                    <canvas #performanceCanvas></canvas>\n                </div>\n\n                <!-- Details Accordion -->\n                <div *ngIf=\"!qualityIndicatorsLoading && qualityIndicators.length > 0\" class=\"quality-details-section\">\n                    <div (click)=\"showQualityDetails = !showQualityDetails\" class=\"quality-details-toggle\">\n                        <span>Details</span>\n                        <ion-icon [name]=\"showQualityDetails ? 'chevron-up' : 'chevron-down'\"></ion-icon>\n                    </div>\n                    <table *ngIf=\"showQualityDetails\" class=\"quality-table\">\n                        <thead>\n                        <tr>\n                            <th>Model</th>\n                            <th>Compare</th>\n                            <th>Gauges</th>\n                            <th>Period</th>\n                            <th>Avg Quality</th>\n                            <th>Updated</th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                        <tr *ngFor=\"let indicator of qualityIndicators\">\n                            <td>{{ indicator.computingVersion }}</td>\n                            <td>{{ indicator.qualityVersion }}</td>\n                            <td>{{ indicator.provider }}<br>{{ indicator.timeStepInMinutes }} min</td>\n                            <td>{{ formatDate(indicator.startDate) }}<br>{{ formatDate(indicator.endDate) }}</td>\n                            <td>{{ indicator.averageQuality | number:'1.2-2' }}</td>\n                            <td>{{ formatDate(indicator.lastUpdatedAt) }}</td>\n                        </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- Cumulative Selector Modal -->\n    <cumulative-selector (cancelled)=\"onCumulativeSelectorCancelled()\"\n                         (periodSelected)=\"onCumulativePeriodSelected($event)\"\n                         *ngIf=\"showCumulativeSelector\"\n                         [currentPeriodBegin]=\"periodBegin\"\n                         [currentPeriodEnd]=\"periodEnd\"\n                         [isAdmin]=\"toggleAdmin\"\n                         [provider]=\"selectedProvider\"\n                         [rainId]=\"rainNode?.id\"\n                         [timeStepInMinutes]=\"selectedTimeStep\">\n    </cumulative-selector>\n\n</div>\n","import {\n    AfterViewChecked,\n    Component,\n    ElementRef,\n    HostListener,\n    Input,\n    NgZone,\n    OnChanges,\n    OnDestroy,\n    SimpleChanges,\n    ViewChild,\n} from '@angular/core';\nimport {EarthMapElement, EarthMapElementInput, ElementsFactory} from 'raain-ui';\n\n@Component({\n    selector: 'raain-globe',\n    templateUrl: './raain-globe.component.html',\n    styleUrls: ['./raain-globe.component.scss'],\n})\nexport class RaainGlobeComponent implements AfterViewChecked, OnDestroy, OnChanges {\n    @Input()\n    public points: {\n        label: string;\n        style: string;\n        values: {date: Date; value: number}[];\n    }[];\n\n    @Input()\n    public currentHeight: number;\n    public currentWidth: number;\n\n    @ViewChild('canvasElement')\n    protected canvasElement: ElementRef;\n\n    private earthMapElement: EarthMapElement;\n    private onSizeChanged;\n    private created: boolean;\n\n    constructor(private ngZone: NgZone) {\n        this.onSizeChanged = () => {};\n    }\n\n    public ngAfterViewChecked(): void {\n        this.create();\n    }\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        this.change(changes);\n    }\n\n    public ngOnDestroy(): void {\n        this.delete();\n    }\n\n    @HostListener('window:resize', ['$event'])\n    private onResize(event: any): void {\n        this.updateMapSize();\n    }\n\n    private create() {\n        if (this.created) {\n            return;\n        }\n        this.created = true;\n\n        this.ngZone.runOutsideAngular(() => {\n            setTimeout(() => {\n                const factory = new ElementsFactory();\n                try {\n                    this.earthMapElement = factory.createEarthMap(\n                        this.canvasElement.nativeElement,\n                        new EarthMapElementInput()\n                    );\n                } catch (e) {\n                    console.warn('Dynamic focus creation issue', e);\n                }\n            }, 100);\n        });\n    }\n\n    private async delete() {\n        // await this.earthMapElement?.destroy();\n        this.created = false;\n    }\n\n    private async change(changes: SimpleChanges) {\n        await this.delete();\n        this.create();\n    }\n\n    private updateMapSize(): void {\n        const mapDivWidth = this.canvasElement.nativeElement.parentNode?.parentNode['clientWidth'];\n        const padding = 20;\n        let currentWidth =\n            mapDivWidth ||\n            window.innerWidth ||\n            document.documentElement.clientWidth ||\n            document.body.clientWidth;\n        const currentHeight =\n            this.currentHeight ||\n            window.innerHeight ||\n            document.documentElement.clientHeight ||\n            document.body.clientHeight;\n        currentWidth -= padding;\n        this.currentWidth = currentWidth;\n        this.currentHeight = currentHeight;\n\n        this.ngZone.run(() => {\n            this.onSizeChanged();\n        });\n    }\n}\n","<ion-grid>\n  <ion-row>\n    <ion-col id=\"col-container\" size-sm=\"12\">\n      <div #canvasElement [style.height.px]=\"currentHeight\" id=\"canvas-container\">\n      </div>\n    </ion-col>\n  </ion-row>\n</ion-grid>\n","import {\n    AfterViewChecked,\n    ChangeDetectorRef,\n    Component,\n    ElementRef,\n    EventEmitter,\n    HostListener,\n    Input,\n    NgZone,\n    OnChanges,\n    OnDestroy,\n    Output,\n    SimpleChanges,\n    ViewChild,\n} from '@angular/core';\nimport {CartesianTools} from 'raain-model';\nimport {LatLngBounds} from 'leaflet';\nimport {\n    CartesianMapValue,\n    ChartScaleColors,\n    ElementsFactory,\n    FrameContainer,\n    MapElement,\n    MapLatLng,\n    RaainDivIcon,\n    ScaleElement,\n    ScaleElementInput,\n    TimeframeContainers,\n} from 'raain-ui';\nimport {Storage} from '../storage.service';\n\n@Component({\n    selector: 'raain-map',\n    templateUrl: './raain-map.component.html',\n    styleUrls: ['./raain-map.component.scss'],\n})\nexport class RaainMapComponent implements AfterViewChecked, OnDestroy, OnChanges {\n    @Input()\n    public coordinates?: MapLatLng;\n    @Input()\n    public markers?: {\n        gauges?: MapLatLng[];\n        selectedGauges?: MapLatLng[];\n        pixels?: MapLatLng[];\n        borders?: MapLatLng[];\n        speeds?: MapLatLng[];\n        gaugesInCompare?: MapLatLng[];\n        pixelsSolution?: MapLatLng[];\n    };\n    @Input()\n    public timeframeContainers?: TimeframeContainers;\n    @Input()\n    public autoplay = false;\n    @Input()\n    public showMarkers = true;\n    @Input()\n    public showSpeedMarkers = true;\n    @Input()\n    public showVisiblePixelMarkers = false;\n    @Input()\n    public showNavigation = true;\n    @Input()\n    public showDateRange = true;\n    @Input()\n    public cumulativeDurationInMinutes = 60;\n    @Input()\n    public scaleLabel = 'mm';\n    @Input()\n    public currentHeight: number;\n\n    public showMapSettings = false;\n    public currentWidth: number;\n\n    @Input()\n    public timeframeDates: Date[] = [];\n    @Input()\n    public defaultDate?: Date;\n\n    @Input()\n    public sumValues?: CartesianMapValue[];\n    @Input()\n    public sumFn?: (cartesianMapValues: CartesianMapValue[]) => number;\n    public sumResult: string;\n\n    @Output()\n    public selectedMarker = new EventEmitter<MapLatLng>();\n\n    @Output()\n    public changedDate = new EventEmitter<Date>();\n\n    @Output()\n    public changedSum = new EventEmitter<string>();\n\n    public alpha: number;\n    public mcText;\n    public nextDate: Date;\n    public possibleNames: string[];\n    public possibleDates: Date[];\n    public dateToShow: Date;\n    public dateToShowAsString: string;\n    public timeframeNameToShow: string;\n    public pixelsCount: number;\n    public cumulativeDateFrom: Date;\n    protected currentFrameContainer: FrameContainer;\n    protected cartesianTools: CartesianTools;\n    @ViewChild('primaryMap')\n    protected mapDivRef: ElementRef;\n    @ViewChild('canvasScale')\n    protected scaleCanvasRef: ElementRef;\n    private visiblePixelMarkers: MapLatLng[] = [];\n    private mapElement: MapElement;\n    private scaleElement: ScaleElement;\n\n    private onSizeChanged;\n    private created;\n    private readonly raainDivIcons: {\n        gauges: RaainDivIcon;\n        selectedGauges: RaainDivIcon;\n        pixels: RaainDivIcon;\n        borders: RaainDivIcon;\n        speeds: RaainDivIcon;\n        gaugesInCompare: RaainDivIcon;\n        pixelsSolution: RaainDivIcon;\n    };\n\n    constructor(\n        private readonly ngZone: NgZone,\n        private readonly storage: Storage,\n        private readonly cdr: ChangeDetectorRef\n    ) {\n        this.delete();\n\n        this.cartesianTools = new CartesianTools();\n        this.pixelsCount = 1;\n\n        const iconSize: [number, number] = [40, 40]; // size of the icon\n        const iconAnchor: [number, number] = [20, 20]; // point of the icon which will correspond to marker's location\n        const pixelSize: [number, number] = [41, 41];\n        const pixelAnchor: [number, number] = [20, 20];\n        const popupAnchor: [number, number] = [0, -20]; // point from which the popup should open relative to the iconAnchor\n\n        this.raainDivIcons = {\n            gauges: new RaainDivIcon({\n                html: '<img src=\"./assets/maps/marker-pluvio.png\" style=\"width: 100%; height: 100%;\" />',\n                iconSize,\n                iconAnchor,\n            }),\n            gaugesInCompare: new RaainDivIcon({\n                html: '<img src=\"./assets/maps/marker-pluvio-diag.png\" style=\"width: 100%; height: 100%;\" />',\n                iconSize,\n                iconAnchor,\n                popupAnchor,\n            }),\n            selectedGauges: new RaainDivIcon({\n                html: '<img src=\"./assets/maps/marker-pluvio-diag-select.png\" style=\"width: 100%; height: 100%;\" />',\n                iconSize,\n                iconAnchor,\n                popupAnchor,\n            }),\n            pixels: new RaainDivIcon({\n                html: '<img src=\"./assets/maps/marker-rain.png\" style=\"width: 100%; height: 100%;\" />',\n                iconSize,\n                iconAnchor,\n                popupAnchor,\n            }),\n            pixelsSolution: new RaainDivIcon({\n                html: '<img src=\"./assets/maps/marker-rain.png\" style=\"width: 100%; height: 100%;\" />',\n                iconSize: pixelSize,\n                iconAnchor: pixelAnchor,\n                popupAnchor,\n            }),\n            borders: new RaainDivIcon({\n                html: '<img src=\"./assets/maps/marker-shadow.png\" style=\"width: 100%; height: 100%;\" />',\n                iconSize,\n                iconAnchor,\n                popupAnchor,\n            }),\n            speeds: new RaainDivIcon({\n                html: '<img src=\"./assets/maps/marker-speed.svg\" style=\"width: 100%; height: 100%;\" />',\n                iconSize,\n                iconAnchor,\n                popupAnchor,\n            }),\n        };\n    }\n\n    public ngAfterViewChecked(): void {\n        this.create();\n    }\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        this.change(changes);\n    }\n\n    public ngOnDestroy(): void {\n        this.delete();\n    }\n\n    public showTimeframe(force = false) {\n        if (\n            !this.dateToShowAsString ||\n            (!force && this.areDatesEqual(this.dateToShowAsString, this.dateToShow))\n        ) {\n            return;\n        }\n\n        this.dateToShow = new Date(this.dateToShowAsString);\n        this.changedDate.emit(this.dateToShow);\n    }\n\n    public next() {\n        if (!this.possibleDates || this.possibleDates.length === 0) {\n            return;\n        }\n\n        const index = this.getDateToShowIndex();\n        this.dateToShow =\n            index + 1 < this.possibleDates.length\n                ? this.possibleDates[index + 1]\n                : this.possibleDates[0];\n        this.dateToShowAsString = this.dateToShow.toISOString();\n\n        this.showTimeframe(true);\n        if (this.autoplay) {\n            window.setTimeout(() => this.next(), 2000);\n        }\n    }\n\n    public previous() {\n        this.stop();\n        if (!this.possibleDates || this.possibleDates.length === 0) {\n            return;\n        }\n\n        const index = this.getDateToShowIndex();\n        this.dateToShow = index > 0 ? this.possibleDates[index - 1] : this.possibleDates[0];\n        this.dateToShowAsString = this.dateToShow.toISOString();\n\n        this.showTimeframe(true);\n    }\n\n    public play() {\n        this.autoplay = true;\n        this.next();\n    }\n\n    public stop() {\n        this.autoplay = false;\n    }\n\n    public changeShowMarkers() {\n        if (!this.mapElement?.markersLayer || !this.mapElement?.mapLeaflet) {\n            return;\n        }\n\n        if (this.showMarkers) {\n            this.mapElement.markersLayer.addToMap(this.mapElement.mapLeaflet);\n        } else {\n            this.mapElement.markersLayer.removeFromMap(this.mapElement.mapLeaflet);\n        }\n    }\n\n    public changeShowSpeedMarkers() {\n        if (!this.mapElement?.markersLayer || !this.mapElement?.mapLeaflet) {\n            return;\n        }\n\n        // Rebuild markers with current visibility settings\n        const {allMarkers} = this.buildMarkersConfig();\n        const markersProduced = this.mapElement.updateMarkers(allMarkers);\n        if (markersProduced?.length) {\n            this.bindMarkersClickEvents(markersProduced);\n            if (this.showMarkers) {\n                this.mapElement.markersLayer.removeFromMap(this.mapElement.mapLeaflet);\n                this.mapElement.markersLayer.addToMap(this.mapElement.mapLeaflet);\n            }\n        }\n    }\n\n    public changeAlpha() {\n        this.storage.set('raain-map-alpha', this.alpha);\n        if (!this.mapElement?.mapLeaflet) {\n            return;\n        }\n\n        this.mapElement.alpha = 0.3 + this.alpha * 0.7;\n        this.mapElement.mapLeaflet.eachLayer((layer: any) => {\n            if (layer._container?.style) {\n                layer._container.style.filter = `brightness(${(10 - this.alpha * 10) * 10}%)`; // invert(1) ?\n            }\n        });\n    }\n\n    public toggleMapSettings() {\n        this.showMapSettings = !this.showMapSettings;\n    }\n\n    private create() {\n        const created = this.created;\n        if (created) {\n            return;\n        }\n        this.created = true;\n\n        const {allMarkers} = this.buildMarkersConfig();\n\n        const factory = new ElementsFactory(this.coordinates, true);\n        this.createScale(factory, this.scaleLabel);\n\n        this.ngZone.runOutsideAngular(() => {\n            setTimeout(() => {\n                const createdOutside = this.created;\n                if (!createdOutside) {\n                    return;\n                }\n\n                this.mapElement = factory.createMap(this.mapDivRef.nativeElement, {\n                    timeframeContainers: this.timeframeContainers,\n                    markers: allMarkers,\n                });\n\n                this.changeAlpha();\n\n                this.mapElement.mapLeaflet?.on('mousemove', (evt) => this.onMapMouseMove(evt));\n                this.mapElement.mapLeaflet?.on('zoom', (evt) => this.onZoom(evt));\n                this.mapElement.mapLeaflet?.on('moveend', (evt) => this.onMoveEnd(evt));\n                const bounds: LatLngBounds = this.mapElement.mapLeaflet.getBounds();\n                this.pixelsCount = this.cartesianTools.howManyPixelsInEarthMap(\n                    bounds._southWest,\n                    bounds._northEast\n                );\n\n                this.bindMarkersClickEvents(this.mapElement.markersProduced);\n                this.onSizeChanged = () => this.updateLayerDimensions();\n                this.updateMapSize();\n                this.changeNavigation(this.defaultDate);\n            }, 100);\n        });\n    }\n\n    private delete() {\n        this.mapElement?.mapLeaflet?.remove();\n        this.mapElement = undefined;\n        this.mcText = '';\n        this.nextDate = undefined;\n        this.possibleNames = [];\n        this.possibleDates = [];\n        this.timeframeNameToShow = undefined;\n        this.dateToShow = undefined;\n        this.dateToShowAsString = undefined;\n        this.cumulativeDateFrom = undefined;\n        this.onSizeChanged = () => {};\n        this.currentFrameContainer = null;\n\n        this.created = false;\n        this.alpha = this.storage.get('raain-map-alpha', 0.4);\n    }\n\n    private change(changes: SimpleChanges) {\n        let possibleNewDefaultDate: Date;\n\n        if (changes.defaultDate) {\n            if (\n                this.areDatesEqual(\n                    changes.defaultDate.currentValue,\n                    changes.defaultDate.previousValue\n                )\n            ) {\n                return;\n            }\n            possibleNewDefaultDate = this.defaultDate;\n        }\n\n        if (changes.markers && this.mapElement?.markersLayer) {\n            const {allMarkers} = this.buildMarkersConfig();\n            const markersProduced = this.mapElement.updateMarkers(allMarkers);\n            if (markersProduced?.length) {\n                this.bindMarkersClickEvents(markersProduced);\n                if (this.showMarkers) {\n                    this.mapElement.markersLayer.removeFromMap(this.mapElement.mapLeaflet);\n                    this.mapElement.markersLayer.addToMap(this.mapElement.mapLeaflet);\n                }\n            }\n        }\n\n        if (\n            changes.markers &&\n            this.markers?.selectedGauges &&\n            this.markers?.selectedGauges.length === 1\n        ) {\n            const selectedGauge = this.markers.selectedGauges[0];\n            this.mapElement?.mapLeaflet?.setView(selectedGauge, 10);\n        }\n\n        if (this.mapElement && changes.timeframeContainers) {\n            this.updateTimeframe();\n        }\n\n        if (this.mapElement?.compositeLayer && changes.sumValues) {\n            this.updateSum();\n        }\n\n        if (this.mapElement?.compositeLayer && changes.showVisiblePixelMarkers) {\n            const drawer = this.mapElement.compositeLayer.getFirstDrawer();\n            this.updateVisiblePixelMarkers(drawer);\n        }\n\n        this.changeNavigation(possibleNewDefaultDate);\n    }\n\n    private updateSum() {\n        if (!this.sumValues || !this.sumFn) {\n            return;\n        }\n\n        const drawer = this.mapElement.compositeLayer.getFirstDrawer();\n        const sumOfPixels: number = drawer?.getExecOfWindowPoints(this.sumValues, this.sumFn) ?? -1;\n\n        if (sumOfPixels >= 0 && this.pixelsCount > 0) {\n            const average = Math.round((sumOfPixels / this.pixelsCount) * 100) / 100;\n            this.sumResult = `${Math.round(sumOfPixels)}mm (avg of ${average}mm for ${Math.round(this.pixelsCount)} pixels)`;\n        } else {\n            this.sumResult = 'NA';\n        }\n        this.changedSum.emit(this.sumResult);\n\n        this.updateVisiblePixelMarkers(drawer);\n    }\n\n    private updateVisiblePixelMarkers(drawer: any) {\n        if (!this.showVisiblePixelMarkers || !drawer || !this.sumValues) {\n            if (this.visiblePixelMarkers.length > 0) {\n                this.visiblePixelMarkers = [];\n                this.refreshMarkersLayer();\n            }\n            return;\n        }\n\n        // Extract visible pixel positions\n        const visiblePixels: MapLatLng[] =\n            drawer.getExecOfWindowPoints(this.sumValues, (values: CartesianMapValue[]) =>\n                values.map((v) => ({\n                    lat: (v.lat + v.lat2) / 2,\n                    lng: (v.lng + v.lng2) / 2,\n                    value: v.value,\n                }))\n            ) ?? [];\n\n        this.visiblePixelMarkers = visiblePixels;\n        this.refreshMarkersLayer();\n    }\n\n    private refreshMarkersLayer() {\n        if (!this.mapElement?.markersLayer || !this.mapElement?.mapLeaflet) {\n            return;\n        }\n\n        const {allMarkers} = this.buildMarkersConfig();\n        const markersProduced = this.mapElement.updateMarkers(allMarkers);\n        if (markersProduced?.length) {\n            this.bindMarkersClickEvents(markersProduced);\n            if (this.showMarkers) {\n                this.mapElement.markersLayer.removeFromMap(this.mapElement.mapLeaflet);\n                this.mapElement.markersLayer.addToMap(this.mapElement.mapLeaflet);\n            }\n        }\n    }\n\n    private changeNavigation(defaultDate?: Date) {\n        // update possible names\n        if (this.timeframeContainers?.containers?.length) {\n            this.possibleNames = [];\n            this.timeframeContainers.containers.forEach((c) => {\n                if (this.possibleNames.indexOf(c.name) < 0) {\n                    this.possibleNames.push(c.name);\n                }\n            });\n            this.timeframeNameToShow = this.possibleNames.length > 0 ? this.possibleNames[0] : null;\n        }\n\n        // update possible dates\n        this.possibleDates = this.timeframeDates;\n        if (!this.possibleDates || this.possibleDates.length === 0) {\n            return;\n        }\n\n        // update dateToShow\n        if (\n            defaultDate &&\n            this.possibleDates.filter((d) => this.areDatesEqual(d, defaultDate)).length === 1\n        ) {\n            this.dateToShow = defaultDate;\n        }\n        if (\n            !this.dateToShow &&\n            this.possibleDates.length > 0 &&\n            this.possibleDates.filter((d) => this.areDatesEqual(d, this.dateToShow)).length !== 1\n        ) {\n            this.dateToShow = this.possibleDates[0];\n        }\n\n        let firstInit = false;\n        if (!this.dateToShowAsString) {\n            firstInit = true;\n        }\n        this.dateToShowAsString = this.dateToShow.toISOString();\n        this.cumulativeDateFrom = new Date(this.dateToShow);\n\n        const durationInMs = this.cumulativeDurationInMinutes * 60 * 1000;\n        this.cumulativeDateFrom.setTime(this.cumulativeDateFrom.getTime() - durationInMs);\n\n        if (firstInit) {\n            this.showTimeframe(true);\n        }\n    }\n\n    private getDateToShowIndex(): number {\n        let index = 0;\n        for (const date of this.possibleDates) {\n            if (this.areDateISOEqual(this.dateToShowAsString, date)) {\n                break;\n            }\n            index++;\n        }\n        return index;\n    }\n\n    private onZoom(evt: any) {\n        const map = evt.target;\n        const bounds: LatLngBounds = map.getBounds();\n        this.pixelsCount = this.cartesianTools.howManyPixelsInEarthMap(\n            bounds._southWest,\n            bounds._northEast\n        );\n        this.updateSum();\n    }\n\n    private onMoveEnd(evt: any) {\n        const map = evt.target;\n        const bounds: LatLngBounds = map.getBounds();\n        this.pixelsCount = this.cartesianTools.howManyPixelsInEarthMap(\n            bounds._southWest,\n            bounds._northEast\n        );\n        this.updateSum();\n    }\n\n    private handleAvailablePixels(\n        availablePixels: {width: number; height: number; totalPixels: number},\n        bounds: any,\n        zoom: number\n    ) {\n        // Update your component properties or perform calculations\n        this.currentWidth = availablePixels.width;\n        this.currentHeight = availablePixels.height;\n\n        // You can also calculate pixel density or other metrics here\n        // const pixelDensity = this.calculatePixelDensity(bounds, availablePixels, zoom);\n        // console.log('Pixel density:', pixelDensity);\n    }\n\n    private calculatePixelDensity(\n        bounds: any,\n        availablePixels: {width: number; height: number},\n        zoom: number\n    ) {\n        // Calculate how many meters per pixel (approximate)\n        const earthCircumference = 40075016.686; // meters\n        const metersPerPixel =\n            (earthCircumference * Math.cos((bounds.getCenter().lat * Math.PI) / 180)) /\n            Math.pow(2, zoom + 8);\n\n        return {\n            metersPerPixel,\n            pixelsPerMeter: 1 / metersPerPixel,\n            totalVisibleArea: availablePixels.width * availablePixels.height,\n        };\n    }\n\n    private onMapMouseMove(evt: {latlng: {lat: number; lng: number}}): void {\n        const lat: string = evt.latlng.lat.toFixed(3);\n        const lng: string = evt.latlng.lng.toFixed(3);\n\n        let value = NaN;\n        let valueLat = NaN,\n            valueLng = NaN,\n            valueLat2 = NaN,\n            valueLng2 = NaN;\n        if (this.currentFrameContainer) {\n            const valueSelected = (this.currentFrameContainer.values as CartesianMapValue[]).filter(\n                (v: CartesianMapValue) => {\n                    return (\n                        v.lat <= evt.latlng.lat &&\n                        evt.latlng.lat < v.lat2 &&\n                        v.lng <= evt.latlng.lng &&\n                        evt.latlng.lng < v.lng2\n                    );\n                }\n            );\n\n            if (valueSelected.length === 1) {\n                value = this.roundTo3Decimals(valueSelected[0].value);\n                valueLat = this.roundTo3Decimals(valueSelected[0].lat);\n                valueLng = this.roundTo3Decimals(valueSelected[0].lng);\n                valueLat2 = this.roundTo3Decimals(valueSelected[0].lat2);\n                valueLng2 = this.roundTo3Decimals(valueSelected[0].lng2);\n            } else {\n                // console.warn('valueSelected issue ?', valueSelected);\n            }\n        }\n\n        this.ngZone.run(() => {\n            // this.mcText = `Latitude: ${lat} &nbsp; &nbsp; Longitude: ${lng} &nbsp; &nbsp;\n            //    Value: [${valueLat} ${valueLng} | ${valueLat2} ${valueLng2}] ${value}`;\n            this.mcText = `Latitude: ${lat} &nbsp; &nbsp; Longitude: ${lng} &nbsp; &nbsp; Value: ${value}`;\n            this.cdr.markForCheck();\n        });\n    }\n\n    private onMapClick(evt: any): void {\n        if (!this.markers?.gauges?.length) {\n            return;\n        }\n\n        let selectedGauge: MapLatLng;\n        for (const gauge of this.markers.gauges) {\n            if (gauge.id === evt?.target?.options?.alt) {\n                selectedGauge = gauge;\n                break;\n            }\n        }\n\n        if (selectedGauge) {\n            this.markers.selectedGauges = [selectedGauge];\n            this.selectedMarker.emit(\n                new MapLatLng(\n                    selectedGauge.lat,\n                    selectedGauge.lng,\n                    undefined,\n                    selectedGauge.id,\n                    selectedGauge.name,\n                    selectedGauge.value\n                )\n            );\n        } else {\n            this.selectedMarker.emit(\n                new MapLatLng(evt.latlng?.lat, evt.latlng?.lng, undefined, evt.id, evt.name)\n            );\n        }\n\n        this.change({markers: ['changed']} as any);\n    }\n\n    @HostListener('window:resize', ['$event'])\n    private onResize(event: any): void {\n        this.updateMapSize();\n    }\n\n    private updateMapSize(): void {\n        const mapDivWidth = this.mapDivRef.nativeElement.parentNode?.parentNode['clientWidth'];\n        const padding = 21;\n        let currentWidth =\n            mapDivWidth ||\n            window.innerWidth ||\n            document.documentElement.clientWidth ||\n            document.body.clientWidth;\n        const currentHeight =\n            this.currentHeight ||\n            window.innerHeight ||\n            document.documentElement.clientHeight ||\n            document.body.clientHeight;\n        currentWidth -= padding;\n        this.currentWidth = currentWidth;\n        this.currentHeight = currentHeight;\n\n        this.ngZone.run(() => {\n            this.onSizeChanged();\n        });\n    }\n\n    private updateTimeframe() {\n        if (\n            this.timeframeContainers?.containers?.length &&\n            this.timeframeContainers?.containers[0]?.timeframe?.length\n        ) {\n            this.mapElement.updateMapTimeframe(this.timeframeContainers);\n            this.currentFrameContainer = this.timeframeContainers?.containers[0]?.timeframe[0];\n        }\n\n        this.changeAlpha();\n    }\n\n    private createScale(factory: ElementsFactory, label: string) {\n        this.deleteScale();\n        if (!this.scaleCanvasRef?.nativeElement) {\n            return;\n        }\n\n        const entries = Object.entries(ChartScaleColors);\n        entries.sort((a, b) => parseFloat(a[0]) - parseFloat(b[0]));\n        const sortedMap = new Map(entries);\n        const sortedArray = [...sortedMap.entries()];\n        const scaleColors = sortedArray.map((entry) => {\n            return {color: entry[1]};\n        });\n        const scaleLabels = sortedArray.map((entry) => entry[0]);\n        this.scaleElement = factory.createScale(\n            this.scaleCanvasRef.nativeElement,\n            new ScaleElementInput(scaleColors, scaleLabels, label)\n        );\n    }\n\n    private deleteScale() {\n        if (this.scaleElement) {\n            this.scaleElement?.chart?.destroy();\n        }\n    }\n\n    /**\n     * Builds the markers configuration array for the map\n     * @returns Array of marker configurations with icons and positions\n     */\n    private buildMarkersConfig() {\n        const allMarkers: {iconsLatLng: MapLatLng[]; raainDivIcon: RaainDivIcon}[] = [\n            {iconsLatLng: this.markers?.gauges ?? [], raainDivIcon: this.raainDivIcons.gauges},\n            {\n                iconsLatLng: this.markers?.selectedGauges ?? [],\n                raainDivIcon: this.raainDivIcons.selectedGauges,\n            },\n            {\n                iconsLatLng: this.markers?.gaugesInCompare ?? [],\n                raainDivIcon: this.raainDivIcons.gaugesInCompare,\n            },\n            {iconsLatLng: this.markers?.pixels ?? [], raainDivIcon: this.raainDivIcons.pixels},\n            {\n                iconsLatLng: this.markers?.pixelsSolution ?? [],\n                raainDivIcon: this.raainDivIcons.pixelsSolution,\n            },\n            // {iconsLatLng: this.markers?.borders, raainDivIcon: this.raainDivIcons.borders},\n        ];\n\n        if (this.showVisiblePixelMarkers && this.visiblePixelMarkers.length > 0) {\n            allMarkers.push({\n                iconsLatLng: this.visiblePixelMarkers,\n                raainDivIcon: this.raainDivIcons.pixelsSolution,\n            });\n        }\n\n        if (this.showSpeedMarkers) {\n            for (const marker of this.markers?.speeds ?? []) {\n                // Calculate dynamic size based on speed (marker.value is in m/s)\n                // Base size: 20px, scale up with speed (typical range: 1-20 m/s)\n                const speedInMetersPerSec = marker.value ?? 5;\n                const minSize = 20;\n                const maxSize = 60;\n                const minSpeed = 1;\n                const maxSpeed = 20;\n\n                // Linear interpolation: size increases with speed\n                const normalizedSpeed = Math.max(minSpeed, Math.min(maxSpeed, speedInMetersPerSec));\n                const size =\n                    minSize +\n                    ((normalizedSpeed - minSpeed) / (maxSpeed - minSpeed)) * (maxSize - minSize);\n                const iconSize = Math.round(size);\n\n                allMarkers.push({\n                    iconsLatLng: [marker],\n                    raainDivIcon: new RaainDivIcon({\n                        html: this.raainDivIcons.speeds.options.html,\n                        width: iconSize,\n                        height: iconSize,\n                        iconAnchor: [iconSize / 2, iconSize / 2], // Center the icon\n                        popupAnchor: this.raainDivIcons.speeds.options.popupAnchor,\n                        rotationAngle: marker.alt, // Use alt property for azimuth/direction\n                        className: this.raainDivIcons.speeds.options.className,\n                    }),\n                });\n            }\n        }\n        return {allMarkers};\n    }\n\n    /**\n     * Compare two dates for equality using their timestamps\n     * @param date1 First date (Date or string)\n     * @param date2 Second date (Date or string)\n     * @returns true if dates are equal\n     */\n    private areDatesEqual(date1: Date | string, date2: Date | string): boolean {\n        if (!date1 || !date2) {\n            return false;\n        }\n        const timestamp1 = typeof date1 === 'string' ? new Date(date1).getTime() : date1.getTime();\n        const timestamp2 = typeof date2 === 'string' ? new Date(date2).getTime() : date2.getTime();\n        return timestamp1 === timestamp2;\n    }\n\n    /**\n     * Compare an ISO date string with a Date object (comparing first 19 characters)\n     * @param dateISO ISO date string\n     * @param date Date object\n     * @returns true if dates match (up to seconds precision)\n     */\n    private areDateISOEqual(dateISO: string, date: Date): boolean {\n        if (!dateISO || !date) {\n            return false;\n        }\n        return dateISO.substring(0, 19) === date.toISOString().substring(0, 19);\n    }\n\n    /**\n     * Bind click event handlers to markers\n     * @param markers Array of marker objects to bind events to\n     */\n    private bindMarkersClickEvents(markers: any[]): void {\n        if (!markers) {\n            return;\n        }\n        markers.forEach((m) => m.on('click', (evt) => this.onMapClick(evt)));\n    }\n\n    /**\n     * Round a number to 3 decimal places\n     * @param value Number to round\n     * @returns Rounded number\n     */\n    private roundTo3Decimals(value: number): number {\n        return Math.round(value * 1000) / 1000;\n    }\n\n    /**\n     * Update layer dimensions and invalidate map size\n     */\n    private updateLayerDimensions(): void {\n        if (!this.mapElement) {\n            return;\n        }\n        this.mapElement.markersLayer?.setCurrentWidth(this.currentWidth);\n        this.mapElement.markersLayer?.setCurrentHeight(this.currentHeight);\n        this.mapElement.compositeLayer?.setCurrentWidth(this.currentWidth);\n        this.mapElement.compositeLayer?.setCurrentHeight(this.currentHeight);\n        this.mapElement.mapLeaflet?.invalidateSize({animate: true});\n    }\n}\n","<ion-grid>\n\n    <ion-row class=\"ion-align-items-center ion-justify-content-center\" id=\"map-nav-row\">\n        <ion-icon (click)=\"previous()\" *ngIf=\"showNavigation\" class=\"nav-icon\" color=\"medium\"\n                  name=\"chevron-back-circle\"></ion-icon>\n\n        <ion-label *ngIf=\"showDateRange\" class=\"period-bracket\">[</ion-label>\n\n        <ion-label *ngIf=\"showDateRange && timeframeContainers?.containers?.length\" class=\"date-label\">\n            {{ cumulativeDateFrom | date:'yyyy-MM-dd HH:mm' }}\n        </ion-label>\n\n        <ion-label *ngIf=\"showDateRange\">&nbsp; &nbsp;</ion-label>\n\n        <ion-select (ionDismiss)=\"showTimeframe()\" *ngIf=\"timeframeContainers?.containers?.length\"\n                    [(ngModel)]=\"dateToShowAsString\" interface=\"popover\"\n                    placeholder=\"Period\" value=\"{{dateToShowAsString}}\">\n            <ion-select-option *ngFor=\"let dateToSelect of possibleDates\"\n                               value=\"{{dateToSelect.toISOString()}}\">\n                {{ dateToSelect | date:'yyyy-MM-dd HH:mm' }}\n            </ion-select-option>\n        </ion-select>\n\n        <ion-label *ngIf=\"showDateRange\" class=\"period-bracket\">[</ion-label>\n\n        <ion-icon (click)=\"next()\" *ngIf=\"showNavigation\" class=\"nav-icon\" color=\"medium\"\n                  name=\"chevron-forward-circle\"></ion-icon>\n    </ion-row>\n\n    <ion-row>\n        <ion-col size-lg=\"10\" size-xs=\"12\">\n            <div [style.height.px]=\"currentHeight\" id=\"map-container\">\n                <div #primaryMap id=\"map-div\"></div>\n            </div>\n        </ion-col>\n        <ion-col class=\"ion-hide-xl-down\" size-lg=\"2\">\n            <div [style.height.px]=\"currentHeight\" [style.width.px]=\"60\">\n                <canvas #canvasScale></canvas>\n            </div>\n        </ion-col>\n    </ion-row>\n\n    <ion-row class=\"ion-align-items-center\">\n        <ion-col size-xs=\"3\">\n            <ion-button (click)=\"toggleMapSettings()\" color=\"medium\" fill=\"clear\" id=\"map-settings-toggle\">\n                <ion-icon name=\"map-outline\" slot=\"start\"></ion-icon>\n                <ion-icon [name]=\"showMapSettings ? 'chevron-down' : 'chevron-forward'\" slot=\"end\"></ion-icon>\n            </ion-button>\n        </ion-col>\n        <ion-col class=\"ion-hide-sm-down\" size-sm=\"7\">\n            <span [innerHTML]=\"mcText\"></span>\n        </ion-col>\n\n    </ion-row>\n\n    <ion-row *ngIf=\"showMapSettings\" id=\"map-settings\">\n        <ion-col size=\"12\">\n            <ion-list lines=\"none\">\n                <ion-item>\n                    <ion-label>Opacity</ion-label>\n                    <ion-range (ionChange)=\"changeAlpha()\" [(ngModel)]=\"alpha\" [max]=\"1\" [min]=\"0.2\" [snaps]=\"true\"\n                               [step]=\"0.2\" [ticks]=\"true\" class=\"settings-range\" color=\"medium\" slot=\"end\"></ion-range>\n                </ion-item>\n                <ion-item>\n                    <ion-label>Gauges</ion-label>\n                    <ion-toggle (ionChange)=\"changeShowMarkers()\" [(ngModel)]=\"showMarkers\" [checked]=\"showMarkers\"\n                                color=\"medium\" slot=\"end\"></ion-toggle>\n                </ion-item>\n                <ion-item>\n                    <ion-label>Speeds</ion-label>\n                    <ion-toggle (ionChange)=\"changeShowSpeedMarkers()\" [(ngModel)]=\"showSpeedMarkers\"\n                                [checked]=\"showSpeedMarkers\" color=\"medium\" slot=\"end\"></ion-toggle>\n                </ion-item>\n            </ion-list>\n        </ion-col>\n    </ion-row>\n\n</ion-grid>\n","import {\n    AfterViewChecked,\n    Component,\n    ElementRef,\n    HostListener,\n    Input,\n    NgZone,\n    OnChanges,\n    OnDestroy,\n    SimpleChanges,\n    ViewChild,\n} from '@angular/core';\nimport {ElementsFactory, SpeedMatrixElementInput} from 'raain-ui';\nimport {PositionValue} from 'raain-model';\n\n@Component({\n    selector: 'raain-speed',\n    templateUrl: './raain-speed.component.html',\n    styleUrls: ['./raain-speed.component.scss'],\n})\nexport class RaainSpeedComponent implements AfterViewChecked, OnDestroy, OnChanges {\n    @Input()\n    public compareSpeedMatrix: PositionValue[];\n\n    @Input()\n    public compareTrustedIndicator: number;\n\n    @Input()\n    public currentHeight: number;\n    public currentWidth: number;\n    public hide = false;\n    @ViewChild('canvasSpeedElement')\n    protected canvasSpeedElement: ElementRef;\n    private onSizeChanged;\n    private created;\n\n    constructor(private ngZone: NgZone) {\n        this.delete();\n        this.onSizeChanged = () => {};\n    }\n\n    public ngAfterViewChecked(): void {\n        this.create();\n    }\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        this.change(changes);\n    }\n\n    public ngOnDestroy(): void {\n        this.delete();\n    }\n\n    @HostListener('window:resize', ['$event'])\n    private onResize(event: any): void {\n        this.updateMapSize();\n    }\n\n    private create() {\n        if (this.created || !this.compareSpeedMatrix?.length) {\n            return;\n        }\n        this.created = true;\n\n        // this.ngZone.runOutsideAngular(() => {\n        setTimeout(() => {\n            const factory = new ElementsFactory();\n            factory.createSpeedMatrixIndicator(\n                this.canvasSpeedElement.nativeElement,\n                new SpeedMatrixElementInput(this.compareSpeedMatrix, this.compareTrustedIndicator)\n            );\n        }, 10);\n        //   });\n    }\n\n    private delete() {\n        this.created = false;\n        this.hide = false;\n    }\n\n    private change(changes: SimpleChanges) {\n        if (changes.compareSpeedMatrix) {\n            if (!this.compareSpeedMatrix?.length) {\n                this.hide = true;\n                return;\n            }\n        }\n\n        setTimeout(() => {\n            this.delete();\n            this.create();\n        }, 10);\n    }\n\n    private updateMapSize(): void {\n        const mapDivWidth =\n            this.canvasSpeedElement.nativeElement.parentNode?.parentNode['clientWidth'];\n\n        const currentWidth =\n            mapDivWidth ||\n            window.innerWidth ||\n            document.documentElement.clientWidth ||\n            document.body.clientWidth;\n        const currentHeight =\n            this.currentHeight ||\n            window.innerHeight ||\n            document.documentElement.clientHeight ||\n            document.body.clientHeight;\n        this.currentWidth = currentWidth;\n        this.currentHeight = currentHeight;\n\n        this.ngZone.run(() => {\n            this.onSizeChanged();\n        });\n    }\n}\n","<div id=\"container\">\n  <div id=\"canvas-speed-matrix\">\n    <div [hidden]=\"hide\">\n      <canvas #canvasSpeedElement id=\"indic1\"></canvas>\n    </div>\n    <div [hidden]=\"!hide\">\n      <span id=\"hiddenSquare\"> &nbsp;</span>\n    </div>\n    <!--  <span>compareTrustedIndicator {{ compareTrustedIndicator }}</span> -->\n  </div>\n</div>\n","import {Injectable} from '@angular/core';\nimport {\n    MeasureValuePolarContainer,\n    RadarPolarMeasureValue,\n    RainNode,\n    RainPolarMeasureValue,\n} from 'raain-model';\nimport {PolarMapValue} from 'raain-ui';\nimport {ProfileService} from './profile.service';\nimport {FrameSet} from './tools';\n\n@Injectable()\nexport class RadarService {\n    constructor(private profileService: ProfileService) {}\n\n    static getGeoValuesFromRainMeasures(\n        measureValue: RainPolarMeasureValue,\n        rain: RainNode\n    ): PolarMapValue[] {\n        return this.computeValues(measureValue.getPolars(), rain);\n    }\n\n    static getGeoValuesFromRadarMeasures(\n        measureValue: RadarPolarMeasureValue,\n        rain: RainNode\n    ): PolarMapValue[] {\n        return this.computeValues(measureValue.getPolars(), rain);\n    }\n\n    private static computeValues(polarMeasureValues: MeasureValuePolarContainer[], rain: RainNode) {\n        const values: PolarMapValue[] = [];\n        polarMeasureValues.forEach((p) => {\n            const azimuth = p.azimuth;\n            let distance = 0;\n            const polarEdges = p.polarEdges;\n            polarEdges.forEach((e) => {\n                const pmv = new PolarMapValue(e, azimuth, distance);\n                values.push(pmv);\n                distance += p.distance;\n            });\n        });\n\n        return values;\n    }\n\n    async getTimeline(rainNode: RainNode): Promise<FrameSet[]> {\n        const timeline: FrameSet[] = [];\n        const links = rainNode?.getLinks() ?? [];\n\n        for (const link of links) {\n            const cumulativeIndex = link.href.indexOf('cumulatives/');\n            if (cumulativeIndex >= 0) {\n                const start = cumulativeIndex + 'cumulatives/'.length;\n                const str1 = link.href.substring(start);\n                if (str1) {\n                    const splitted = str1.split('/');\n                    const frameDate = new Date(splitted[0]);\n                    const version = splitted[1];\n                    const rainComputationCumulativeId = splitted[2];\n                    const existingTargets = timeline.filter(\n                        (t) => t.date.getTime() === frameDate.getTime()\n                    );\n                    if (existingTargets.length) {\n                        existingTargets[0].rainComputationCumulativeId =\n                            rainComputationCumulativeId;\n                    } else {\n                        timeline.push(\n                            new FrameSet(frameDate, [], null, null, [], rainComputationCumulativeId)\n                        );\n                    }\n                }\n            }\n        }\n\n        return timeline;\n    }\n}\n","export const CONSTANTS = {\n    _RAIN_STATUS_0_NOT_STARTED: 0,\n    _RAIN_STATUS_0_WAIT_FOR_INTERNAL_VALIDATION: 0.3,\n    _RAIN_STATUS_1_READY_TO_COMPUTE: 0.6,\n    _RAIN_STATUS_1_READY: 1,\n\n    _INPUT_VALIDITY_NOT_CHECKED_YET: -1,\n    _INPUT_VALIDITY_CHECK_IN_PROGRESS: -0.5,\n    _INPUT_VALIDITY_NOT_VALID: 0,\n    _INPUT_VALIDITY_NOT_CONFIDENT: 0.5,\n    _INPUT_VALIDITY_VALID: 1,\n};\n","import {CommonModule, NgOptimizedImage, NgStyle} from '@angular/common';\nimport {NgModule, Optional, SkipSelf} from '@angular/core';\nimport {FormsModule} from '@angular/forms';\n\nimport {ProfileService} from './profile.service';\nimport {Storage} from './storage.service';\nimport {RadarService} from './radar.service';\nimport {Cache} from './cache.service';\nimport {ProfileIconDirective} from './profile-icon.directive';\nimport {IonicModule, IonRange} from '@ionic/angular';\nimport {PipesModule} from './pipes.module';\nimport {RaainMapComponent} from './raain-map/raain-map.component';\nimport {RaainCompareComponent} from './raain-compare/raain-compare.component';\nimport {RaainConfigurationComponent} from './raain-configuration/raain-configuration.component';\nimport {RaainDateFocusComponent} from './raain-date-focus/raain-date-focus.component';\nimport {RaainDateDynamicComponent} from './raain-date-dynamic/raain-date-dynamic.component';\nimport {RaainSpeedComponent} from './raain-speed/raain-speed.component';\nimport {RaainCompareStackComponent} from './raain-compare-stack/raain-compare-stack.component';\nimport {RaainGlobeComponent} from './raain-globe/raain-globe.component';\nimport {RaainDetailsComponent} from './raain-details/raain-details.component';\nimport {CumulativeSelectorComponent} from './cumulative-selector/cumulative-selector.component';\n\n@NgModule({\n    declarations: [\n        RaainMapComponent,\n        RaainCompareComponent,\n        RaainCompareStackComponent,\n        RaainDateFocusComponent,\n        RaainDateDynamicComponent,\n        RaainConfigurationComponent,\n        RaainSpeedComponent,\n        RaainGlobeComponent,\n        ProfileIconDirective,\n        RaainDetailsComponent,\n        CumulativeSelectorComponent,\n    ],\n    imports: [CommonModule, FormsModule, IonicModule, NgOptimizedImage, PipesModule],\n    providers: [Storage, RadarService, ProfileService, Cache, IonRange],\n    exports: [\n        CommonModule,\n        NgStyle,\n        PipesModule,\n\n        RaainMapComponent,\n        RaainCompareComponent,\n        RaainCompareStackComponent,\n        RaainDateFocusComponent,\n        RaainDateDynamicComponent,\n        RaainConfigurationComponent,\n        RaainSpeedComponent,\n        RaainGlobeComponent,\n        ProfileIconDirective,\n        RaainDetailsComponent,\n        CumulativeSelectorComponent,\n    ],\n})\nexport class SharedModule {\n    constructor(@Optional() @SkipSelf() parentModule?: SharedModule) {\n        if (parentModule) {\n            // throw new Error(\n            console.warn('SharedModule is already loaded. Import it in the AppModule only');\n        }\n    }\n}\n","import {Pipe, PipeTransform} from '@angular/core';\nimport {EventNode, RainNode} from 'raain-model';\nimport {CONSTANTS} from './shared.const';\n\n@Pipe({name: 'areStopped'})\nexport class AreStopped implements PipeTransform {\n    transform(rains: RainNode[]): RainNode[] {\n        return rains.filter((rain) => rain.status <= CONSTANTS._RAIN_STATUS_0_NOT_STARTED);\n    }\n}\n\n@Pipe({name: 'areInProgress'})\nexport class AreInProgressPipe implements PipeTransform {\n    transform(rains: RainNode[]): RainNode[] {\n        return rains.filter(\n            (rain) =>\n                CONSTANTS._RAIN_STATUS_0_NOT_STARTED < rain.status &&\n                rain.status < CONSTANTS._RAIN_STATUS_1_READY_TO_COMPUTE\n        );\n    }\n}\n\n@Pipe({name: 'areReady'})\nexport class AreReady implements PipeTransform {\n    transform(rains: RainNode[]): RainNode[] {\n        return rains.filter(\n            (rain) =>\n                rain.status >= CONSTANTS._RAIN_STATUS_1_READY_TO_COMPUTE &&\n                rain.quality > CONSTANTS._INPUT_VALIDITY_NOT_CONFIDENT\n        );\n    }\n}\n\n@Pipe({name: 'isReady'})\nexport class IsReady implements PipeTransform {\n    transform(rain: RainNode): RainNode {\n        if (rain.status >= CONSTANTS._RAIN_STATUS_1_READY_TO_COMPUTE) {\n            return rain;\n        }\n        return null;\n    }\n}\n\n@Pipe({name: 'isNotReady'})\nexport class IsNotReady implements PipeTransform {\n    transform(rain: RainNode): RainNode {\n        if (rain.status < CONSTANTS._RAIN_STATUS_1_READY_TO_COMPUTE) {\n            return rain;\n        }\n        return null;\n    }\n}\n\n@Pipe({name: 'waitForValidation'})\nexport class WaitForValidation implements PipeTransform {\n    transform(rain: RainNode): RainNode {\n        if (rain.status === CONSTANTS._RAIN_STATUS_1_READY_TO_COMPUTE) {\n            return rain;\n        }\n        return null;\n    }\n}\n\n@Pipe({name: 'hasGoodQuality'})\nexport class HasGoodQuality implements PipeTransform {\n    transform(rain: RainNode): RainNode {\n        if (rain.quality > CONSTANTS._INPUT_VALIDITY_NOT_CONFIDENT) {\n            return rain;\n        }\n        return null;\n    }\n}\n\n@Pipe({name: 'hasNotGoodQuality'})\nexport class HasNotGoodQuality implements PipeTransform {\n    transform(rain: RainNode): RainNode {\n        if (rain.quality < CONSTANTS._INPUT_VALIDITY_VALID) {\n            return rain;\n        }\n        return null;\n    }\n}\n\n@Pipe({name: 'progressValue'})\nexport class ProgressValue implements PipeTransform {\n    transform(rain: RainNode): number {\n        if (rain.status < 0) {\n            return 0;\n        } else if (rain.status > 1) {\n            return 1;\n        }\n        return rain.status;\n    }\n}\n\n@Pipe({name: 'progressBuffer'})\nexport class ProgressBuffer implements PipeTransform {\n    transform(rain: RainNode): number {\n        if (rain.quality < 0) {\n            return 0;\n        } else if (rain.quality > 1) {\n            return 1;\n        }\n        return rain.quality;\n    }\n}\n\n@Pipe({\n    name: 'haveNotBeenRed',\n    pure: false,\n})\nexport class HaveNotBeenRed implements PipeTransform {\n    transform(events: EventNode[]): EventNode[] {\n        return events.filter((event) => !event.red);\n    }\n}\n","import {Injectable} from '@angular/core';\nimport {LocalStorage} from 'fidj-angular';\n\n@Injectable()\nexport class Storage extends LocalStorage {\n    constructor() {\n        super('raain-app.');\n    }\n}\n","import {MapLatLng} from 'raain-ui';\nimport {\n    GaugeNode,\n    IComparePerDate,\n    ICompares,\n    PositionValue,\n    QualityPoint,\n    RainComputationQuality,\n    RainNode,\n    SpeedMatrix,\n    SpeedMatrixContainer,\n} from 'raain-model';\nimport {XYType} from '../xytype';\nimport {ProfileService} from '../profile.service';\nimport {FrameSet} from './FrameSet';\n\nexport interface ICompareTarget {\n    date: Date;\n    rainComputationId?: string;\n    rainComputationCumulativeId?: string;\n}\n\nexport interface IUICompare {\n    date: Date;\n    name: string;\n    comparePoints: XYType[];\n    comparePointsMax: XYType;\n    comparePointsHistory: QualityPoint[];\n    remarks: string;\n    qualityIndicator: number;\n}\n\nexport class CompareManager {\n    public gaugesInMap: MapLatLng[];\n    public gaugesInCompare: MapLatLng[];\n    public selectedGauges: MapLatLng[];\n    public selectedPixels: MapLatLng[];\n    public pixelsSolutions: MapLatLng[][];\n    public speeds: MapLatLng[];\n\n    // from comparesTimeline\n    public compareNames: string[];\n    public uiCompares: IUICompare[];\n    public compareSpeedMatrix: PositionValue[];\n    public compareVersion: string;\n    public compareTrustedIndicator: number;\n    public compareDates: Date[];\n\n    public currentQualityDoneDate: Date;\n    public currentQualityLaunchedBy: string;\n    public currentQualityTimeSpentInMs: number;\n    public globalComparePoints: XYType[];\n    public globalComparePointsMax: XYType;\n    public globalQualityIndicator: number;\n    public compareSpeed: {angleInDegrees: number; pixelsPerPeriod: number};\n    protected buildCompares: ICompares;\n    protected selectedGauge: QualityPoint;\n    protected selectedGaugeInPoints: QualityPoint;\n    protected selectedGaugeInPointsDetail: string;\n    protected rainComputationQualitiesPerDate: any;\n\n    constructor(\n        protected profileService: ProfileService,\n        public onChanges: () => void = () => {}\n    ) {\n        this.cleanAll();\n    }\n\n    // Merged cumulative from granular comparisons (computed from buildCompares)\n    public get granularCumulativePoints(): XYType[] {\n        if (!this.buildCompares?.compareCumulative?.qualityPoints?.length) {\n            return [];\n        }\n        return this.buildCompares.compareCumulative.qualityPoints.map(\n            (qp) => new XYType(qp.getGaugeValue(), qp.getRainValue(), 2, qp.gaugeLabel, qp.gaugeId)\n        );\n    }\n\n    public get granularCumulativePointsMax(): XYType {\n        if (!this.buildCompares?.compareCumulative) {\n            return new XYType(0, 0);\n        }\n        const maxValue = this.buildCompares.compareCumulative.maxValue * 1.2;\n        return new XYType(maxValue, maxValue);\n    }\n\n    // Default: KGE normalized 0-1 (from raain-model defaults)\n    public get granularCumulativeQualityIndicator(): number {\n        if (!this.buildCompares?.compareCumulative?.qualityPoints?.length) {\n            return null;\n        }\n        return SpeedMatrix.ComputeQualityIndicator(\n            this.buildCompares.compareCumulative.qualityPoints\n        );\n    }\n\n    protected _rainNode: RainNode;\n\n    public get rainNode(): RainNode {\n        return this._rainNode;\n    }\n\n    public set rainNode(rainNode: RainNode) {\n        this._rainNode = rainNode;\n        this.cleanAll();\n    }\n\n    public cleanAll() {\n        this.gaugesInMap = [];\n        this.gaugesInCompare = [];\n        this.selectedGauges = [];\n        this.selectedPixels = [];\n        this.pixelsSolutions = [];\n        this.compareDates = [];\n        this.speeds = [];\n\n        this.buildCompares = {\n            comparesPerDate: [],\n            compareCumulative: null,\n        };\n        this.globalComparePoints = [];\n        this.globalComparePointsMax = new XYType(0, 0);\n        this.globalQualityIndicator = null;\n        // granularCumulative* are now getters computed from buildCompares\n        this.rainComputationQualitiesPerDate = {};\n\n        this.selectedGauge = null;\n        this.selectedGaugeInPoints = null;\n        this.cleanCompareQuality('no compare yet');\n    }\n\n    async refreshCompareQuality(frameSet: FrameSet, onlyOne: boolean) {\n        const comparePerDate = this.getComparePerDate(frameSet.date);\n\n        if (\n            !comparePerDate ||\n            !comparePerDate.rainComputationQuality?.qualitySpeedMatrixContainer\n        ) {\n            // this.cleanCompareQuality(\n            //     'no current quality ' + Object.keys(this.rainComputationQualitiesPerDate)\n            // );\n            // this.onChanges();\n            return;\n        }\n\n        if (onlyOne) {\n            comparePerDate.compareTimeline = comparePerDate.compareTimeline.filter(\n                (c) => c.date.getTime() === frameSet.date.getTime()\n            );\n        }\n\n        const uiCompares: IUICompare[] = comparePerDate.compareTimeline\n            .map((c) => {\n                // Default: KGE normalized 0-1\n                const qualityIndicator = SpeedMatrix.ComputeQualityIndicator(c.qualityPoints);\n                return {\n                    date: c.date,\n                    name: c.name,\n                    comparePoints: c.qualityPoints.map(\n                        (p) =>\n                            new XYType(\n                                p.getGaugeValue(),\n                                p.getRainValue(),\n                                2,\n                                p.gaugeLabel,\n                                p.gaugeId\n                            )\n                    ),\n                    comparePointsMax: new XYType(c.maxValue * 1.2, c.maxValue * 1.2),\n                    comparePointsHistory: c.qualityPointsLegacy,\n                    remarks: c.remarks,\n                    qualityIndicator,\n                };\n            })\n            .sort((a, b) => a.date?.getTime() - b.date?.getTime());\n\n        this.currentQualityDoneDate = comparePerDate.rainComputationQuality.isDoneDate;\n        this.currentQualityTimeSpentInMs = comparePerDate.rainComputationQuality.timeSpentInMs;\n        this.currentQualityLaunchedBy = comparePerDate.rainComputationQuality.launchedBy;\n        this.compareVersion = comparePerDate.rainComputationQuality.getVersion();\n\n        this.compareSpeed =\n            comparePerDate.rainComputationQuality.qualitySpeedMatrixContainer.getSpeed();\n        this.compareNames = uiCompares.map((c) => c.name);\n        this.uiCompares = uiCompares;\n\n        this.onChanges();\n    }\n\n    async refreshGlobalCompareQuality(\n        targetsOrdered: ICompareTarget[],\n        period: {begin: Date; end: Date},\n        withCompareDuplicate: boolean,\n        provider: string = 'Raain',\n        timeStepInMinutes: number = 5,\n        timeStepMode: 'eq' | 'lte' = 'eq'\n    ) {\n        try {\n            await this.fetchRainComputationQualities(targetsOrdered, provider, timeStepInMinutes, timeStepMode);\n\n            await this.buildComparesTimeline(targetsOrdered, period, withCompareDuplicate);\n\n            if (!this.buildCompares.compareCumulative) {\n                // throw Error('needs cumulative compare');\n                return;\n            }\n\n            const countForAverage = targetsOrdered.length;\n            const maxValue = this.buildCompares.compareCumulative.maxValue * 1.2;\n            const cumulativePoints = this.buildCompares.compareCumulative.qualityPoints.map(\n                (qp) =>\n                    new XYType(qp.getGaugeValue(), qp.getRainValue(), 2, qp.gaugeLabel, qp.gaugeId)\n            );\n            const cumulativePointsMax = new XYType(maxValue, maxValue);\n            // Default: KGE normalized 0-1\n            const cumulativeQualityIndicator = SpeedMatrix.ComputeQualityIndicator(\n                this.buildCompares.compareCumulative.qualityPoints\n            );\n\n            // Set for cumulative mode\n            this.globalComparePoints = cumulativePoints;\n            this.globalComparePointsMax = cumulativePointsMax;\n            this.globalQualityIndicator = cumulativeQualityIndicator;\n            // granularCumulative* are now getters computed from buildCompares.compareCumulative\n        } catch (e) {\n            console.warn(e);\n        }\n    }\n\n    async setGaugesInMap() {\n        // Get all gauge IDs linked to this rainNode\n        const rainNodeGaugeIds = this.rainNode.getLinks(GaugeNode.TYPE).map((l) => l.getId());\n\n        // Fetch gauges from API (may be filtered/limited)\n        let gaugesToFilter = await this.profileService.getGauges(\n            this.rainNode?.id,\n            this.rainNode.getCenter()\n        );\n        gaugesToFilter = gaugesToFilter\n            .sort((a, b) => {\n                return (\n                    a.approxDistanceFrom(this.rainNode.getCenter()) -\n                    b.approxDistanceFrom(this.rainNode.getCenter())\n                );\n            })\n            .filter((v, index) => index < 200);\n\n        // Build a map of gauges from API response\n        const gaugesFromApi = new Map<\n            string,\n            {id: string; latitude: number; longitude: number; name: string}\n        >();\n        for (const gauge of gaugesToFilter) {\n            gaugesFromApi.set(gauge.id, gauge);\n        }\n\n        // Fetch missing gauges individually (those linked but not in API response)\n        const missingGaugeIds = rainNodeGaugeIds.filter((id) => !gaugesFromApi.has(id));\n        for (const gaugeId of missingGaugeIds) {\n            try {\n                const gauge = await this.profileService.getGauge(gaugeId);\n                if (gauge) {\n                    gaugesFromApi.set(gauge.id, gauge);\n                }\n            } catch (e) {\n                console.warn(`Failed to fetch gauge ${gaugeId}:`, e);\n            }\n        }\n\n        // Filter to only gauges linked to this rainNode\n        const visibleGauges = rainNodeGaugeIds\n            .map((id) => gaugesFromApi.get(id))\n            .filter((g) => !!g);\n        console.log('visibleGauges:', visibleGauges.length, '/', rainNodeGaugeIds.length);\n\n        const gaugesLatLng: MapLatLng[] = [];\n        for (const gauge of visibleGauges) {\n            gaugesLatLng.push(\n                new MapLatLng(gauge.latitude, gauge.longitude, undefined, gauge.id, gauge.name)\n            );\n        }\n        this.gaugesInMap = gaugesLatLng;\n    }\n\n    async setGaugesInCompare() {\n        const qualityPoints: QualityPoint[] = [];\n        for (const compare of this.uiCompares) {\n            for (const qualityPoint of compare.comparePointsHistory) {\n                const alreadyAdded = qualityPoints.filter(\n                    (p) => p?.gaugeId === qualityPoint.gaugeId\n                );\n                if (alreadyAdded.length === 0) {\n                    qualityPoints.push(qualityPoint);\n                }\n            }\n        }\n\n        this.gaugesInCompare = qualityPoints.map((p) => {\n            return new MapLatLng(\n                p.gaugeCartesianValue.lat,\n                p.gaugeCartesianValue.lng,\n                0,\n                p.gaugeId,\n                p.gaugeLabel + '>' + p.getGaugeValue(),\n                p.getGaugeValue()\n            );\n        });\n\n        this.resetSelectedGauges();\n    }\n\n    async selectGauge(gaugeId: string, compareIndex: number) {\n        if (gaugeId) {\n            const xys = this.getCurrentQualityPoints(compareIndex).filter(\n                (p) => p.gaugeId === gaugeId\n            );\n            this.selectedGauge = xys.length === 1 ? xys[0] : null;\n        } else {\n            this.selectedGauge = null;\n        }\n\n        if (!this.selectedGauge) {\n            this.resetSelectedGauges();\n            const gaugesFiltered = this.gaugesInMap.filter((g) => g.id === gaugeId);\n            if (gaugesFiltered.length === 1) {\n                this.selectedGauges = [gaugesFiltered[0]];\n            }\n            return;\n        }\n\n        const selectedGaugeInPoints = this.getCurrentQualityPoints(compareIndex).filter(\n            (p) => p.gaugeId === this.selectedGauge.gaugeId\n        );\n        let pixelsSolutions: MapLatLng[][] = [];\n\n        if (selectedGaugeInPoints.length === 1) {\n            const remarks = JSON.parse(selectedGaugeInPoints[0].remark).sort(\n                (a, b) => a.criteriaAttemptedToBeMinimum - b.criteriaAttemptedToBeMinimum\n            );\n            console.log(remarks);\n            pixelsSolutions = remarks.map((remark) =>\n                remark.solutionForGauge.pixels.map(\n                    (p) =>\n                        new MapLatLng(\n                            p.y + 0.005,\n                            p.x + 0.01,\n                            0,\n                            '' + !remark.notPossible,\n                            '' + !remark.notPossible,\n                            1\n                        )\n                )\n            );\n\n            const timeDeltaInMinutes = selectedGaugeInPoints[0].getTimeDeltaInMinutes();\n            this.selectedGaugeInPointsDetail =\n                '' +\n                selectedGaugeInPoints[0].gaugeLabel +\n                ' > ' +\n                Math.round(selectedGaugeInPoints[0].getGaugeValue() * 100) / 100 +\n                ' / ' +\n                Math.round(selectedGaugeInPoints[0].getRainValue() * 100) / 100 +\n                ' dT=' +\n                timeDeltaInMinutes;\n\n            this.selectedGaugeInPoints = selectedGaugeInPoints[0];\n        } else {\n            this.selectedGaugeInPoints = null;\n            this.selectedGauges = [];\n            this.selectedPixels = [];\n            this.pixelsSolutions = [];\n            return;\n        }\n\n        this.selectedGauges = [\n            new MapLatLng(\n                this.selectedGaugeInPoints.gaugeCartesianValue.lat,\n                this.selectedGaugeInPoints.gaugeCartesianValue.lng,\n                undefined,\n                this.selectedGaugeInPoints.gaugeId,\n                this.selectedGaugeInPoints.gaugeLabel +\n                    '>' +\n                    this.selectedGaugeInPoints.gaugeCartesianValue.value,\n                this.selectedGaugeInPoints.gaugeCartesianValue.value\n            ),\n        ];\n\n        this.selectGaugeInCompare();\n\n        const pixels: MapLatLng[] = [];\n        for (const rainCartesianValue of this.selectedGaugeInPoints.rainCartesianValues) {\n            pixels.push(\n                new MapLatLng(rainCartesianValue.lat + 0.005, rainCartesianValue.lng + 0.01)\n            );\n        }\n        this.selectedPixels = pixels;\n\n        this.pixelsSolutions = pixelsSolutions;\n    }\n\n    // Returns all granular quality points across all dates in the period (excludes cumulative end date)\n    getAllGranularComparePoints(): {\n        date: Date;\n        gaugeName: string;\n        gaugeValue: number;\n        pixelValue: number;\n    }[] {\n        const result: {date: Date; gaugeName: string; gaugeValue: number; pixelValue: number}[] =\n            [];\n\n        if (!this.buildCompares?.comparesPerDate?.length || !this.compareDates?.length) {\n            return result;\n        }\n\n        // Find the last date (cumulative end date) to exclude it\n        const lastDateTime = Math.max(...this.compareDates.map((d) => d.getTime()));\n\n        for (const comparePerDate of this.buildCompares.comparesPerDate) {\n            // Skip the last date which contains cumulative values\n            if (comparePerDate.date.getTime() >= lastDateTime) {\n                continue;\n            }\n            if (!comparePerDate.compareTimeline?.length) {\n                continue;\n            }\n            // Get first timeline entry (current step) for each date\n            const currentCompare = comparePerDate.compareTimeline[0];\n            if (!currentCompare?.qualityPoints?.length) {\n                continue;\n            }\n            for (const qp of currentCompare.qualityPoints) {\n                result.push({\n                    date: comparePerDate.date,\n                    gaugeName: qp.gaugeLabel,\n                    gaugeValue: qp.getGaugeValue(),\n                    pixelValue: qp.getRainValue(),\n                });\n            }\n        }\n\n        return result.sort((a, b) => a.date.getTime() - b.date.getTime());\n    }\n\n    protected async buildComparesTimeline(\n        targetsOrdered: ICompareTarget[],\n        period: {begin: Date; end: Date},\n        withCompareDuplicate: boolean\n    ): Promise<ICompares> {\n        const compareDates = targetsOrdered.map((t) => t.date);\n\n        const qualities: RainComputationQuality[] = compareDates\n            .filter((d) => !!d)\n            .map((d) => this.getRainComputationQuality(d))\n            .filter((rcq) => !!rcq);\n\n        this.compareDates = compareDates?.length > 1 ? compareDates : [period.begin, period.end];\n        if (this.compareDates[0].getTime() > period.begin.getTime()) {\n            this.compareDates.unshift(period.begin);\n        }\n\n        this.buildCompares = SpeedMatrixContainer.BuildCompares(qualities, !withCompareDuplicate);\n        return this.buildCompares;\n    }\n\n    protected getComparePerDate(date: Date): IComparePerDate {\n        const existing = this.buildCompares.comparesPerDate.filter(\n            (c) => c.date.getTime() === date.getTime()\n        );\n        if (existing.length === 1) {\n            return existing[0];\n        }\n        return null;\n    }\n\n    protected getCurrentQualityPoints(compareIndex: number) {\n        if (\n            this.uiCompares.length === 0 ||\n            compareIndex < 0 ||\n            this.compareNames.length < compareIndex\n        ) {\n            return [];\n        }\n\n        return this.uiCompares[compareIndex].comparePointsHistory;\n    }\n\n    protected cleanCompareQuality(details?: string) {\n        this.compareVersion = details;\n        this.compareNames = [];\n        this.uiCompares = [];\n        this.compareSpeedMatrix = [];\n        this.compareTrustedIndicator = undefined;\n\n        this.currentQualityDoneDate = new Date(-1);\n        this.currentQualityLaunchedBy = '';\n        this.currentQualityTimeSpentInMs = -1;\n    }\n\n    protected async fetchRainComputationQualities(\n        targetsOrdered: ICompareTarget[],\n        provider: string = 'Raain',\n        timeStepInMinutes: number = 5,\n        timeStepMode: 'eq' | 'lte' = 'eq'\n    ) {\n        for (const target of targetsOrdered) {\n            if (!this.rainComputationQualitiesPerDate[target.date.toISOString()]) {\n                try {\n                    let rainComputationQuality: RainComputationQuality;\n\n                    if (target.rainComputationCumulativeId) {\n                        rainComputationQuality =\n                            await this.profileService.getRainCumulativeCumulativesCompare(\n                                this.rainNode,\n                                target.rainComputationCumulativeId,\n                                provider,\n                                timeStepInMinutes,\n                                timeStepMode\n                            );\n                    }\n\n                    if (rainComputationQuality) {\n                        let isConsistent = true;\n                        const matrices =\n                            rainComputationQuality.qualitySpeedMatrixContainer.getMatrices();\n                        for (const matrix of matrices) {\n                            if (!matrix.isConsistent()) {\n                                isConsistent = false;\n                            }\n                        }\n\n                        if (!isConsistent) {\n                            console.warn(\n                                `One of rainComputationQuality matrices is not consistent for ${target.date.toISOString()}`\n                            );\n                        }\n\n                        this.rainComputationQualitiesPerDate[target.date.toISOString()] =\n                            rainComputationQuality;\n                    }\n                } catch (e) {\n                    console.warn(e);\n                }\n            }\n        }\n    }\n\n    protected getRainComputationQuality(date: Date): RainComputationQuality {\n        return this.rainComputationQualitiesPerDate[date.toISOString()];\n    }\n\n    protected selectGaugeInCompare() {\n        const globalComparePoints = JSON.parse(JSON.stringify(this.globalComparePoints));\n        for (const p of globalComparePoints) {\n            if (p.id === this.selectedGaugeInPoints?.gaugeId) {\n                p.r = 10;\n            } else {\n                p.r = 2;\n            }\n        }\n        this.globalComparePoints = globalComparePoints;\n\n        for (const compare of this.uiCompares) {\n            const comparePoints = JSON.parse(JSON.stringify(compare.comparePoints));\n            comparePoints.forEach((p) => {\n                if (p.id === this.selectedGaugeInPoints?.gaugeId) {\n                    p.r = 10;\n                } else {\n                    p.r = 3;\n                }\n            });\n            compare.comparePoints = comparePoints;\n        }\n    }\n\n    protected resetSelectedGauges() {\n        // console.log('resetSelectedGauges reset');\n        this.selectedGauge = null;\n        this.selectedGaugeInPoints = null;\n        this.selectedGauges = [];\n        this.selectedPixels = [];\n        this.pixelsSolutions = [];\n        this.selectGaugeInCompare();\n    }\n}\n","import {DateRange} from 'raain-ui';\n\nexport function mapDateRangeToString(range: DateRange): 'hour' | 'day' | 'month' | 'year' {\n    switch (range) {\n        case DateRange.HOUR:\n            return 'hour';\n        case DateRange.DAY:\n            return 'day';\n        case DateRange.MONTH:\n            return 'month';\n        case DateRange.YEAR:\n            return 'year';\n        default:\n            return 'year';\n    }\n}\n","export class FrameSet {\n    constructor(\n        public date: Date,\n        public radarMeasureIds: string[] = [],\n        public rainComputationId: string = null,\n        public rainComputationVersion: string = null,\n        public rainComputationQualities: {\n            version: string;\n            id: string;\n        }[] = [],\n        public rainComputationCumulativeId: string = null\n    ) {}\n}\n","import {GaugeNode, LatLng} from 'raain-model';\n\nexport class GaugeNodeFilter extends GaugeNode {\n    public isIn = true;\n    public distance = 0;\n\n    constructor(json: any) {\n        super(json);\n    }\n\n    approxDistanceFrom(center: LatLng): number {\n        this.distance =\n            Math.round(\n                (Math.pow(this.latitude - center.lat, 2) +\n                    Math.pow(this.longitude - center.lng, 2)) *\n                    100 *\n                    100\n            ) / 100;\n        return this.distance;\n    }\n\n    add() {\n        this.isIn = true;\n    }\n\n    remove() {\n        this.isIn = false;\n    }\n}\n","import {FrameSet} from './FrameSet';\nimport {from, mergeMap, Subject, takeUntil, timer} from 'rxjs';\nimport {\n    CartesianMeasureValue,\n    CartesianTools,\n    ICartesianMeasureValue,\n    RadarNode,\n    RainComputationMap,\n    RainNode,\n} from 'raain-model';\nimport {CartesianMapValue, TimeframeContainer, TimeframeContainers} from 'raain-ui';\nimport {RadarService} from '../radar.service';\nimport {ProfileService} from '../profile.service';\nimport {CompareManager, ICompareTarget} from './CompareManager';\nimport {XYType} from '../xytype';\n\nconst sleep = (ms: number) => new Promise((resolve) => setTimeout(resolve, ms));\n\nexport class RefreshManager {\n    public rainComputationMapVersion: string;\n    public rainComputationMapDate: Date;\n    public rainComputationMapDoneDate: Date;\n    public rainComputationMapLaunchedBy: string;\n    public rainComputationMapTimeSpentInMs: number;\n\n    public rainComputationMapOriginalMin: number;\n    public rainComputationMapOriginalMax: number;\n\n    public sumFn: (cartesianMapValues: CartesianMapValue[]) => number;\n    public sumValues: CartesianMapValue[];\n\n    public provider: string = 'Raain';\n    public timeStepInMinutes: number = 10;\n    public timeStepMode: 'eq' | 'lte' = 'eq';\n    public lastError: string = '';\n    public cumulative: boolean = false;\n\n    protected closeRefreshTimer: Subject<unknown>;\n    protected countsPeriod: {\n        percentImages?: XYType[];\n        queueRunning?: number;\n        progress?: number;\n    };\n    protected timeframesFromRadars: FrameSet[];\n    protected timeframesFromRadarsExtended: FrameSet[];\n    protected timelineSelectedFrameSet: FrameSet;\n    protected timeframeDates: Date[];\n    protected expectedTimelineCount: number = 0;\n    protected presentTimelineCount: number = 0;\n    protected cartesianTools: CartesianTools;\n    protected removeDuplicate: boolean;\n    protected dataInternal: boolean;\n    protected onRefreshInProgress: (\n        countPeriods: {\n            percentImages?: XYType[];\n            queueRunning?: number;\n            progress?: number;\n        },\n        timeframeDates: Date[]\n    ) => Promise<void>;\n    protected onRefreshDone: (timeframeDates: Date[]) => Promise<void>;\n    protected onFetchDone: (timeframeContainers?: TimeframeContainers) => Promise<void>;\n\n    constructor(\n        protected radarService: RadarService,\n        protected profileService: ProfileService,\n        protected compareManager: CompareManager\n    ) {\n        this._period = {begin: new Date(), end: new Date()};\n        this.closeRefreshTimer = new Subject<unknown>();\n        this.cartesianTools = new CartesianTools();\n        this.cleanAll();\n    }\n\n    protected _rainNode: RainNode;\n\n    public get rainNode(): RainNode {\n        return this._rainNode;\n    }\n\n    public set rainNode(rainNode: RainNode) {\n        this._rainNode = rainNode;\n        this.cleanAll();\n    }\n\n    protected _period: {begin: Date; end: Date};\n\n    get period(): {begin: Date; end: Date} {\n        return this._period;\n    }\n\n    set period(period: {begin: Date; end: Date}) {\n        this._period.begin = new Date(period.begin);\n        this._period.end = new Date(period.end);\n        this.refreshCounts().then((ignored) => {});\n    }\n\n    public setMethods(\n        onRefreshInProgress: (\n            countPeriods: {\n                percentImages?: XYType[];\n                queueRunning?: number;\n            },\n            timeframeDates: Date[]\n        ) => Promise<void>,\n        onRefreshDone: (timeframeDates: Date[]) => Promise<void>,\n        onFetchDone: (timeframeContainers?: TimeframeContainers) => Promise<void>\n    ) {\n        this.onRefreshInProgress = onRefreshInProgress;\n        this.onRefreshDone = onRefreshDone;\n        this.onFetchDone = onFetchDone;\n    }\n\n    cleanAll() {\n        this.lastError = '';\n        this.countsPeriod = {percentImages: [], queueRunning: 0, progress: 0};\n        this.timeframesFromRadars = [];\n        this.timeframesFromRadarsExtended = [];\n        this.timeframeDates = [];\n        this.removeDuplicate = true;\n        this.closeRefreshTimer?.next(null);\n    }\n\n    async fetch(\n        dateShown: Date,\n        withGaugesMeasures: boolean,\n        cumulativeHours = 0\n    ): Promise<FrameSet> {\n        // set the target\n        const currents = this.timeframesFromRadarsExtended.filter(\n            (t) => t.date.getTime() === dateShown.getTime()\n        );\n        if (currents.length !== 1) {\n            return;\n        }\n\n        // build current Frameset\n        const current: FrameSet = currents[0];\n        const target = {\n            ...current,\n            withGauge: withGaugesMeasures,\n            cumulativeHours: cumulativeHours,\n        };\n\n        const timeframeContainers = await this.refreshMapTimeframeContainers(target);\n\n        await this.onFetchDone(timeframeContainers);\n        await this.refreshCompareQuality(current);\n\n        this.timelineSelectedFrameSet = current;\n    }\n\n    getTimelineFrameSet(): FrameSet[] {\n        return this.timeframesFromRadars;\n    }\n\n    getExpectedTimelineCount(): number {\n        return this.expectedTimelineCount;\n    }\n\n    getPresentTimelineCount(): number {\n        return this.presentTimelineCount;\n    }\n\n    getTimelineSelectedFrameSet(): FrameSet {\n        return this.timelineSelectedFrameSet;\n    }\n\n    async refresh(launchQualityAfter: boolean, dataInternal: boolean) {\n        this.lastError = '';\n\n        this.checkPeriod();\n\n        this.dataInternal = dataInternal;\n\n        const asyncDone = (error?: string) => {\n            if (error) {\n                console.error('Error in refresh', error);\n            }\n            this.closeRefreshTimer.next(null);\n            this.onRefreshDone(this.timeframeDates).then((_ignored) => {});\n        };\n\n        const asyncRefresh = async () => {\n            this.onRefreshInProgress(await this.refreshCounts(), this.timeframeDates).then(\n                (_ignored) => {}\n            );\n            const done = await this.refreshPeriodInsidePolling();\n            if (done) {\n                asyncDone();\n            }\n        };\n\n        timer(1000, 10000) // Wait 1s, then every 10s\n            .pipe(\n                mergeMap(() => from(asyncRefresh())),\n                takeUntil(this.closeRefreshTimer)\n            )\n            .subscribe({\n                error: (error) => asyncDone(JSON.stringify(error)),\n            });\n    }\n\n    setRemoveDuplicate(b: boolean) {\n        this.removeDuplicate = b;\n    }\n\n    public async setReportPeriod(date: Date) {\n        let values: CartesianMapValue[] = [];\n        for (const frameSet of this.timeframesFromRadars) {\n            if (frameSet.date.getTime() !== date.getTime()) {\n                continue;\n            }\n            values = values.concat(await this.getValues(frameSet));\n        }\n\n        this.sumFn = (cartesianMapValues: CartesianMapValue[]) => {\n            return cartesianMapValues.reduce((p, v) => p + v.value, 0);\n        };\n        this.sumValues = values;\n    }\n\n    protected checkPeriod() {\n        if (this.period.begin.getTime() === this.period.end.getTime()) {\n            const message = 'need a period';\n            this.lastError += message;\n            throw new Error(message);\n        }\n    }\n\n    protected async refreshCounts() {\n        if (!this.rainNode) {\n            return this.countsPeriod;\n        }\n\n        const counts = await this.profileService.getCounts(this.rainNode.id, {\n            range: 'day',\n            periodBegin: this._period.begin,\n        });\n\n        let progress = 0;\n\n        // Verify progress only for SimpleZone\n        if (this.rainNode.getLinks(RadarNode.TYPE).length <= 1) {\n            progress = await this.profileService.getRainProgress(this.rainNode.id);\n        }\n\n        this.countsPeriod = {\n            ...counts,\n            progress,\n        };\n\n        return this.countsPeriod;\n    }\n\n    protected getRainComputationQualityTarget(frameset: FrameSet): string {\n        if (frameset.rainComputationQualities.length <= 0) {\n            return undefined;\n        }\n        return frameset.rainComputationQualities[0].id;\n    }\n\n    protected async refreshPeriodInsidePolling(): Promise<boolean> {\n        try {\n            const done = await this.refreshCheckIfDone();\n\n            // behind refresh\n            await this.refreshTimeframesFromRadars(done);\n            await this.refreshGlobalCompareReport(done);\n\n            return done;\n        } catch (e) {\n            console.warn(e);\n            this.lastError += e.message;\n        }\n        return false;\n    }\n\n    protected async refreshCheckIfDone(): Promise<boolean> {\n        await sleep(2000);\n        return this.countsPeriod.progress === 0;\n    }\n\n    protected async refreshTimeframesFromRadars(done: boolean) {\n        if (!done || !this.rainNode) {\n            return [];\n        }\n\n        try {\n            const beginExtended = new Date(this.period.begin);\n            const endExtended = new Date(this.period.end);\n            if (!this.cumulative) {\n                // Only extend period for granular mode (to get neighboring frames)\n                // For cumulative mode, use exact period\n                beginExtended.setMinutes(beginExtended.getMinutes() - 7);\n                endExtended.setMinutes(endExtended.getMinutes() + 7);\n            }\n\n            const windowInMinutes = this.cumulative\n                ? Math.round((this.period.end.getTime() - this.period.begin.getTime()) / 60000)\n                : this.timeStepInMinutes;\n\n            this.rainNode = await this.profileService.getRainTimeframe(\n                this.rainNode.id,\n                beginExtended,\n                endExtended,\n                this.dataInternal,\n                this.provider,\n                this.timeStepInMinutes,\n                windowInMinutes\n            );\n\n            this.timeframesFromRadarsExtended = await this.radarService.getTimeline(this.rainNode);\n            this.timeframesFromRadars = this.timeframesFromRadarsExtended\n                .filter(\n                    (frameSet) =>\n                        this.period.begin.getTime() < frameSet.date.getTime() &&\n                        frameSet.date.getTime() <= this.period.end.getTime()\n                )\n                .sort((a, b) => a.date.getTime() - b.date.getTime());\n\n            this.timeframeDates = this.timeframesFromRadars.map((frameSet) => frameSet.date);\n\n            // Compute all expected dates\n            // For cumulative mode: only 1 expected date (the period end)\n            // For granular mode: all dates from period.begin to period.end with timeStepInMinutes\n            const allExpectedDates: Date[] = [];\n            if (this.cumulative) {\n                // In cumulative mode, we expect only ONE timeframe (the cumulative)\n                allExpectedDates.push(new Date(this.period.end));\n            } else {\n                // Start from begin + step: cumulative dates represent window ends,\n                // so the first expected date is begin + timeStep, not begin itself\n                const beginTime = new Date(this.period.begin).getTime();\n                const currentDate = new Date(beginTime + this.timeStepInMinutes * 60000);\n                while (currentDate.getTime() <= this.period.end.getTime()) {\n                    allExpectedDates.push(new Date(currentDate));\n                    currentDate.setMinutes(currentDate.getMinutes() + this.timeStepInMinutes);\n                }\n            }\n\n            this.expectedTimelineCount = allExpectedDates.length;\n\n            // Check if all expected dates are present in timeframeDates\n            const timeframeDateTimes = new Set(this.timeframeDates.map((d) => d.getTime()));\n            const missingDates = allExpectedDates.filter(\n                (expectedDate) => !timeframeDateTimes.has(expectedDate.getTime())\n            );\n            this.presentTimelineCount = allExpectedDates.length - missingDates.length;\n\n            if (missingDates.length > 0) {\n                const message =\n                    `Missing ${missingDates.length} timeframe(s) out of ${allExpectedDates.length} expected: ` +\n                    missingDates.map((d) => d.toISOString()).join(', ');\n                console.warn(message);\n                this.lastError += message;\n            }\n\n            return this.timeframesFromRadars;\n        } catch (e) {\n            console.error('refreshTimeframesFromRadars', e);\n        }\n\n        return [];\n    }\n\n    protected async refreshGlobalCompareReport(done: boolean) {\n        if (!done) {\n            return;\n        }\n\n        try {\n            const targets: ICompareTarget[] = [];\n            for (const frameSet of this.timeframesFromRadars) {\n                const target = JSON.parse(JSON.stringify(frameSet));\n                target.date = new Date(target.date);\n                targets.push(target);\n            }\n\n            await this.compareManager.refreshGlobalCompareQuality(\n                targets,\n                this.period,\n                !this.removeDuplicate,\n                this.provider,\n                this.timeStepInMinutes,\n                this.timeStepMode\n            );\n        } catch (e) {\n            console.error('refreshGlobalCompareReport', e);\n        }\n    }\n\n    protected async refreshMapTimeframeContainers(target: {\n        date: Date;\n        rainComputationCumulativeId: string;\n        withGauge: boolean;\n        cumulativeHours: number;\n    }) {\n        if (!target?.rainComputationCumulativeId) {\n            const message = `Pb with refreshMapTimeframeContainers insights ${target?.date.toISOString()}`;\n            console.warn(message);\n            this.lastError += message;\n            return null;\n        }\n\n        const rainNode = this.rainNode;\n        const containers: TimeframeContainer[] = [];\n        const newCreatedTimeframeContainers = new TimeframeContainers(containers);\n        try {\n            let rainNodeCartesianMap: RainComputationMap;\n\n            if (target.cumulativeHours && target.rainComputationCumulativeId) {\n                // For N-hour cumulative, use the last frame's cumulative (end of period)\n                // The cumulative is pre-computed by raain-ground with windowInMinutes=60\n                const lastFrame =\n                    this.timeframesFromRadarsExtended[this.timeframesFromRadarsExtended.length - 1];\n                const cumulativeId =\n                    lastFrame?.rainComputationCumulativeId || target.rainComputationCumulativeId;\n\n                // Use direct cartesian-map endpoint - cumulative data fetched from S3\n                rainNodeCartesianMap =\n                    await this.profileService.getRainComputationCumulativeCartesianMapById(\n                        rainNode.id,\n                        cumulativeId\n                    );\n            } else {\n                rainNodeCartesianMap =\n                    await this.profileService.getRainComputationCumulativeCartesianMapById(\n                        rainNode.id,\n                        target.rainComputationCumulativeId\n                    );\n            }\n\n            if (rainNodeCartesianMap) {\n                newCreatedTimeframeContainers.addFromRainComputationMap(\n                    rainNodeCartesianMap,\n                    false\n                );\n\n                this.rainComputationMapVersion = rainNodeCartesianMap.version;\n                this.rainComputationMapDate = new Date(rainNodeCartesianMap.date);\n                this.rainComputationMapDoneDate = rainNodeCartesianMap.isDoneDate;\n                this.rainComputationMapLaunchedBy = rainNodeCartesianMap.launchedBy;\n                this.rainComputationMapTimeSpentInMs = rainNodeCartesianMap.timeSpentInMs;\n\n                this.rainComputationMapOriginalMin = rainNodeCartesianMap.originalDBZMin;\n                this.rainComputationMapOriginalMax = rainNodeCartesianMap.originalDBZMax;\n            }\n        } catch (e) {\n            const message = `Pb with cumulatives for id: ${target.rainComputationCumulativeId} ${e.message}`;\n            console.warn(message);\n            this.lastError += message;\n        }\n\n        return newCreatedTimeframeContainers;\n    }\n\n    protected async refreshCompareQuality(frameSet: FrameSet) {\n        await this.compareManager.refreshCompareQuality(frameSet, true);\n        await this.compareManager.setGaugesInCompare();\n    }\n\n    protected async getValues(target: FrameSet): Promise<CartesianMapValue[]> {\n        if (!target?.rainComputationCumulativeId) {\n            const message = `Pb with target insights ${target?.date.toISOString()}`;\n            console.warn(message);\n            this.lastError += message;\n            return [];\n        }\n\n        let values: CartesianMapValue[] = [];\n        const rainComputationMap =\n            await this.profileService.getRainComputationCumulativeCartesianMapById(\n                this.rainNode.id,\n                target.rainComputationCumulativeId\n            );\n\n        try {\n            if (rainComputationMap) {\n                rainComputationMap.getMapData().forEach((m) => {\n                    if (m.values) {\n                        (m.values as ICartesianMeasureValue[]).forEach((v) => {\n                            const cartesianMeasureValue = CartesianMeasureValue.From(v);\n                            values = values.concat(\n                                CartesianMapValue.From(\n                                    cartesianMeasureValue.getCartesianValues(),\n                                    this.cartesianTools\n                                )\n                            );\n                        });\n                    }\n                });\n            }\n        } catch (e) {\n            const message = `Pb with cumulatives for id: ${target.rainComputationCumulativeId} ${e.message}`;\n            console.warn(message);\n            this.lastError += message;\n        }\n\n        return values;\n    }\n}\n","export * from './CompareManager';\nexport * from './FrameSet';\nexport * from './GaugeNodeFilter';\nexport * from './RefreshManager';\nexport * from './DateRangeTools';\n","export class XYType {\n    constructor(\n        public x: number,\n        public y: number,\n        public r?: number,\n        public name?: string,\n        public id?: string\n    ) {}\n}\n","import {bpInfo} from '../bpInfo';\n\nconst somethingToAdd = '_lab';\nexport const environment = {\n    production: true,\n    description: somethingToAdd,\n    fidjKey: 'fidj-c7da8742d81613d8',\n    // TODO  serverUrl: 'http://localhost:3004/v3',\n    serverUrl: 'https://api.lab.radartorain.com/v3',\n    version: bpInfo.version + somethingToAdd,\n};\n","import {enableProdMode} from '@angular/core';\nimport {platformBrowserDynamic} from '@angular/platform-browser-dynamic';\n\nimport {AppModule} from './core/app.module';\nimport {environment} from './environments/environment';\n\nif (environment.production) {\n    enableProdMode();\n}\n\nplatformBrowserDynamic()\n    .bootstrapModule(AppModule)\n    .catch((err) => console.error(err));\n\nexport * from './core/shared';\n","var map = {\n\t\"./ion-accordion_2.entry.js\": [\n\t\t70079,\n\t\t8592,\n\t\t79\n\t],\n\t\"./ion-action-sheet.entry.js\": [\n\t\t25593,\n\t\t8592,\n\t\t5593\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t13225,\n\t\t8592,\n\t\t3225\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t4812,\n\t\t8592,\n\t\t4812\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t86655,\n\t\t6655\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t44856,\n\t\t8592,\n\t\t4856\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t13059,\n\t\t3059\n\t],\n\t\"./ion-breadcrumb_2.entry.js\": [\n\t\t58648,\n\t\t8592,\n\t\t8648\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t98308,\n\t\t8308\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t44690,\n\t\t4690\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t64090,\n\t\t4090\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t36214,\n\t\t6214\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t69447,\n\t\t9447\n\t],\n\t\"./ion-datetime-button.entry.js\": [\n\t\t17950,\n\t\t9022,\n\t\t7950\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t79689,\n\t\t9022,\n\t\t8592,\n\t\t9689\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t18840,\n\t\t8592,\n\t\t8840\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t40749,\n\t\t749\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t69667,\n\t\t8592,\n\t\t9667\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t83288,\n\t\t8592,\n\t\t3288\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t35473,\n\t\t8592,\n\t\t5473\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t53634,\n\t\t8592,\n\t\t3634\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t22855,\n\t\t2855\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t495,\n\t\t8592,\n\t\t495\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t58737,\n\t\t8592,\n\t\t8737\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t99632,\n\t\t8592,\n\t\t9632\n\t],\n\t\"./ion-picker-column-internal.entry.js\": [\n\t\t54446,\n\t\t8592,\n\t\t4446\n\t],\n\t\"./ion-picker-internal.entry.js\": [\n\t\t32275,\n\t\t2275\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t48050,\n\t\t8592,\n\t\t8050\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t18994,\n\t\t8994\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t23592,\n\t\t3592\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t35454,\n\t\t8592,\n\t\t5454\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t290,\n\t\t8592,\n\t\t290\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t92666,\n\t\t8592,\n\t\t2666\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t64816,\n\t\t4816\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t45534,\n\t\t5534\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t94902,\n\t\t8592,\n\t\t4902\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t91938,\n\t\t8592,\n\t\t1938\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t78179,\n\t\t8179\n\t],\n\t\"./ion-slide_2.entry.js\": [\n\t\t90668,\n\t\t668\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t61624,\n\t\t8592,\n\t\t1624\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t19989,\n\t\t9989\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t28902,\n\t\t8592,\n\t\t8902\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t70199,\n\t\t8592,\n\t\t199\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t48395,\n\t\t8395\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t96357,\n\t\t6357\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t38268,\n\t\t8268\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t15269,\n\t\t8592,\n\t\t5269\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t32875,\n\t\t2875\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(() => {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 50863;\nmodule.exports = webpackAsyncContext;","/* (ignored) */"],"names":["bpInfo","version","NoPreloading","RouterModule","PageNotFoundComponent","AuthGuard","routes","path","redirectTo","pathMatch","loadChildren","then","x","HomePageModule","canActivate","RadarsPageModule","RainsPageModule","EventsPageModule","ProfilePageModule","LoginPageModule","LogoutPageModule","component","AppRoutingModule","forRoot","useHash","preloadingStrategy","imports","exports","SplashScreen","environment","i0","AppComponent","constructor","platform","profile","title","url","icon","notifications","initializeApp","defaultUrlForAPI","serverUrl","ready","initFidj","hide","isLoggedIn","logout","fidjKey","production","getNotifications","getAllNotifications","getBadges","page","length","selectors","decls","vars","consts","template","BrowserModule","RouteReuseStrategy","IonicModule","IonicRouteStrategy","SharedModule","BrowserAnimationsModule","HttpClientModule","FidjModule","AppModule","bootstrap","provide","useClass","declarations","fidjService","next","state","isDemoMode","refreshProfile","loggedIn","getRoles","indexOf","factory","providedIn","ngOnInit","Cache","_cache","getValue","key","asyncGetter","Object","prototype","hasOwnProperty","call","console","log","putValue","value","getOwnPropertyNames","warn","EventEmitter","CumulativeSelectorComponent","profileService","cdr","Map","Set","currentWindowMinutes","Math","round","currentPeriodEnd","getTime","currentPeriodBegin","loadAvailablePeriods","loading","errorMessage","markForCheck","response","getCumulativePeriods","rainId","provider","forced","isAdmin","periodBegin","toISOString","periodEnd","availablePeriods","periods","filter","p","windowInMinutes","baseCumulatives","find","calculateCoverage","e","error","count","coveragePercent","canCreateNew","baseTimeStep","expectedCount","ceil","selectPeriod","period","periodSelected","emit","Date","toggleExpand","expandedPeriods","has","delete","loadingExpanded","add","detailed","set","cumulatives","selectIndividualCumulative","item","endDate","date","beginDate","cumulativeId","id","cumulativeDate","isExpanded","isLoadingExpanded","getExpandedItems","get","getItemPeriodBegin","createNewPeriod","creating","creationProgress","result","createCumulativePeriod","timeStepInMinutes","Error","success","pollForCompletion","message","startTime","now","POLL_TIMEOUT_MS","progress","getRainProgress","getRainTimeframe","found","elapsed","sleep","POLL_INTERVAL_MS","ms","Promise","resolve","setTimeout","cancel","cancelled","formatPeriod","begin","end","toLocaleString","formatWindow","minutes","hours","inputs","outputs","ctx","Link","FidjStorageNode","getEmptyNode","getDemoNode","demoNode","link","FidjStorageResult","FidjStorage","storage","data","storeData","node","JSON","parse","stringify","fidjMetaResult","put","getRefreshedNodeCopy","firstDemoData","sync","fidjFindAllResults","findAll","setDemoMode","isDemo","AreInProgressPipe","AreReady","AreStopped","HasGoodQuality","HasNotGoodQuality","HaveNotBeenRed","IsNotReady","IsReady","ProgressBuffer","ProgressValue","WaitForValidation","PipesModule","ProfileIconDirective","el","router","isInsideModal","email","getEmail","profileButtons","document","createElement","setAttribute","button","profileButton","label","textContent","appendChild","addEventListener","navigateToProfile","nativeElement","startBackgroundRefresh","ngOnDestroy","refreshTimer","clearInterval","navigateByUrl","setInterval","checkAndRefreshConnection","performConnectionRefresh","showSkeletonText","style","opacity","transition","hideSkeletonText","isConnected","needsConnectionRefresh","connectionRefresh","updateButtonState","removeAttribute","parent","parentElement","tagName","toLowerCase","BehaviorSubject","BuildQueryString","EventNode","GaugeMeasure","GaugeNode","RadarNode","RainComputationMap","RainComputationQuality","RainNode","SpeedMatrixContainer","TeamNode","LoggerLevelEnum","XYType","GaugeNodeFilter","ProfileService","httpClient","asTeamId","readyForSync","roles","fidjStorage","mode","nodeData","setRoles","checkError","setEmail","fidjProd","loginInDemoMode","err","init","logLevel","WARN","crypto","prod","useDB","code","ignored","gotoLout","skipLocationChange","replaceUrl","gotoLogin","navigate","needsRefresh","refresh","storeAll","createNotification","rain","resp","sendOnEndpoint","verb","defaultKeyUrl","params","queryString","relativePath","map","n","getTeams","teams","team","push","getTeam","teamId","getRadars","name","radars","r","radar","getRadar","putRadar","radarNode","getLonelyRadars","rains","lonelyRadars","forEach","rdId","getLink","TYPE","getId","format","String","rainNode","timeframeCumulative","getRains","getRain","getCounts","options","range","counts","percentImages","percentRainy","percentQ","percentComputations","c","setDateComponents","NaN","queueRunning","getCountsHour","rainySum","rainyCount","getRainComputationCumulativeCartesianMapById","rainComputationCumulativeId","rainComputationMap","getRainComputationCumulativeCumulativesMapById","cumulativeHours","queryPath","getRainCumulativeCompare","qualityJson","qualities","rainComputationQuality","qualitySpeedMatrixContainer","CreateFromJson","getRainCumulativeCumulativesCompare","timeStepMode","allQualities","i","extra","merge","inQueue","getIndicators","cumulative","indicators","filters","undefined","isReady","limit","total","body","confName","getGauge","gaugeId","getGauges","aroundLatLng","pageCount","baseParams","lat","lng","gauges","gauge","getGaugeMeasures","gaugeMeasures","gaugeMeasure","getProviders","providers","dateToShow","year","setUTCFullYear","month","setUTCMonth","day","setUTCDate","hour","setUTCHours","minute","setUTCMinutes","RaainCompareStackComponent","ngZone","onClick","selectedPoint","point","compareIndex","exportCumulativeToCsv","points","compareManager","globalComparePoints","dates","compareDates","dateRange","formatDate","csvRows","y","csvContent","join","downloadCsv","formatDateForFilename","exportGranularToCsv","allPoints","getAllGranularComparePoints","dateStr","gaugeName","gaugeValue","pixelValue","content","filename","blob","Blob","type","URL","createObjectURL","click","revokeObjectURL","slice","replace","currentHeight","CompareElementInput","ElementsFactory","RaainCompareComponent","onSizeChanged","ngAfterViewChecked","create","ngOnChanges","changes","change","changeData","newData","newMaxLine","changed","dataset","compareElement","chart","datasets","line","update","onResize","event","updateMapSize","created","createCompare","canvasElement","pointMax","bind","destroy","mapDivWidth","parentNode","padding","currentWidth","window","innerWidth","documentElement","clientWidth","innerHeight","clientHeight","run","viewQuery","ChartScaleColors","ConfigurationElementInput","Tools","RaainConfigurationComponent","onDrag","changedPoints","reset","minPoint","maxPoint","logStyle","confTransparency","color","getTransparency","yStart","log10","yEnd","runOutsideAngular","configurationElement","createConfiguration","DateRange","DynamicDateStatusElementInput","RaainDateDynamicComponent","focusDate","focusRange","CENTURY","focusPrevious","dynamicDateStatusElement","focusReset","focusNext","mapStyleToChartType","validChartTypes","includes","monthSampleData","fetchData","MONTH","createDynamicDateStatus","dataLength","chartMinValue","chartMaxValue","onLastClick","changedDate","DateStatusElementInput","RaainDateFocusComponent","dateStatusElement","createDateStatus","CartesianMeasureValue","MapLatLng","ModelPerformanceElementInput","TimeframeContainers","mapDateRangeToString","$event","ctx_r58","TEST_DETECTION","RaainDetailsComponent","PeriodDisplay","d","userTimezoneOffset","getTimezoneOffset","exampleFormattedDate","substring","DateUTC","hasISOFormat","match","MapCountToDateValue","min","openQualityModal","showQualityModal","qualityIndicatorsLoading","qualityIndicators","modelPerformanceData","buildModelPerformanceData","renderPerformanceChart","closeQualityModal","performanceChart","grouped","ind","computingVersion","qualityVersion","lastUpdatedAt","KPEi","KPE1","entry","indDate","averageQuality","Array","from","entries","canvas","performanceCanvasRef","createModelPerformance","toLocaleDateString","toLocaleTimeString","values","fakeData","HOUR","hourCounts","cleanAll","onEnableCountHistoryTab","toggleHistory","countPoints","onPeriodBeginChange","newValue","target","periodBeginAsString","onPeriodDurationChange","onPeriodEndChange","periodEndAsString","getDurationInHours","HOUR_MS","updateRefreshManagerPeriod","_event","durationInHours","updateCumulativeDurationInMinutes","onDateChangeInCount","dateChanged","dateString","periodDurationAsString","toggleCumulative","refreshManager","toggleAdmin","onDateChangeInMap","dateShown","fetchAndUpdateMap","setReportPeriod","onSumChangeInMap","sum","sumDetails","onGaugeSelectInMap","mapLatLng","gaugesFiltered","gaugesInMap","g","gaugeSelected","refreshGaugeValues","selectGauge","gaugeValueShowBegin","DAY_MS","gaugeValueShowEnd","setHours","gaugeValues","gm","cartesianMeasureValue","getCartesianValues","gaugeSelectedPoints","onGaugeSelectInCompare","onToggleMap","onTogglePixelMarkers","onCumulativeToggleClick","currentValue","eventType","preventDefault","stopPropagation","showCumulativeSelector","cumulativeToggleRef","checked","getDateBasedOnCumulativeMode","timeframeDates","toggleMap","onCumulativePeriodSelected","selection","durationMs","durationHours","onCumulativeSelectorCancelled","cumulativeDurationInMinutes","parseFloat","selectedTimeStep","onProviderChanged","selectedProvider","detail","applyRefreshManagerSettings","onTimeStepChanged","raw","stepStr","split","parseInt","loadProviders","availableProviders","sort","availableTimeSteps","a","b","forceTimeStep","buildTimeStepOptions","availableTimeStepOptions","step","onChangeDetectionTest","updateTruncatedError","lastError","truncatedError","updateCachedValues","updatePercentOfImages","updatePercentOfComputations","refreshMap","borders","setGaugesInMap","triggerCumulativeCreation","creatingCumulative","pollForCumulativeCompletion","setPeriodOfNow","last30mn","setMinutes","getMinutes","countsPeriod","percentOfImages","duringPeriod","summed","reduce","getExpectedTimelineCount","percentOfComputations","presentComputationCount","expectedComputationCount","presentCount","getPresentTimelineCount","fallbackDates","dateExists","some","getCumulativeHours","alignTo5minFloor","alignedMinutes","floor","getFullYear","getMonth","getDate","getHours","fetch","toggleGaugeMeasures","currentTimeframeTarget","getTimelineSelectedFrameSet","timeframeContainers","toggleCompare","toggleRemoveCompareDuplicate","showCumulativeToggle","refreshInProgress","showFullError","initRain","setMethods","onRefreshInProgress","onRefreshDone","onFetchDone","center","getCenter","coordinates","teamNode","countPeriods","_changes","EarthMapElementInput","RaainGlobeComponent","earthMapElement","createEarthMap","CartesianTools","RaainDivIcon","ScaleElementInput","RaainMapComponent","cartesianTools","pixelsCount","iconSize","iconAnchor","pixelSize","pixelAnchor","popupAnchor","raainDivIcons","html","gaugesInCompare","selectedGauges","pixels","pixelsSolution","speeds","showTimeframe","force","dateToShowAsString","areDatesEqual","possibleDates","index","getDateToShowIndex","autoplay","previous","stop","play","changeShowMarkers","mapElement","markersLayer","mapLeaflet","showMarkers","addToMap","removeFromMap","changeShowSpeedMarkers","allMarkers","buildMarkersConfig","markersProduced","updateMarkers","bindMarkersClickEvents","changeAlpha","alpha","eachLayer","layer","_container","toggleMapSettings","showMapSettings","createScale","scaleLabel","createdOutside","createMap","mapDivRef","markers","on","evt","onMapMouseMove","onZoom","onMoveEnd","bounds","getBounds","howManyPixelsInEarthMap","_southWest","_northEast","updateLayerDimensions","changeNavigation","defaultDate","remove","mcText","nextDate","possibleNames","timeframeNameToShow","cumulativeDateFrom","currentFrameContainer","possibleNewDefaultDate","previousValue","selectedGauge","setView","updateTimeframe","compositeLayer","sumValues","updateSum","showVisiblePixelMarkers","drawer","getFirstDrawer","updateVisiblePixelMarkers","sumFn","sumOfPixels","getExecOfWindowPoints","average","sumResult","changedSum","visiblePixelMarkers","refreshMarkersLayer","visiblePixels","v","lat2","lng2","containers","firstInit","durationInMs","setTime","areDateISOEqual","handleAvailablePixels","availablePixels","zoom","width","height","calculatePixelDensity","earthCircumference","metersPerPixel","cos","PI","pow","pixelsPerMeter","totalVisibleArea","latlng","toFixed","valueLat","valueLng","valueLat2","valueLng2","valueSelected","roundTo3Decimals","onMapClick","alt","selectedMarker","timeframe","updateMapTimeframe","deleteScale","scaleCanvasRef","sortedMap","sortedArray","scaleColors","scaleLabels","scaleElement","iconsLatLng","raainDivIcon","showSpeedMarkers","marker","speedInMetersPerSec","minSize","maxSize","minSpeed","maxSpeed","normalizedSpeed","max","size","rotationAngle","className","date1","date2","timestamp1","timestamp2","dateISO","m","setCurrentWidth","setCurrentHeight","invalidateSize","animate","SpeedMatrixElementInput","RaainSpeedComponent","compareSpeedMatrix","createSpeedMatrixIndicator","canvasSpeedElement","compareTrustedIndicator","PolarMapValue","FrameSet","RadarService","getGeoValuesFromRainMeasures","measureValue","computeValues","getPolars","getGeoValuesFromRadarMeasures","polarMeasureValues","azimuth","distance","polarEdges","pmv","getTimeline","timeline","links","getLinks","cumulativeIndex","href","start","str1","splitted","frameDate","existingTargets","t","CONSTANTS","_RAIN_STATUS_0_NOT_STARTED","_RAIN_STATUS_0_WAIT_FOR_INTERNAL_VALIDATION","_RAIN_STATUS_1_READY_TO_COMPUTE","_RAIN_STATUS_1_READY","_INPUT_VALIDITY_NOT_CHECKED_YET","_INPUT_VALIDITY_CHECK_IN_PROGRESS","_INPUT_VALIDITY_NOT_VALID","_INPUT_VALIDITY_NOT_CONFIDENT","_INPUT_VALIDITY_VALID","CommonModule","NgOptimizedImage","NgStyle","FormsModule","Storage","IonRange","parentModule","transform","status","pure","quality","events","red","LocalStorage","SpeedMatrix","CompareManager","onChanges","granularCumulativePoints","buildCompares","compareCumulative","qualityPoints","qp","getGaugeValue","getRainValue","gaugeLabel","granularCumulativePointsMax","maxValue","granularCumulativeQualityIndicator","ComputeQualityIndicator","_rainNode","selectedPixels","pixelsSolutions","comparesPerDate","globalComparePointsMax","globalQualityIndicator","rainComputationQualitiesPerDate","selectedGaugeInPoints","cleanCompareQuality","refreshCompareQuality","frameSet","onlyOne","comparePerDate","getComparePerDate","compareTimeline","uiCompares","qualityIndicator","comparePoints","comparePointsMax","comparePointsHistory","qualityPointsLegacy","remarks","currentQualityDoneDate","isDoneDate","currentQualityTimeSpentInMs","timeSpentInMs","currentQualityLaunchedBy","launchedBy","compareVersion","getVersion","compareSpeed","getSpeed","compareNames","refreshGlobalCompareQuality","targetsOrdered","withCompareDuplicate","fetchRainComputationQualities","buildComparesTimeline","countForAverage","cumulativePoints","cumulativePointsMax","cumulativeQualityIndicator","rainNodeGaugeIds","l","gaugesToFilter","approxDistanceFrom","gaugesFromApi","missingGaugeIds","visibleGauges","gaugesLatLng","latitude","longitude","setGaugesInCompare","compare","qualityPoint","alreadyAdded","gaugeCartesianValue","resetSelectedGauges","xys","getCurrentQualityPoints","remark","criteriaAttemptedToBeMinimum","solutionForGauge","notPossible","timeDeltaInMinutes","getTimeDeltaInMinutes","selectedGaugeInPointsDetail","selectGaugeInCompare","rainCartesianValue","rainCartesianValues","lastDateTime","currentCompare","getRainComputationQuality","rcq","unshift","BuildCompares","existing","details","isConsistent","matrices","getMatrices","matrix","DAY","YEAR","radarMeasureIds","rainComputationId","rainComputationVersion","rainComputationQualities","json","isIn","mergeMap","Subject","takeUntil","timer","CartesianMapValue","RefreshManager","radarService","_period","closeRefreshTimer","refreshCounts","timeframesFromRadars","timeframesFromRadarsExtended","removeDuplicate","withGaugesMeasures","currents","current","withGauge","refreshMapTimeframeContainers","timelineSelectedFrameSet","getTimelineFrameSet","expectedTimelineCount","presentTimelineCount","launchQualityAfter","dataInternal","checkPeriod","asyncDone","_ignored","asyncRefresh","done","refreshPeriodInsidePolling","pipe","subscribe","setRemoveDuplicate","concat","getValues","cartesianMapValues","getRainComputationQualityTarget","frameset","refreshCheckIfDone","refreshTimeframesFromRadars","refreshGlobalCompareReport","beginExtended","endExtended","allExpectedDates","beginTime","currentDate","timeframeDateTimes","missingDates","expectedDate","targets","newCreatedTimeframeContainers","rainNodeCartesianMap","lastFrame","addFromRainComputationMap","rainComputationMapVersion","rainComputationMapDate","rainComputationMapDoneDate","rainComputationMapLaunchedBy","rainComputationMapTimeSpentInMs","rainComputationMapOriginalMin","originalDBZMin","rainComputationMapOriginalMax","originalDBZMax","getMapData","From","somethingToAdd","description","enableProdMode","__NgCli_bootstrap_1","bootstrapModule","catch"],"sourceRoot":"webpack:///","x_google_ignoreList":[48,49]}